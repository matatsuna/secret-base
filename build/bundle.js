!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t,n){window.eve=n(1);var r=function(e){var t,n={},r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,16,(new Date).getTime()),!0},o=Array.isArray||function(e){return e instanceof Array||"[object Array]"==Object.prototype.toString.call(e)},i=0,a="M"+(+new Date).toString(36),s=Date.now||function(){return+new Date},u=function(e){var t=this;if(null==e)return t.s;var n=t.s-e;t.b+=t.dur*n,t.B+=t.dur*n,t.s=e},l=function(e){if(null==e)return this.spd;this.spd=e},c=function(e){var t=this;if(null==e)return t.dur;t.s=t.s*e/t.dur,t.dur=e},f=function(){var t=this;delete n[t.id],t.update(),e("mina.stop."+t.id,t)},p=function(){var e=this;e.pdif||(delete n[e.id],e.update(),e.pdif=e.get()-e.b)},d=function(){var e=this;e.pdif&&(e.b=e.get()-e.pdif,delete e.pdif,n[e.id]=e,_())},h=function(){var e,t=this;if(o(t.start)){e=[];for(var n=0,r=t.start.length;n<r;n++)e[n]=+t.start[n]+(t.end[n]-t.start[n])*t.easing(t.s)}else e=+t.start+(t.end-t.start)*t.easing(t.s);t.set(e)},_=function(o){if(o){var i=0;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a],u=s.get();i++,s.s=(u-s.b)/(s.dur/s.spd),s.s>=1&&(delete n[a],s.s=1,i--,function(t){setTimeout(function(){e("mina.finish."+t.id,t)})}(s)),s.update()}t=!!i&&r(_)}else t||(t=r(_))},v=function(e,t,r,o,s,g,y){var m={id:a+(i++).toString(36),start:e,end:t,b:r,s:0,dur:o-r,spd:1,get:s,set:g,easing:y||v.linear,status:u,speed:l,duration:c,stop:f,pause:p,resume:d,update:h};n[m.id]=m;var b,k=0;for(b in n)if(n.hasOwnProperty(b)&&2==++k)break;return 1==k&&_(),m};return v.time=s,v.getById=function(e){return n[e]||null},v.linear=function(e){return e},v.easeout=function(e){return Math.pow(e,1.7)},v.easein=function(e){return Math.pow(e,.48)},v.easeinout=function(e){if(1==e)return 1;if(0==e)return 0;var t=.48-e/1.04,n=Math.sqrt(.1734+t*t),r=n-t,o=-n-t,i=Math.pow(Math.abs(r),1/3)*(r<0?-1:1)+Math.pow(Math.abs(o),1/3)*(o<0?-1:1)+.5;return 3*(1-i)*i*i+i*i*i},v.backin=function(e){if(1==e)return 1;var t=1.70158;return e*e*((t+1)*e-t)},v.backout=function(e){if(0==e)return 0;var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},v.elastic=function(e){return e==!!e?e:Math.pow(2,-10*e)*Math.sin((e-.075)*(2*Math.PI)/.3)+1},v.bounce=function(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},window.mina=v,v}("undefined"==typeof eve?function(){}:eve),o=function(e){function t(e,r){if(e){if(e.nodeType)return q(e);if(O(e,"array")&&t.set)return t.set.apply(t,e);if(e instanceof U)return e;if(null==r)try{return q(e=n.doc.querySelector(String(e)))}catch(e){return null}}return new G(e=null==e?"100%":e,r=null==r?"100%":r)}t.version="0.5.1",t.toString=function(){return"Snap v"+this.version},t._={};var n={win:e.window,doc:e.window.document};t._.glob=n;var r,o,i="hasOwnProperty",a=String,s=parseFloat,u=parseInt,l=Math,c=l.max,f=l.min,p=l.abs,d=(l.pow,l.PI),h=(l.round,""),_=Object.prototype.toString,v=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,y=(t._.separator=/[,\s]+/,/[\s]*,[\s]*/),m={hs:1,rg:1},b=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,k=/([rstm])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,w=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\s]*,?[\s]*/gi,x=0,S="S"+(+new Date).toString(36),T=function(e){return(e&&e.type?e.type:h)+S+(x++).toString(36)},P="http://www.w3.org/1999/xlink",E="http://www.w3.org/2000/svg",C={};t.url=function(e){return"url('#"+e+"')"};function M(e,t){if(t){if("#text"==e&&(e=n.doc.createTextNode(t.text||t["#text"]||"")),"#comment"==e&&(e=n.doc.createComment(t.text||t["#text"]||"")),"string"==typeof e&&(e=M(e)),"string"==typeof t)return 1==e.nodeType?"xlink:"==t.substring(0,6)?e.getAttributeNS(P,t.substring(6)):"xml:"==t.substring(0,4)?e.getAttributeNS(E,t.substring(4)):e.getAttribute(t):"text"==t?e.nodeValue:null;if(1==e.nodeType){for(var r in t)if(t[i](r)){var o=a(t[r]);o?"xlink:"==r.substring(0,6)?e.setAttributeNS(P,r.substring(6),o):"xml:"==r.substring(0,4)?e.setAttributeNS(E,r.substring(4),o):e.setAttribute(r,o):e.removeAttribute(r)}}else"text"in t&&(e.nodeValue=t.text)}else e=n.doc.createElementNS(E,e);return e}function O(e,t){return"finite"==(t=a.prototype.toLowerCase.call(t))?isFinite(e):!("array"!=t||!(e instanceof Array||Array.isArray&&Array.isArray(e)))||("null"==t&&null===e||t==typeof e&&null!==e||"object"==t&&e===Object(e)||_.call(e).slice(8,-1).toLowerCase()==t)}function j(e,t,n){return function r(){var o=Array.prototype.slice.call(arguments,0),a=o.join("␀"),s=r.cache=r.cache||{},u=r.count=r.count||[];return s[i](a)?(function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}(u,a),n?n(s[a]):s[a]):(u.length>=1e3&&delete s[u.shift()],u.push(a),s[a]=e.apply(t,o),n?n(s[a]):s[a])}}function F(e){return e%360*d/180}t._.$=M,t._.id=T,t.format=(r=/\{([^\}]+)\}/g,o=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(e,t){return a(e).replace(r,function(e,n){return function(e,t,n){var r=n;return t.replace(o,function(e,t,n,o,i){t=t||o,r&&(t in r&&(r=r[t]),"function"==typeof r&&i&&(r=r()))}),r=(null==r||r==n?e:r)+""}(e,n,t)})}),t._.clone=function e(t){if("function"==typeof t||Object(t)!==t)return t;var n=new t.constructor;for(var r in t)t[i](r)&&(n[r]=e(t[r]));return n},t._.cacher=j,t.rad=F,t.deg=function(e){return 180*e/d%360},t.sin=function(e){return l.sin(t.rad(e))},t.tan=function(e){return l.tan(t.rad(e))},t.cos=function(e){return l.cos(t.rad(e))},t.asin=function(e){return t.deg(l.asin(e))},t.acos=function(e){return t.deg(l.acos(e))},t.atan=function(e){return t.deg(l.atan(e))},t.atan2=function(e){return t.deg(l.atan2(e))},t.angle=function e(t,n,r,o,i,a){if(null==i){var s=t-r,u=n-o;return s||u?(180+180*l.atan2(-u,-s)/d+360)%360:0}return e(t,n,i,a)-e(r,o,i,a)},t.len=function(e,n,r,o){return Math.sqrt(t.len2(e,n,r,o))},t.len2=function(e,t,n,r){return(e-n)*(e-n)+(t-r)*(t-r)},t.closestPoint=function(e,t,n){function r(e){var r=e.x-t,o=e.y-n;return r*r+o*o}for(var o,i,a,s,u=e.node,l=u.getTotalLength(),c=l/u.pathSegList.numberOfItems*.125,f=1/0,p=0;p<=l;p+=c)(s=r(a=u.getPointAtLength(p)))<f&&(o=a,i=p,f=s);for(c*=.5;c>.5;){var d,h,_,v,g,y;(_=i-c)>=0&&(g=r(d=u.getPointAtLength(_)))<f?(o=d,i=_,f=g):(v=i+c)<=l&&(y=r(h=u.getPointAtLength(v)))<f?(o=h,i=v,f=y):c*=.5}return o={x:o.x,y:o.y,length:i,distance:Math.sqrt(f)}},t.is=O,t.snapTo=function(e,t,n){if(n=O(n,"finite")?n:10,O(e,"array")){for(var r=e.length;r--;)if(p(e[r]-t)<=n)return e[r]}else{var o=t%(e=+e);if(o<n)return t-o;if(o>e-n)return t-o+e}return t},t.getRGB=j(function(e){if(!e||(e=a(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:L};if("none"==e)return{r:-1,g:-1,b:-1,hex:"none",toString:L};if(!m[i](e.toLowerCase().substring(0,2))&&"#"!=e.charAt()&&(e=I(e)),!e)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:L};var n,r,o,p,d,h,_=e.match(v);return _?(_[2]&&(o=u(_[2].substring(5),16),r=u(_[2].substring(3,5),16),n=u(_[2].substring(1,3),16)),_[3]&&(o=u((d=_[3].charAt(3))+d,16),r=u((d=_[3].charAt(2))+d,16),n=u((d=_[3].charAt(1))+d,16)),_[4]&&(h=_[4].split(y),n=s(h[0]),"%"==h[0].slice(-1)&&(n*=2.55),r=s(h[1]),"%"==h[1].slice(-1)&&(r*=2.55),o=s(h[2]),"%"==h[2].slice(-1)&&(o*=2.55),"rgba"==_[1].toLowerCase().slice(0,4)&&(p=s(h[3])),h[3]&&"%"==h[3].slice(-1)&&(p/=100)),_[5]?(h=_[5].split(y),n=s(h[0]),"%"==h[0].slice(-1)&&(n/=100),r=s(h[1]),"%"==h[1].slice(-1)&&(r/=100),o=s(h[2]),"%"==h[2].slice(-1)&&(o/=100),("deg"==h[0].slice(-3)||"°"==h[0].slice(-1))&&(n/=360),"hsba"==_[1].toLowerCase().slice(0,4)&&(p=s(h[3])),h[3]&&"%"==h[3].slice(-1)&&(p/=100),t.hsb2rgb(n,r,o,p)):_[6]?(h=_[6].split(y),n=s(h[0]),"%"==h[0].slice(-1)&&(n/=100),r=s(h[1]),"%"==h[1].slice(-1)&&(r/=100),o=s(h[2]),"%"==h[2].slice(-1)&&(o/=100),("deg"==h[0].slice(-3)||"°"==h[0].slice(-1))&&(n/=360),"hsla"==_[1].toLowerCase().slice(0,4)&&(p=s(h[3])),h[3]&&"%"==h[3].slice(-1)&&(p/=100),t.hsl2rgb(n,r,o,p)):(n=f(l.round(n),255),r=f(l.round(r),255),o=f(l.round(o),255),p=f(c(p,0),1),(_={r:n,g:r,b:o,toString:L}).hex="#"+(16777216|o|r<<8|n<<16).toString(16).slice(1),_.opacity=O(p,"finite")?p:1,_)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:L}},t),t.hsb=j(function(e,n,r){return t.hsb2rgb(e,n,r).hex}),t.hsl=j(function(e,n,r){return t.hsl2rgb(e,n,r).hex}),t.rgb=j(function(e,t,n,r){if(O(r,"finite")){var o=l.round;return"rgba("+[o(e),o(t),o(n),+r.toFixed(2)]+")"}return"#"+(16777216|n|t<<8|e<<16).toString(16).slice(1)});var I=function(e){var t=n.doc.getElementsByTagName("head")[0]||n.doc.getElementsByTagName("svg")[0],r="rgb(255, 0, 0)";return(I=j(function(e){if("red"==e.toLowerCase())return r;t.style.color=r,t.style.color=e;var o=n.doc.defaultView.getComputedStyle(t,h).getPropertyValue("color");return o==r?null:o}))(e)},A=function(){return"hsb("+[this.h,this.s,this.b]+")"},N=function(){return"hsl("+[this.h,this.s,this.l]+")"},L=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},B=function(e,n,r){if(null==n&&O(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(r=e.b,n=e.g,e=e.r),null==n&&O(e,string)){var o=t.getRGB(e);e=o.r,n=o.g,r=o.b}return(e>1||n>1||r>1)&&(e/=255,n/=255,r/=255),[e,n,r]},R=function(e,n,r,o){var i={r:e=l.round(255*e),g:n=l.round(255*n),b:r=l.round(255*r),opacity:O(o,"finite")?o:1,hex:t.rgb(e,n,r),toString:L};return O(o,"finite")&&(i.opacity=o),i};t.color=function(e){var n;return O(e,"object")&&"h"in e&&"s"in e&&"b"in e?(n=t.hsb2rgb(e),e.r=n.r,e.g=n.g,e.b=n.b,e.opacity=1,e.hex=n.hex):O(e,"object")&&"h"in e&&"s"in e&&"l"in e?(n=t.hsl2rgb(e),e.r=n.r,e.g=n.g,e.b=n.b,e.opacity=1,e.hex=n.hex):(O(e,"string")&&(e=t.getRGB(e)),O(e,"object")&&"r"in e&&"g"in e&&"b"in e&&!("error"in e)?(n=t.rgb2hsl(e),e.h=n.h,e.s=n.s,e.l=n.l,n=t.rgb2hsb(e),e.v=n.b):((e={hex:"none"}).r=e.g=e.b=e.h=e.s=e.v=e.l=-1,e.error=1)),e.toString=L,e},t.hsb2rgb=function(e,t,n,r){var o,i,a,s,u;return O(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(n=e.b,t=e.s,r=e.o,e=e.h),s=(u=n*t)*(1-p((e=(e*=360)%360/60)%2-1)),o=i=a=n-u,R(o+=[u,s,0,0,s,u][e=~~e],i+=[s,u,u,s,0,0][e],a+=[0,0,s,u,u,s][e],r)},t.hsl2rgb=function(e,t,n,r){var o,i,a,s,u;return O(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(n=e.l,t=e.s,e=e.h),(e>1||t>1||n>1)&&(e/=360,t/=100,n/=100),s=(u=2*t*(n<.5?n:1-n))*(1-p((e=(e*=360)%360/60)%2-1)),o=i=a=n-u/2,R(o+=[u,s,0,0,s,u][e=~~e],i+=[s,u,u,s,0,0][e],a+=[0,0,s,u,u,s][e],r)},t.rgb2hsb=function(e,t,n){var r,o;return e=(n=B(e,t,n))[0],t=n[1],n=n[2],{h:((0==(o=(r=c(e,t,n))-f(e,t,n))?null:r==e?(t-n)/o:r==t?(n-e)/o+2:(e-t)/o+4)+360)%6*60/360,s:0==o?0:o/r,b:r,toString:A}},t.rgb2hsl=function(e,t,n){var r,o,i,a;return e=(n=B(e,t,n))[0],t=n[1],n=n[2],r=((o=c(e,t,n))+(i=f(e,t,n)))/2,{h:((0==(a=o-i)?null:o==e?(t-n)/a:o==t?(n-e)/a+2:(e-t)/a+4)+360)%6*60/360,s:0==a?0:r<.5?a/(2*r):a/(2-2*r),l:r,toString:N}},t.parsePathString=function(e){if(!e)return null;var n=t.path(e);if(n.arr)return t.path.clone(n.arr);var r={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},o=[];return O(e,"array")&&O(e[0],"array")&&(o=t.path.clone(e)),o.length||a(e).replace(b,function(e,t,n){var i=[],a=t.toLowerCase();if(n.replace(w,function(e,t){t&&i.push(+t)}),"m"==a&&i.length>2&&(o.push([t].concat(i.splice(0,2))),a="l",t="m"==t?"l":"L"),"o"==a&&1==i.length&&o.push([t,i[0]]),"r"==a)o.push([t].concat(i));else for(;i.length>=r[a]&&(o.push([t].concat(i.splice(0,r[a]))),r[a]););}),o.toString=t.path.toString,n.arr=t.path.clone(o),o};var D=t.parseTransformString=function(e){if(!e)return null;var n=[];return O(e,"array")&&O(e[0],"array")&&(n=t.path.clone(e)),n.length||a(e).replace(k,function(e,t,r){var o=[];t.toLowerCase();r.replace(w,function(e,t){t&&o.push(+t)}),n.push([t].concat(o))}),n.toString=t.path.toString,n};t._.svgTransform2string=function(e){var t=[];return e=e.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,function(e,n,r){return r=r.split(/\s*,\s*|\s+/),"rotate"==n&&1==r.length&&r.push(0,0),"scale"==n&&(r.length>2?r=r.slice(0,2):2==r.length&&r.push(0,0),1==r.length&&r.push(r[0],0,0)),"skewX"==n?t.push(["m",1,0,l.tan(F(r[0])),1,0,0]):"skewY"==n?t.push(["m",1,l.tan(F(r[0])),0,1,0,0]):t.push([n.charAt(0)].concat(r)),e}),t},t._.rgTransform=/^[a-z][\s]*-?\.?\d/i,t._.transform2matrix=function(e,n){var r=D(e),o=new t.Matrix;if(r)for(var i=0,s=r.length;i<s;i++){var u,l,c,f,p,d=r[i],h=d.length,_=a(d[0]).toLowerCase(),v=d[0]!=_,g=v?o.invert():0;"t"==_&&2==h?o.translate(d[1],0):"t"==_&&3==h?v?(u=g.x(0,0),l=g.y(0,0),c=g.x(d[1],d[2]),f=g.y(d[1],d[2]),o.translate(c-u,f-l)):o.translate(d[1],d[2]):"r"==_?2==h?(p=p||n,o.rotate(d[1],p.x+p.width/2,p.y+p.height/2)):4==h&&(v?(c=g.x(d[2],d[3]),f=g.y(d[2],d[3]),o.rotate(d[1],c,f)):o.rotate(d[1],d[2],d[3])):"s"==_?2==h||3==h?(p=p||n,o.scale(d[1],d[h-1],p.x+p.width/2,p.y+p.height/2)):4==h?v?(c=g.x(d[2],d[3]),f=g.y(d[2],d[3]),o.scale(d[1],d[1],c,f)):o.scale(d[1],d[1],d[2],d[3]):5==h&&(v?(c=g.x(d[3],d[4]),f=g.y(d[3],d[4]),o.scale(d[1],d[2],c,f)):o.scale(d[1],d[2],d[3],d[4])):"m"==_&&7==h&&o.add(d[1],d[2],d[3],d[4],d[5],d[6])}return o},t._unit2px=function(e,t,n){var r=W(e).node,o={},i=r.querySelector(".svg---mgr");i||(i=M("rect"),M(i,{x:-9e9,y:-9e9,width:10,height:10,class:"svg---mgr",fill:"none"}),r.appendChild(i));function a(e){if(null==e)return h;if(e==+e)return e;M(i,{width:e});try{return i.getBBox().width}catch(e){return 0}}function s(e){if(null==e)return h;if(e==+e)return e;M(i,{height:e});try{return i.getBBox().height}catch(e){return 0}}function u(r,i){null==t?o[r]=i(e.attr(r)||0):r==t&&(o=i(null==n?e.attr(r)||0:n))}switch(e.type){case"rect":u("rx",a),u("ry",s);case"image":u("width",a),u("height",s);case"text":u("x",a),u("y",s);break;case"circle":u("cx",a),u("cy",s),u("r",a);break;case"ellipse":u("cx",a),u("cy",s),u("rx",a),u("ry",s);break;case"line":u("x1",a),u("x2",a),u("y1",s),u("y2",s);break;case"marker":u("refX",a),u("markerWidth",a),u("refY",s),u("markerHeight",s);break;case"radialGradient":u("fx",a),u("fy",s);break;case"tspan":u("dx",a),u("dy",s);break;default:u(t,a)}return r.removeChild(i),o};n.doc.contains||n.doc.compareDocumentPosition;function W(e){return e.node.ownerSVGElement&&q(e.node.ownerSVGElement)||t.select("svg")}function H(e){O(e,"array")||(e=Array.prototype.slice.call(arguments,0));for(var t=0,n=0,r=this.node;this[t];)delete this[t++];for(t=0;t<e.length;t++)"set"==e[t].type?e[t].forEach(function(e){r.appendChild(e.node)}):r.appendChild(e[t].node);var o=r.childNodes;for(t=0;t<o.length;t++)this[n++]=q(o[t]);return this}function U(e){if(e.snap in C)return C[e.snap];var t;try{t=e.ownerSVGElement}catch(e){}this.node=e,t&&(this.paper=new G(t)),this.type=e.tagName||e.nodeName;var n=this.id=T(this);if(this.anims={},this._={transform:[]},e.snap=n,C[n]=this,"g"==this.type&&(this.add=H),this.type in{g:1,mask:1,pattern:1,symbol:1})for(var r in G.prototype)G.prototype[i](r)&&(this[r]=G.prototype[r])}function z(e){this.node=e}function V(e,t){var n=M(e);return t.appendChild(n),q(n)}function G(e,t){var r,o,a,s=G.prototype;if(e&&e.tagName&&"svg"==e.tagName.toLowerCase()){if(e.snap in C)return C[e.snap];var u=e.ownerDocument;for(var l in r=new U(e),o=e.getElementsByTagName("desc")[0],a=e.getElementsByTagName("defs")[0],o||((o=M("desc")).appendChild(u.createTextNode("Created with Snap")),r.node.appendChild(o)),a||(a=M("defs"),r.node.appendChild(a)),r.defs=a,s)s[i](l)&&(r[l]=s[l]);r.paper=r.root=r}else M((r=V("svg",n.doc.body)).node,{height:t,version:1.1,width:e,xmlns:E});return r}function q(e){return e?e instanceof U||e instanceof z?e:e.tagName&&"svg"==e.tagName.toLowerCase()?new G(e):e.tagName&&"object"==e.tagName.toLowerCase()&&"image/svg+xml"==e.type?new G(e.contentDocument.getElementsByTagName("svg")[0]):new U(e):e}t._.getSomeDefs=function(e){var n=e.node.ownerSVGElement&&q(e.node.ownerSVGElement)||e.node.parentNode&&q(e.node.parentNode)||t.select("svg")||t(0,0),r=n.select("defs"),o=null!=r&&r.node;return o||(o=V("defs",n.node).node),o},t._.getSomeSVG=W,t.select=function(e){return e=a(e).replace(/([^\\]):/g,"$1\\:"),q(n.doc.querySelector(e))},t.selectAll=function(e){for(var r=n.doc.querySelectorAll(e),o=(t.set||Array)(),i=0;i<r.length;i++)o.push(q(r[i]));return o},setInterval(function(){for(var e in C)if(C[i](e)){var t=C[e],n=t.node;("svg"!=t.type&&!n.ownerSVGElement||"svg"==t.type&&(!n.parentNode||"ownerSVGElement"in n.parentNode&&!n.ownerSVGElement))&&delete C[e]}},1e4),U.prototype.attr=function(e,t){var n=this,r=n.node;if(!e){if(1!=r.nodeType)return{text:r.nodeValue};for(var o=r.attributes,a={},s=0,u=o.length;s<u;s++)a[o[s].nodeName]=o[s].nodeValue;return a}if(O(e,"string")){if(!(arguments.length>1))return eve("snap.util.getattr."+e,n).firstDefined();var l={};l[e]=t,e=l}for(var c in e)e[i](c)&&eve("snap.util.attr."+c,n,e[c]);return n},t.parse=function(e){var t=n.doc.createDocumentFragment(),r=!0,o=n.doc.createElement("div");if((e=a(e)).match(/^\s*<\s*svg(?:\s|>)/)||(e="<svg>"+e+"</svg>",r=!1),o.innerHTML=e,e=o.getElementsByTagName("svg")[0])if(r)t=e;else for(;e.firstChild;)t.appendChild(e.firstChild);return new z(t)},t.fragment=function(){for(var e=Array.prototype.slice.call(arguments,0),r=n.doc.createDocumentFragment(),o=0,i=e.length;o<i;o++){var a=e[o];a.node&&a.node.nodeType&&r.appendChild(a.node),a.nodeType&&r.appendChild(a),"string"==typeof a&&r.appendChild(t.parse(a).node)}return new z(r)},t._.make=V,t._.wrap=q,G.prototype.el=function(e,t){var n=V(e,this.node);return t&&n.attr(t),n},U.prototype.children=function(){for(var e=[],n=this.node.childNodes,r=0,o=n.length;r<o;r++)e[r]=t(n[r]);return e},U.prototype.toJSON=function(){var e=[];return function e(t,n){for(var r=0,o=t.length;r<o;r++){var i={type:t[r].type,attr:t[r].attr()},a=t[r].children();n.push(i),a.length&&e(a,i.childNodes=[])}}([this],e),e[0]},eve.on("snap.util.getattr",function(){var e=eve.nt(),t=(e=e.substring(e.lastIndexOf(".")+1)).replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});return J[i](t)?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(t):M(this.node,e)});var J={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0,"clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0,"lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};eve.on("snap.util.attr",function(e){var t=eve.nt(),n={};n[t=t.substring(t.lastIndexOf(".")+1)]=e;var r=t.replace(/-(\w)/gi,function(e,t){return t.toUpperCase()}),o=t.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});J[i](o)?this.node.style[r]=null==e?h:e:M(this.node,n)}),G.prototype,t.ajax=function(e,t,n,r){var o=new XMLHttpRequest,i=T();if(o){if(O(t,"function"))r=n,n=t,t=null;else if(O(t,"object")){var a=[];for(var s in t)t.hasOwnProperty(s)&&a.push(encodeURIComponent(s)+"="+encodeURIComponent(t[s]));t=a.join("&")}return o.open(t?"POST":"GET",e,!0),t&&(o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.setRequestHeader("Content-type","application/x-www-form-urlencoded")),n&&(eve.once("snap.ajax."+i+".0",n),eve.once("snap.ajax."+i+".200",n),eve.once("snap.ajax."+i+".304",n)),o.onreadystatechange=function(){4==o.readyState&&eve("snap.ajax."+i+"."+o.status,r,o)},4==o.readyState?o:(o.send(t),o)}},t.load=function(e,n,r){t.ajax(e,function(e){var o=t.parse(e.responseText);r?n.call(r,o):n(o)})};return t.getElementByPoint=function(e,t){this.canvas;var r,o,i,a,s,u,l,c=n.doc.elementFromPoint(e,t);if(n.win.opera&&"svg"==c.tagName){var f=(o=(r=c).getBoundingClientRect(),i=r.ownerDocument,a=i.body,s=i.documentElement,u=s.clientTop||a.clientTop||0,l=s.clientLeft||a.clientLeft||0,{y:o.top+(g.win.pageYOffset||s.scrollTop||a.scrollTop)-u,x:o.left+(g.win.pageXOffset||s.scrollLeft||a.scrollLeft)-l}),p=c.createSVGRect();p.x=e-f.x,p.y=t-f.y,p.width=p.height=1;var d=c.getIntersectionList(p,null);d.length&&(c=d[d.length-1])}return c?q(c):null},t.plugin=function(e){e(t,U,G,n,z)},n.win.Snap=t,t}(window||this);o.plugin(function(e,t,n,r,o){var i=t.prototype,a=e.is,s=String,u=e._unit2px,l=e._.$,c=e._.make,f=e._.getSomeDefs,p="hasOwnProperty",d=e._.wrap;i.getBBox=function(t){if("tspan"==this.type)return e._.box(this.node.getClientRects().item(0));if(!e.Matrix||!e.path)return this.node.getBBox();var n=this,r=new e.Matrix;if(n.removed)return e._.box();for(;"use"==n.type;)if(t||(r=r.add(n.transform().localMatrix.translate(n.attr("x")||0,n.attr("y")||0))),n.original)n=n.original;else{var o=n.attr("xlink:href");n=n.original=n.node.ownerDocument.getElementById(o.substring(o.indexOf("#")+1))}var i=n._,a=e.path.get[n.type]||e.path.get.deflt;try{return t?(i.bboxwt=a?e.path.getBBox(n.realPath=a(n)):e._.box(n.node.getBBox()),e._.box(i.bboxwt)):(n.realPath=a(n),n.matrix=n.transform().localMatrix,i.bbox=e.path.getBBox(e.path.map(n.realPath,r.add(n.matrix))),e._.box(i.bbox))}catch(t){return e._.box()}};var h=function(){return this.string};function _(t,n){if(null==n){var r=!0;if(!(n="linearGradient"==t.type||"radialGradient"==t.type?t.node.getAttribute("gradientTransform"):"pattern"==t.type?t.node.getAttribute("patternTransform"):t.node.getAttribute("transform")))return new e.Matrix;n=e._.svgTransform2string(n)}else n=e._.rgTransform.test(n)?s(n).replace(/\.{3}|\u2026/g,t._.transform||""):e._.svgTransform2string(n),a(n,"array")&&(n=e.path?e.path.toString.call(n):s(n)),t._.transform=n;var o=e._.transform2matrix(n,t.getBBox(1));if(r)return o;t.matrix=o}i.transform=function(t){var n=this._;if(null==t){for(var r,o=this,i=new e.Matrix(this.node.getCTM()),a=_(this),u=[a],c=new e.Matrix,f=a.toTransformString(),p=s(a)==s(this.matrix)?s(n.transform):f;"svg"!=o.type&&(o=o.parent());)u.push(_(o));for(r=u.length;r--;)c.add(u[r]);return{string:p,globalMatrix:i,totalMatrix:c,localMatrix:a,diffMatrix:i.clone().add(a.invert()),global:i.toTransformString(),total:c.toTransformString(),local:f,toString:h}}return t instanceof e.Matrix?(this.matrix=t,this._.transform=t.toTransformString()):_(this,t),this.node&&("linearGradient"==this.type||"radialGradient"==this.type?l(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?l(this.node,{patternTransform:this.matrix}):l(this.node,{transform:this.matrix})),this},i.parent=function(){return d(this.node.parentNode)},i.append=i.add=function(e){if(e){if("set"==e.type){var t=this;return e.forEach(function(e){t.add(e)}),this}e=d(e),this.node.appendChild(e.node),e.paper=this.paper}return this},i.appendTo=function(e){return e&&(e=d(e)).append(this),this},i.prepend=function(e){if(e){if("set"==e.type){var t,n=this;return e.forEach(function(e){t?t.after(e):n.prepend(e),t=e}),this}var r=(e=d(e)).parent();this.node.insertBefore(e.node,this.node.firstChild),this.add&&this.add(),e.paper=this.paper,this.parent()&&this.parent().add(),r&&r.add()}return this},i.prependTo=function(e){return(e=d(e)).prepend(this),this},i.before=function(e){if("set"==e.type){var t=this;return e.forEach(function(e){var n=e.parent();t.node.parentNode.insertBefore(e.node,t.node),n&&n.add()}),this.parent().add(),this}var n=(e=d(e)).parent();return this.node.parentNode.insertBefore(e.node,this.node),this.parent()&&this.parent().add(),n&&n.add(),e.paper=this.paper,this},i.after=function(e){var t=(e=d(e)).parent();return this.node.nextSibling?this.node.parentNode.insertBefore(e.node,this.node.nextSibling):this.node.parentNode.appendChild(e.node),this.parent()&&this.parent().add(),t&&t.add(),e.paper=this.paper,this},i.insertBefore=function(e){e=d(e);var t=this.parent();return e.node.parentNode.insertBefore(this.node,e.node),this.paper=e.paper,t&&t.add(),e.parent()&&e.parent().add(),this},i.insertAfter=function(e){e=d(e);var t=this.parent();return e.node.parentNode.insertBefore(this.node,e.node.nextSibling),this.paper=e.paper,t&&t.add(),e.parent()&&e.parent().add(),this},i.remove=function(){var e=this.parent();return this.node.parentNode&&this.node.parentNode.removeChild(this.node),delete this.paper,this.removed=!0,e&&e.add(),this},i.select=function(e){return d(this.node.querySelector(e))},i.selectAll=function(t){for(var n=this.node.querySelectorAll(t),r=(e.set||Array)(),o=0;o<n.length;o++)r.push(d(n[o]));return r},i.asPX=function(e,t){return null==t&&(t=this.attr(e)),+u(this,e,t)},i.use=function(){var e,t=this.node.id;return t||(t=this.id,l(this.node,{id:t})),e="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?c(this.type,this.node.parentNode):c("use",this.node.parentNode),l(e.node,{"xlink:href":"#"+t}),e.original=this,e},i.clone=function(){var t=d(this.node.cloneNode(!0));return l(t.node,"id")&&l(t.node,{id:t.id}),function(t){var n,r=t.selectAll("*"),o=/^\s*url\(("|'|)(.*)\1\)\s*$/,i=[],a={};function s(t,n){var r=l(t.node,n);(r=(r=r&&r.match(o))&&r[2])&&"#"==r.charAt()&&(r=r.substring(1))&&(a[r]=(a[r]||[]).concat(function(r){var o={};o[n]=e.url(r),l(t.node,o)}))}function u(e){var t=l(e.node,"xlink:href");t&&"#"==t.charAt()&&(t=t.substring(1))&&(a[t]=(a[t]||[]).concat(function(t){e.attr("xlink:href","#"+t)}))}for(var c=0,f=r.length;c<f;c++){s(n=r[c],"fill"),s(n,"stroke"),s(n,"filter"),s(n,"mask"),s(n,"clip-path"),u(n);var p=l(n.node,"id");p&&(l(n.node,{id:n.id}),i.push({old:p,id:n.id}))}for(c=0,f=i.length;c<f;c++){var d=a[i[c].old];if(d)for(var h=0,_=d.length;h<_;h++)d[h](i[c].id)}}(t),t.insertAfter(this),t},i.toDefs=function(){return f(this).appendChild(this.node),this},i.pattern=i.toPattern=function(e,t,n,r){var o=c("pattern",f(this));return null==e&&(e=this.getBBox()),a(e,"object")&&"x"in e&&(t=e.y,n=e.width,r=e.height,e=e.x),l(o.node,{x:e,y:t,width:n,height:r,patternUnits:"userSpaceOnUse",id:o.id,viewBox:[e,t,n,r].join(" ")}),o.node.appendChild(this.node),o},i.marker=function(e,t,n,r,o,i){var s=c("marker",f(this));return null==e&&(e=this.getBBox()),a(e,"object")&&"x"in e&&(t=e.y,n=e.width,r=e.height,o=e.refX||e.cx,i=e.refY||e.cy,e=e.x),l(s.node,{viewBox:[e,t,n,r].join(" "),markerWidth:n,markerHeight:r,orient:"auto",refX:o||0,refY:i||0,id:s.id}),s.node.appendChild(this.node),s};var v={};function g(e){return function(){var t=e?"<"+this.type:"",n=this.node.attributes,r=this.node.childNodes;if(e)for(var o=0,i=n.length;o<i;o++)t+=" "+n[o].name+'="'+n[o].value.replace(/"/g,'\\"')+'"';if(r.length){for(e&&(t+=">"),o=0,i=r.length;o<i;o++)3==r[o].nodeType?t+=r[o].nodeValue:1==r[o].nodeType&&(t+=d(r[o]).toString());e&&(t+="</"+this.type+">")}else e&&(t+="/>");return t}}i.data=function(t,n){var r=v[this.id]=v[this.id]||{};if(0==arguments.length)return eve("snap.data.get."+this.id,this,r,null),r;if(1==arguments.length){if(e.is(t,"object")){for(var o in t)t[p](o)&&this.data(o,t[o]);return this}return eve("snap.data.get."+this.id,this,r[t],t),r[t]}return r[t]=n,eve("snap.data.set."+this.id,this,n,t),this},i.removeData=function(e){return null==e?v[this.id]={}:v[this.id]&&delete v[this.id][e],this},i.outerSVG=i.toString=g(1),i.innerSVG=g(),i.toDataURL=function(){if(window&&window.btoa){var t=this.getBBox(),n=e.format('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="{width}" height="{height}" viewBox="{x} {y} {width} {height}">{contents}</svg>',{x:+t.x.toFixed(3),y:+t.y.toFixed(3),width:+t.width.toFixed(3),height:+t.height.toFixed(3),contents:this.outerSVG()});return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(n)))}},o.prototype.select=i.select,o.prototype.selectAll=i.selectAll}),o.plugin(function(e,t,n,r,o){var i=Object.prototype.toString,a=String,s=Math;function u(e,t,n,r,o,a){if(null==t&&"[object SVGMatrix]"==i.call(e))return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.e=e.e,void(this.f=e.f);null!=e?(this.a=+e,this.b=+t,this.c=+n,this.d=+r,this.e=+o,this.f=+a):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}!function(t){function n(e){return e[0]*e[0]+e[1]*e[1]}function r(e){var t=s.sqrt(n(e));e[0]&&(e[0]/=t),e[1]&&(e[1]/=t)}t.add=function(e,t,n,r,o,i){if(e&&e instanceof u)return this.add(e.a,e.b,e.c,e.d,e.e,e.f);var a=e*this.a+t*this.c,s=e*this.b+t*this.d;return this.e+=o*this.a+i*this.c,this.f+=o*this.b+i*this.d,this.c=n*this.a+r*this.c,this.d=n*this.b+r*this.d,this.a=a,this.b=s,this},u.prototype.multLeft=function(e,t,n,r,o,i){if(e&&e instanceof u)return this.multLeft(e.a,e.b,e.c,e.d,e.e,e.f);var a=e*this.a+n*this.b,s=e*this.c+n*this.d,l=e*this.e+n*this.f+o;return this.b=t*this.a+r*this.b,this.d=t*this.c+r*this.d,this.f=t*this.e+r*this.f+i,this.a=a,this.c=s,this.e=l,this},t.invert=function(){var e=this,t=e.a*e.d-e.b*e.c;return new u(e.d/t,-e.b/t,-e.c/t,e.a/t,(e.c*e.f-e.d*e.e)/t,(e.b*e.e-e.a*e.f)/t)},t.clone=function(){return new u(this.a,this.b,this.c,this.d,this.e,this.f)},t.translate=function(e,t){return this.e+=e*this.a+t*this.c,this.f+=e*this.b+t*this.d,this},t.scale=function(e,t,n,r){return null==t&&(t=e),(n||r)&&this.translate(n,r),this.a*=e,this.b*=e,this.c*=t,this.d*=t,(n||r)&&this.translate(-n,-r),this},t.rotate=function(t,n,r){t=e.rad(t),n=n||0,r=r||0;var o=+s.cos(t).toFixed(9),i=+s.sin(t).toFixed(9);return this.add(o,i,-i,o,n,r),this.add(1,0,0,1,-n,-r)},t.skewX=function(e){return this.skew(e,0)},t.skewY=function(e){return this.skew(0,e)},t.skew=function(t,n){t=t||0,n=n||0,t=e.rad(t),n=e.rad(n);var r=s.tan(t).toFixed(9),o=s.tan(n).toFixed(9);return this.add(1,o,r,1,0,0)},t.x=function(e,t){return e*this.a+t*this.c+this.e},t.y=function(e,t){return e*this.b+t*this.d+this.f},t.get=function(e){return+this[a.fromCharCode(97+e)].toFixed(4)},t.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"},t.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},t.determinant=function(){return this.a*this.d-this.b*this.c},t.split=function(){var t={};t.dx=this.e,t.dy=this.f;var o=[[this.a,this.b],[this.c,this.d]];t.scalex=s.sqrt(n(o[0])),r(o[0]),t.shear=o[0][0]*o[1][0]+o[0][1]*o[1][1],o[1]=[o[1][0]-o[0][0]*t.shear,o[1][1]-o[0][1]*t.shear],t.scaley=s.sqrt(n(o[1])),r(o[1]),t.shear/=t.scaley,this.determinant()<0&&(t.scalex=-t.scalex);var i=o[0][1],a=o[1][1];return a<0?(t.rotate=e.deg(s.acos(a)),i<0&&(t.rotate=360-t.rotate)):t.rotate=e.deg(s.asin(i)),t.isSimple=!(+t.shear.toFixed(9)||t.scalex.toFixed(9)!=t.scaley.toFixed(9)&&t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate,t},t.toTransformString=function(e){var t=e||this.split();return+t.shear.toFixed(9)?"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]:(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx||t.dy?"t"+[+t.dx.toFixed(4),+t.dy.toFixed(4)]:"")+(t.rotate?"r"+[+t.rotate.toFixed(4),0,0]:"")+(1!=t.scalex||1!=t.scaley?"s"+[t.scalex,t.scaley,0,0]:""))}}(u.prototype),e.Matrix=u,e.matrix=function(e,t,n,r,o,i){return new u(e,t,n,r,o,i)}}),o.plugin(function(e,t,n,r,o){var i,a=e._.make,s=e._.wrap,u=e.is,l=e._.getSomeDefs,c=/^url\((['"]?)([^)]+)\1\)$/,f=e._.$,p=e.url,d=String,h=e._.separator,_="";function v(n){return function(r){if(eve.stop(),r instanceof o&&1==r.node.childNodes.length&&("radialGradient"==r.node.firstChild.tagName||"linearGradient"==r.node.firstChild.tagName||"pattern"==r.node.firstChild.tagName)&&(r=r.node.firstChild,l(this).appendChild(r),r=s(r)),r instanceof t)if("radialGradient"==r.type||"linearGradient"==r.type||"pattern"==r.type){r.node.id||f(r.node,{id:r.id});var i=p(r.node.id)}else i=r.attr(n);else if((i=e.color(r)).error){var a=e(l(this).ownerSVGElement).gradient(r);a?(a.node.id||f(a.node,{id:a.id}),i=p(a.node.id)):i=r}else i=d(i);var u={};u[n]=i,f(this.node,u),this.node.style[n]=_}}e.deurl=function(e){var t=String(e).match(c);return t?t[2]:e},eve.on("snap.util.attr.mask",function(e){if(e instanceof t||e instanceof o){if(eve.stop(),e instanceof o&&1==e.node.childNodes.length&&(e=e.node.firstChild,l(this).appendChild(e),e=s(e)),"mask"==e.type)var n=e;else(n=a("mask",l(this))).node.appendChild(e.node);!n.node.id&&f(n.node,{id:n.id}),f(this.node,{mask:p(n.id)})}}),i=function(e){if(e instanceof t||e instanceof o){eve.stop();for(var n,r=e.node;r;){if("clipPath"===r.nodeName){n=new t(r);break}if("svg"===r.nodeName){n=void 0;break}r=r.parentNode}n||((n=a("clipPath",l(this))).node.appendChild(e.node),!n.node.id&&f(n.node,{id:n.id})),f(this.node,{"clip-path":p(n.node.id||n.id)})}},eve.on("snap.util.attr.clip",i),eve.on("snap.util.attr.clip-path",i),eve.on("snap.util.attr.clipPath",i),eve.on("snap.util.attr.fill",v("fill")),eve.on("snap.util.attr.stroke",v("stroke"));var g=/^([lr])(?:\(([^)]*)\))?(.*)$/i;function y(e){eve.stop(),e==+e&&(e+="px"),this.node.style.fontSize=e}function m(){return eve.stop(),this.node.style.fontSize}eve.on("snap.util.grad.parse",function(e){var t=(e=d(e)).match(g);if(!t)return null;var n=t[1],r=t[2],o=t[3];1==(r=r.split(/\s*,\s*/).map(function(e){return+e==e?+e:e})).length&&0==r[0]&&(r=[]);var i=(o=(o=o.split("-")).map(function(e){var t={color:(e=e.split(":"))[0]};return e[1]&&(t.offset=parseFloat(e[1])),t})).length,a=0,s=0;function u(e,t){for(var n=(t-a)/(e-s),r=s;r<e;r++)o[r].offset=+(+a+n*(r-s)).toFixed(2);s=e,a=t}i--;for(var l=0;l<i;l++)"offset"in o[l]&&u(l,o[l].offset);return o[i].offset=o[i].offset||100,u(i,o[i].offset),{type:n,params:r,stops:o}}),eve.on("snap.util.attr.d",function(t){eve.stop(),u(t,"array")&&u(t[0],"array")&&(t=e.path.toString.call(t)),(t=d(t)).match(/[ruo]/i)&&(t=e.path.toAbsolute(t)),f(this.node,{d:t})})(-1),eve.on("snap.util.attr.#text",function(e){eve.stop(),e=d(e);for(var t=r.doc.createTextNode(e);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(t)})(-1),eve.on("snap.util.attr.path",function(e){eve.stop(),this.attr({d:e})})(-1),eve.on("snap.util.attr.class",function(e){eve.stop(),this.node.className.baseVal=e})(-1),eve.on("snap.util.attr.viewBox",function(e){var t;t=u(e,"object")&&"x"in e?[e.x,e.y,e.width,e.height].join(" "):u(e,"array")?e.join(" "):e,f(this.node,{viewBox:t}),eve.stop()})(-1),eve.on("snap.util.attr.transform",function(e){this.transform(e),eve.stop()})(-1),eve.on("snap.util.attr.r",function(e){"rect"==this.type&&(eve.stop(),f(this.node,{rx:e,ry:e}))})(-1),eve.on("snap.util.attr.textpath",function(e){if(eve.stop(),"text"==this.type){var n,r,o;if(!e&&this.textPath){for(r=this.textPath;r.node.firstChild;)this.node.appendChild(r.node.firstChild);return r.remove(),void delete this.textPath}if(u(e,"string")){var i=l(this),a=s(i.parentNode).path(e);i.appendChild(a.node),n=a.id,a.attr({id:n})}else(e=s(e))instanceof t&&((n=e.attr("id"))||(n=e.id,e.attr({id:n})));if(n)if(r=this.textPath,o=this.node,r)r.attr({"xlink:href":"#"+n});else{for(r=f("textPath",{"xlink:href":"#"+n});o.firstChild;)r.appendChild(o.firstChild);o.appendChild(r),this.textPath=s(r)}}})(-1),eve.on("snap.util.attr.text",function(e){if("text"==this.type){for(var t=this.node,n=function(e){var t=f("tspan");if(u(e,"array"))for(var o=0;o<e.length;o++)t.appendChild(n(e[o]));else t.appendChild(r.doc.createTextNode(e));return t.normalize&&t.normalize(),t};t.firstChild;)t.removeChild(t.firstChild);for(var o=n(e);o.firstChild;)t.appendChild(o.firstChild)}eve.stop()})(-1),eve.on("snap.util.attr.fontSize",y)(-1),eve.on("snap.util.attr.font-size",y)(-1),eve.on("snap.util.getattr.transform",function(){return eve.stop(),this.transform()})(-1),eve.on("snap.util.getattr.textpath",function(){return eve.stop(),this.textPath})(-1),function(){function t(t){return function(){eve.stop();var n=r.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+t);return"none"==n?n:e(r.doc.getElementById(n.match(c)[1]))}}function n(e){return function(t){eve.stop();var n="marker"+e.charAt(0).toUpperCase()+e.substring(1);if(""!=t&&t){if("marker"==t.type){var r=t.node.id;return r||f(t.node,{id:t.id}),void(this.node.style[n]=p(r))}}else this.node.style[n]="none"}}eve.on("snap.util.getattr.marker-end",t("end"))(-1),eve.on("snap.util.getattr.markerEnd",t("end"))(-1),eve.on("snap.util.getattr.marker-start",t("start"))(-1),eve.on("snap.util.getattr.markerStart",t("start"))(-1),eve.on("snap.util.getattr.marker-mid",t("mid"))(-1),eve.on("snap.util.getattr.markerMid",t("mid"))(-1),eve.on("snap.util.attr.marker-end",n("end"))(-1),eve.on("snap.util.attr.markerEnd",n("end"))(-1),eve.on("snap.util.attr.marker-start",n("start"))(-1),eve.on("snap.util.attr.markerStart",n("start"))(-1),eve.on("snap.util.attr.marker-mid",n("mid"))(-1),eve.on("snap.util.attr.markerMid",n("mid"))(-1)}(),eve.on("snap.util.getattr.r",function(){if("rect"==this.type&&f(this.node,"rx")==f(this.node,"ry"))return eve.stop(),f(this.node,"rx")})(-1),eve.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){eve.stop();var e=function e(t){for(var n=[],r=t.childNodes,o=0,i=r.length;o<i;o++){var a=r[o];3==a.nodeType&&n.push(a.nodeValue),"tspan"==a.tagName&&(1==a.childNodes.length&&3==a.firstChild.nodeType?n.push(a.firstChild.nodeValue):n.push(e(a)))}return n}(this.node);return 1==e.length?e[0]:e}})(-1),eve.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1),eve.on("snap.util.getattr.fill",function(t){if(!t){eve.stop();var n=eve("snap.util.getattr.fill",this,!0).firstDefined();return e(e.deurl(n))||n}})(-1),eve.on("snap.util.getattr.stroke",function(t){if(!t){eve.stop();var n=eve("snap.util.getattr.stroke",this,!0).firstDefined();return e(e.deurl(n))||n}})(-1),eve.on("snap.util.getattr.viewBox",function(){eve.stop();var t=f(this.node,"viewBox");return t?(t=t.split(h),e._.box(+t[0],+t[1],+t[2],+t[3])):void 0})(-1),eve.on("snap.util.getattr.points",function(){var e=f(this.node,"points");return eve.stop(),e?e.split(h):void 0})(-1),eve.on("snap.util.getattr.path",function(){var e=f(this.node,"d");return eve.stop(),e})(-1),eve.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1),eve.on("snap.util.getattr.fontSize",m)(-1),eve.on("snap.util.getattr.font-size",m)(-1)}),o.plugin(function(e,t,n,r,o){var i=/\S+/g,a=String,s=t.prototype;s.addClass=function(e){var t,n,r,o=a(e||"").match(i)||[],s=this.node,u=s.className.baseVal,l=u.match(i)||[];if(o.length){for(t=0;n=o[t++];)~l.indexOf(n)||l.push(n);u!=(r=l.join(" "))&&(s.className.baseVal=r)}return this},s.removeClass=function(e){var t,n,r,o,s=a(e||"").match(i)||[],u=this.node,l=u.className.baseVal,c=l.match(i)||[];if(c.length){for(t=0;r=s[t++];)~(n=c.indexOf(r))&&c.splice(n,1);l!=(o=c.join(" "))&&(u.className.baseVal=o)}return this},s.hasClass=function(e){return!!~(this.node.className.baseVal.match(i)||[]).indexOf(e)},s.toggleClass=function(e,t){if(null!=t)return t?this.addClass(e):this.removeClass(e);var n,r,o,a,s=(e||"").match(i)||[],u=this.node,l=u.className.baseVal,c=l.match(i)||[];for(n=0;o=s[n++];)~(r=c.indexOf(o))?c.splice(r,1):c.push(o);return l!=(a=c.join(" "))&&(u.className.baseVal=a),this}}),o.plugin(function(e,t,n,r,o){var i={"+":function(e,t){return e+t},"-":function(e,t){return e-t},"/":function(e,t){return e/t},"*":function(e,t){return e*t}},a=String,s=/[a-z]+$/i,u=/^\s*([+\-\/*])\s*=\s*([\d.eE+\-]+)\s*([^\d\s]+)?\s*$/;function l(e){return e}function c(e){return function(t){return+t.toFixed(3)+e}}eve.on("snap.util.attr",function(e){var t=a(e).match(u);if(t){var n=eve.nt(),r=n.substring(n.lastIndexOf(".")+1),o=this.attr(r),l={};eve.stop();var c=t[3]||"",f=o.match(s),p=i[t[1]];if(f&&f==c?e=p(parseFloat(o),+t[2]):(o=this.asPX(r),e=p(this.asPX(r),this.asPX(r,t[2]+c))),isNaN(o)||isNaN(e))return;l[r]=e,this.attr(l)}})(-10),eve.on("snap.util.equal",function(e,t){var n=a(this.attr(e)||""),r=a(t).match(u);if(r){eve.stop();var o=r[3]||"",f=n.match(s),p=i[r[1]];return f&&f==o?{from:parseFloat(n),to:p(parseFloat(n),+r[2]),f:c(f)}:{from:n=this.asPX(e),to:p(n,this.asPX(e,r[2]+o)),f:l}}})(-10)}),o.plugin(function(e,t,n,r,o){var i=n.prototype,a=e.is;i.rect=function(e,t,n,r,o,i){var s;return null==i&&(i=o),a(e,"object")&&"[object Object]"==e?s=e:null!=e&&(s={x:e,y:t,width:n,height:r},null!=o&&(s.rx=o,s.ry=i)),this.el("rect",s)},i.circle=function(e,t,n){var r;return a(e,"object")&&"[object Object]"==e?r=e:null!=e&&(r={cx:e,cy:t,r:n}),this.el("circle",r)};var s=function(){function e(){this.parentNode.removeChild(this)}return function(t,n){var o=r.doc.createElement("img"),i=r.doc.body;o.style.cssText="position:absolute;left:-9999em;top:-9999em",o.onload=function(){n.call(o),o.onload=o.onerror=null,i.removeChild(o)},o.onerror=e,i.appendChild(o),o.src=t}}();i.image=function(t,n,r,o,i){var u=this.el("image");if(a(t,"object")&&"src"in t)u.attr(t);else if(null!=t){var l={"xlink:href":t,preserveAspectRatio:"none"};null!=n&&null!=r&&(l.x=n,l.y=r),null!=o&&null!=i?(l.width=o,l.height=i):s(t,function(){e._.$(u.node,{width:this.offsetWidth,height:this.offsetHeight})}),e._.$(u.node,l)}return u},i.ellipse=function(e,t,n,r){var o;return a(e,"object")&&"[object Object]"==e?o=e:null!=e&&(o={cx:e,cy:t,rx:n,ry:r}),this.el("ellipse",o)},i.path=function(e){var t;return a(e,"object")&&!a(e,"array")?t=e:e&&(t={d:e}),this.el("path",t)},i.group=i.g=function(e){var t=this.el("g");return 1==arguments.length&&e&&!e.type?t.attr(e):arguments.length&&t.add(Array.prototype.slice.call(arguments,0)),t},i.svg=function(e,t,n,r,o,i,s,u){var l={};return a(e,"object")&&null==t?l=e:(null!=e&&(l.x=e),null!=t&&(l.y=t),null!=n&&(l.width=n),null!=r&&(l.height=r),null!=o&&null!=i&&null!=s&&null!=u&&(l.viewBox=[o,i,s,u])),this.el("svg",l)},i.mask=function(e){var t=this.el("mask");return 1==arguments.length&&e&&!e.type?t.attr(e):arguments.length&&t.add(Array.prototype.slice.call(arguments,0)),t},i.ptrn=function(e,t,n,r,o,i,s,u){if(a(e,"object"))var l=e;else l={patternUnits:"userSpaceOnUse"},e&&(l.x=e),t&&(l.y=t),null!=n&&(l.width=n),null!=r&&(l.height=r),l.viewBox=null!=o&&null!=i&&null!=s&&null!=u?[o,i,s,u]:[e||0,t||0,n||0,r||0];return this.el("pattern",l)},i.use=function(n){return null!=n?(n instanceof t&&(n.attr("id")||n.attr({id:e._.id(n)}),n=n.attr("id")),"#"==String(n).charAt()&&(n=n.substring(1)),this.el("use",{"xlink:href":"#"+n})):t.prototype.use.call(this)},i.symbol=function(e,t,n,r){var o={};return null!=e&&null!=t&&null!=n&&null!=r&&(o.viewBox=[e,t,n,r]),this.el("symbol",o)},i.text=function(e,t,n){var r={};return a(e,"object")?r=e:null!=e&&(r={x:e,y:t,text:n||""}),this.el("text",r)},i.line=function(e,t,n,r){var o={};return a(e,"object")?o=e:null!=e&&(o={x1:e,x2:n,y1:t,y2:r}),this.el("line",o)},i.polyline=function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments,0));var t={};return a(e,"object")&&!a(e,"array")?t=e:null!=e&&(t={points:e}),this.el("polyline",t)},i.polygon=function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments,0));var t={};return a(e,"object")&&!a(e,"array")?t=e:null!=e&&(t={points:e}),this.el("polygon",t)},function(){var t=e._.$;function n(){return this.selectAll("stop")}function r(n,r){var o=t("stop"),i={offset:+r+"%"};n=e.color(n),i["stop-color"]=n.hex,n.opacity<1&&(i["stop-opacity"]=n.opacity),t(o,i);for(var a,s=this.stops(),u=0;u<s.length;u++){if(parseFloat(s[u].attr("offset"))>r){this.node.insertBefore(o,s[u].node),a=!0;break}}return a||this.node.appendChild(o),this}function o(){if("linearGradient"==this.type){var n=t(this.node,"x1")||0,r=t(this.node,"x2")||1,o=t(this.node,"y1")||0,i=t(this.node,"y2")||0;return e._.box(n,o,math.abs(r-n),math.abs(i-o))}var a=this.node.cx||.5,s=this.node.cy||.5,u=this.node.r||0;return e._.box(a-u,s-u,2*u,2*u)}function a(t){var n=t,r=this.stops();if("string"==typeof t&&(n=eve("snap.util.grad.parse",null,"l(0,0,0,1)"+t).firstDefined().stops),e.is(n,"array")){for(var o=0;o<r.length;o++)if(n[o]){var i=e.color(n[o].color),a={offset:n[o].offset+"%"};a["stop-color"]=i.hex,i.opacity<1&&(a["stop-opacity"]=i.opacity),r[o].attr(a)}else r[o].remove();for(o=r.length;o<n.length;o++)this.addStop(n[o].color,n[o].offset);return this}}function s(i,s,u,l,c){var f=e._.make("linearGradient",i);return f.stops=n,f.addStop=r,f.getBBox=o,f.setStops=a,null!=s&&t(f.node,{x1:s,y1:u,x2:l,y2:c}),f}function u(i,a,s,u,l,c){var f=e._.make("radialGradient",i);return f.stops=n,f.addStop=r,f.getBBox=o,null!=a&&t(f.node,{cx:a,cy:s,r:u}),null!=l&&null!=c&&t(f.node,{fx:l,fy:c}),f}i.gradient=function(e){return function(e,n){var r,o=eve("snap.util.grad.parse",null,n).firstDefined();if(!o)return null;o.params.unshift(e),r="l"==o.type.toLowerCase()?s.apply(0,o.params):u.apply(0,o.params),o.type!=o.type.toLowerCase()&&t(r.node,{gradientUnits:"userSpaceOnUse"});for(var i=o.stops,a=i.length,l=0;l<a;l++){var c=i[l];r.addStop(c.color,c.offset)}return r}(this.defs,e)},i.gradientLinear=function(e,t,n,r){return s(this.defs,e,t,n,r)},i.gradientRadial=function(e,t,n,r,o){return u(this.defs,e,t,n,r,o)},i.toString=function(){var t,n=this.node.ownerDocument,r=n.createDocumentFragment(),o=n.createElement("div"),i=this.node.cloneNode(!0);return r.appendChild(o),o.appendChild(i),e._.$(i,{xmlns:"http://www.w3.org/2000/svg"}),t=o.innerHTML,r.removeChild(r.firstChild),t},i.toDataURL=function(){if(window&&window.btoa)return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(this)))},i.clear=function(){for(var e,t=this.node.firstChild;t;)e=t.nextSibling,"defs"!=t.tagName?t.parentNode.removeChild(t):i.clear.call({node:t}),t=e}}()}),o.plugin(function(e,t,n,r){var o=t.prototype,i=e.is,a=e._.clone,s="hasOwnProperty",u=/,?([a-z]),?/gi,l=parseFloat,c=Math,f=c.PI,p=c.min,d=c.max,h=c.pow,_=c.abs;function v(e){var t=v.ps=v.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var n in t)t[s](n)&&n!=e&&(t[n].sleep--,!t[n].sleep&&delete t[n])}),t[e]}function g(e,t,n,r){return null==e&&(e=t=n=r=0),null==t&&(t=e.y,n=e.width,r=e.height,e=e.x),{x:e,y:t,width:n,w:n,height:r,h:r,x2:e+n,y2:t+r,cx:e+n/2,cy:t+r/2,r1:c.min(n,r)/2,r2:c.max(n,r)/2,r0:c.sqrt(n*n+r*r)/2,path:N(e,t,n,r),vb:[e,t,n,r].join(" ")}}function y(){return this.join(",").replace(u,"$1")}function m(e){var t=a(e);return t.toString=y,t}function b(e,t,n,r,o,i,a,s,u){return null==u?O(e,t,n,r,o,i,a,s):T(e,t,n,r,o,i,a,s,function(e,t,n,r,o,i,a,s,u){if(u<0||O(e,t,n,r,o,i,a,s)<u)return;var l,c=.5,f=1-c;l=O(e,t,n,r,o,i,a,s,f);for(;_(l-u)>.01;)l=O(e,t,n,r,o,i,a,s,f+=(l<u?1:-1)*(c/=2));return f}(e,t,n,r,o,i,a,s,u))}function k(n,r){function o(e){return+(+e).toFixed(3)}return e._.cacher(function(e,i,a){e instanceof t&&(e=e.attr("d"));for(var s,u,l,c,f,p="",d={},h=0,_=0,v=(e=z(e)).length;_<v;_++){if("M"==(l=e[_])[0])s=+l[1],u=+l[2];else{if(h+(c=b(s,u,l[1],l[2],l[3],l[4],l[5],l[6]))>i){if(r&&!d.start){if(p+=["C"+o((f=b(s,u,l[1],l[2],l[3],l[4],l[5],l[6],i-h)).start.x),o(f.start.y),o(f.m.x),o(f.m.y),o(f.x),o(f.y)],a)return p;d.start=p,p=["M"+o(f.x),o(f.y)+"C"+o(f.n.x),o(f.n.y),o(f.end.x),o(f.end.y),o(l[5]),o(l[6])].join(),h+=c,s=+l[5],u=+l[6];continue}if(!n&&!r)return f=b(s,u,l[1],l[2],l[3],l[4],l[5],l[6],i-h)}h+=c,s=+l[5],u=+l[6]}p+=l.shift()+l}return d.end=p,f=n?h:r?d:T(s,u,l[0],l[1],l[2],l[3],l[4],l[5],1)},null,e._.clone)}var w=k(1),x=k(),S=k(0,1);function T(e,t,n,r,o,i,a,s,u){var l=1-u,p=h(l,3),d=h(l,2),_=u*u,v=_*u,g=e+2*u*(n-e)+_*(o-2*n+e),y=t+2*u*(r-t)+_*(i-2*r+t),m=n+2*u*(o-n)+_*(a-2*o+n),b=r+2*u*(i-r)+_*(s-2*i+r);return{x:p*e+3*d*u*n+3*l*u*u*o+v*a,y:p*t+3*d*u*r+3*l*u*u*i+v*s,m:{x:g,y:y},n:{x:m,y:b},start:{x:l*e+u*n,y:l*t+u*r},end:{x:l*o+u*a,y:l*i+u*s},alpha:90-180*c.atan2(g-m,y-b)/f}}function P(t,n,r,o,i,a,s,u){e.is(t,"array")||(t=[t,n,r,o,i,a,s,u]);var l=U.apply(null,t);return g(l.min.x,l.min.y,l.max.x-l.min.x,l.max.y-l.min.y)}function E(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function C(e,t){return e=g(e),E(t=g(t),e.x,e.y)||E(t,e.x2,e.y)||E(t,e.x,e.y2)||E(t,e.x2,e.y2)||E(e,t.x,t.y)||E(e,t.x2,t.y)||E(e,t.x,t.y2)||E(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}function M(e,t,n,r,o){return e*(e*(-3*t+9*n-9*r+3*o)+6*t-12*n+6*r)-3*t+3*n}function O(e,t,n,r,o,i,a,s,u){null==u&&(u=1);for(var l=(u=u>1?1:u<0?0:u)/2,f=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],p=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,h=0;h<12;h++){var _=l*f[h]+l,v=M(_,e,n,o,a),g=M(_,t,r,i,s),y=v*v+g*g;d+=p[h]*c.sqrt(y)}return l*d}function j(e,t,n,r,o,i,a,s){if(!(d(e,n)<p(o,a)||p(e,n)>d(o,a)||d(t,r)<p(i,s)||p(t,r)>d(i,s))){var u=(e-n)*(i-s)-(t-r)*(o-a);if(u){var l=((e*r-t*n)*(o-a)-(e-n)*(o*s-i*a))/u,c=((e*r-t*n)*(i-s)-(t-r)*(o*s-i*a))/u,f=+l.toFixed(2),h=+c.toFixed(2);if(!(f<+p(e,n).toFixed(2)||f>+d(e,n).toFixed(2)||f<+p(o,a).toFixed(2)||f>+d(o,a).toFixed(2)||h<+p(t,r).toFixed(2)||h>+d(t,r).toFixed(2)||h<+p(i,s).toFixed(2)||h>+d(i,s).toFixed(2)))return{x:l,y:c}}}}function F(e,t,n){if(!C(P(e),P(t)))return n?0:[];for(var r=~~(O.apply(0,e)/8),o=~~(O.apply(0,t)/8),i=[],a=[],s={},u=n?0:[],l=0;l<r+1;l++){var c=T.apply(0,e.concat(l/r));i.push({x:c.x,y:c.y,t:l/r})}for(l=0;l<o+1;l++)c=T.apply(0,t.concat(l/o)),a.push({x:c.x,y:c.y,t:l/o});for(l=0;l<r;l++)for(var f=0;f<o;f++){var p=i[l],d=i[l+1],h=a[f],v=a[f+1],g=_(d.x-p.x)<.001?"y":"x",y=_(v.x-h.x)<.001?"y":"x",m=j(p.x,p.y,d.x,d.y,h.x,h.y,v.x,v.y);if(m){if(s[m.x.toFixed(4)]==m.y.toFixed(4))continue;s[m.x.toFixed(4)]=m.y.toFixed(4);var b=p.t+_((m[g]-p[g])/(d[g]-p[g]))*(d.t-p.t),k=h.t+_((m[y]-h[y])/(v[y]-h[y]))*(v.t-h.t);b>=0&&b<=1&&k>=0&&k<=1&&(n?u++:u.push({x:m.x,y:m.y,t1:b,t2:k}))}}return u}function I(e,t,n){e=z(e),t=z(t);for(var r,o,i,a,s,u,l,c,f,p,d=n?0:[],h=0,_=e.length;h<_;h++){var v=e[h];if("M"==v[0])r=s=v[1],o=u=v[2];else{"C"==v[0]?(f=[r,o].concat(v.slice(1)),r=f[6],o=f[7]):(f=[r,o,r,o,s,u,s,u],r=s,o=u);for(var g=0,y=t.length;g<y;g++){var m=t[g];if("M"==m[0])i=l=m[1],a=c=m[2];else{"C"==m[0]?(p=[i,a].concat(m.slice(1)),i=p[6],a=p[7]):(p=[i,a,i,a,l,c,l,c],i=l,a=c);var b=F(f,p,n);if(n)d+=b;else{for(var k=0,w=b.length;k<w;k++)b[k].segment1=h,b[k].segment2=g,b[k].bez1=f,b[k].bez2=p;d=d.concat(b)}}}}}return d}function A(e){var t=v(e);if(t.bbox)return a(t.bbox);if(!e)return g();for(var n,r=0,o=0,i=[],s=[],u=0,l=(e=z(e)).length;u<l;u++)if("M"==(n=e[u])[0])r=n[1],o=n[2],i.push(r),s.push(o);else{var c=U(r,o,n[1],n[2],n[3],n[4],n[5],n[6]);i=i.concat(c.min.x,c.max.x),s=s.concat(c.min.y,c.max.y),r=n[5],o=n[6]}var f=p.apply(0,i),h=p.apply(0,s),_=g(f,h,d.apply(0,i)-f,d.apply(0,s)-h);return t.bbox=a(_),_}function N(e,t,n,r,o){if(o)return[["M",+e+ +o,t],["l",n-2*o,0],["a",o,o,0,0,1,o,o],["l",0,r-2*o],["a",o,o,0,0,1,-o,o],["l",2*o-n,0],["a",o,o,0,0,1,-o,-o],["l",0,2*o-r],["a",o,o,0,0,1,o,-o],["z"]];var i=[["M",e,t],["l",n,0],["l",0,r],["l",-n,0],["z"]];return i.toString=y,i}function L(e,t,n,r,o){if(null==o&&null==r&&(r=n),e=+e,t=+t,n=+n,r=+r,null!=o)var i=Math.PI/180,a=e+n*Math.cos(-r*i),s=e+n*Math.cos(-o*i),u=[["M",a,t+n*Math.sin(-r*i)],["A",n,n,0,+(o-r>180),0,s,t+n*Math.sin(-o*i)]];else u=[["M",e,t],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]];return u.toString=y,u}var B=e._unit2px,R={path:function(e){return e.attr("path")},circle:function(e){var t=B(e);return L(t.cx,t.cy,t.r)},ellipse:function(e){var t=B(e);return L(t.cx||0,t.cy||0,t.rx,t.ry)},rect:function(e){var t=B(e);return N(t.x||0,t.y||0,t.width,t.height,t.rx,t.ry)},image:function(e){var t=B(e);return N(t.x||0,t.y||0,t.width,t.height)},line:function(e){return"M"+[e.attr("x1")||0,e.attr("y1")||0,e.attr("x2"),e.attr("y2")]},polyline:function(e){return"M"+e.attr("points")},polygon:function(e){return"M"+e.attr("points")+"z"},deflt:function(e){var t=e.node.getBBox();return N(t.x,t.y,t.width,t.height)}};function D(t){var n=v(t);if(n.abs)return m(n.abs);if(i(t,"array")&&i(t&&t[0],"array")||(t=e.parsePathString(t)),!t||!t.length)return[["M",0,0]];var r,o=[],a=0,s=0,u=0,l=0,c=0;"M"==t[0][0]&&(u=a=+t[0][1],l=s=+t[0][2],c++,o[0]=["M",a,s]);for(var f,p,d=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),h=c,_=t.length;h<_;h++){if(o.push(f=[]),(r=(p=t[h])[0])!=r.toUpperCase())switch(f[0]=r.toUpperCase(),f[0]){case"A":f[1]=p[1],f[2]=p[2],f[3]=p[3],f[4]=p[4],f[5]=p[5],f[6]=+p[6]+a,f[7]=+p[7]+s;break;case"V":f[1]=+p[1]+s;break;case"H":f[1]=+p[1]+a;break;case"R":for(var g=[a,s].concat(p.slice(1)),b=2,k=g.length;b<k;b++)g[b]=+g[b]+a,g[++b]=+g[b]+s;o.pop(),o=o.concat(V(g,d));break;case"O":o.pop(),(g=L(a,s,p[1],p[2])).push(g[0]),o=o.concat(g);break;case"U":o.pop(),o=o.concat(L(a,s,p[1],p[2],p[3])),f=["U"].concat(o[o.length-1].slice(-2));break;case"M":u=+p[1]+a,l=+p[2]+s;default:for(b=1,k=p.length;b<k;b++)f[b]=+p[b]+(b%2?a:s)}else if("R"==r)g=[a,s].concat(p.slice(1)),o.pop(),o=o.concat(V(g,d)),f=["R"].concat(p.slice(-2));else if("O"==r)o.pop(),(g=L(a,s,p[1],p[2])).push(g[0]),o=o.concat(g);else if("U"==r)o.pop(),o=o.concat(L(a,s,p[1],p[2],p[3])),f=["U"].concat(o[o.length-1].slice(-2));else for(var w=0,x=p.length;w<x;w++)f[w]=p[w];if("O"!=(r=r.toUpperCase()))switch(f[0]){case"Z":a=+u,s=+l;break;case"H":a=f[1];break;case"V":s=f[1];break;case"M":u=f[f.length-2],l=f[f.length-1];default:a=f[f.length-2],s=f[f.length-1]}}return o.toString=y,n.abs=m(o),o}function W(e,t,n,r){return[e,t,n,r,n,r]}function H(e,t,n,r,o,i){return[1/3*e+2/3*n,1/3*t+2/3*r,1/3*o+2/3*n,1/3*i+2/3*r,o,i]}function U(e,t,n,r,o,i,a,s){for(var u,l,f,h,v,g,y,m,b=[],k=[[],[]],w=0;w<2;++w)if(0==w?(l=6*e-12*n+6*o,u=-3*e+9*n-9*o+3*a,f=3*n-3*e):(l=6*t-12*r+6*i,u=-3*t+9*r-9*i+3*s,f=3*r-3*t),_(u)<1e-12){if(_(l)<1e-12)continue;0<(h=-f/l)&&h<1&&b.push(h)}else y=l*l-4*f*u,m=c.sqrt(y),y<0||(0<(v=(-l+m)/(2*u))&&v<1&&b.push(v),0<(g=(-l-m)/(2*u))&&g<1&&b.push(g));for(var x,S=b.length,T=S;S--;)x=1-(h=b[S]),k[0][S]=x*x*x*e+3*x*x*h*n+3*x*h*h*o+h*h*h*a,k[1][S]=x*x*x*t+3*x*x*h*r+3*x*h*h*i+h*h*h*s;return k[0][T]=e,k[1][T]=t,k[0][T+1]=a,k[1][T+1]=s,k[0].length=k[1].length=T+2,{min:{x:p.apply(0,k[0]),y:p.apply(0,k[1])},max:{x:d.apply(0,k[0]),y:d.apply(0,k[1])}}}function z(t,n){var r=!n&&v(t);if(!n&&r.curve)return m(r.curve);for(var o=D(t),i=n&&D(n),a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},u=function(t,n,r){var o,i;if(!t)return["C",n.x,n.y,n.x,n.y,n.x,n.y];switch(!(t[0]in{T:1,Q:1})&&(n.qx=n.qy=null),t[0]){case"M":n.X=t[1],n.Y=t[2];break;case"A":t=["C"].concat(function t(n,r,o,i,a,s,u,l,p,d){var h,v=120*f/180,g=f/180*(+a||0),y=[],m=e._.cacher(function(e,t,n){return{x:e*c.cos(n)-t*c.sin(n),y:e*c.sin(n)+t*c.cos(n)}});if(!o||!i)return[n,r,l,p,l,p];if(d)C=d[0],M=d[1],P=d[2],E=d[3];else{n=(h=m(n,r,-g)).x,r=h.y,l=(h=m(l,p,-g)).x,p=h.y,c.cos(f/180*a),c.sin(f/180*a);var b=(n-l)/2,k=(r-p)/2,w=b*b/(o*o)+k*k/(i*i);w>1&&(o*=w=c.sqrt(w),i*=w);var x=o*o,S=i*i,T=(s==u?-1:1)*c.sqrt(_((x*S-x*k*k-S*b*b)/(x*k*k+S*b*b))),P=T*o*k/i+(n+l)/2,E=T*-i*b/o+(r+p)/2,C=c.asin(((r-E)/i).toFixed(9)),M=c.asin(((p-E)/i).toFixed(9));(C=n<P?f-C:C)<0&&(C=2*f+C),(M=l<P?f-M:M)<0&&(M=2*f+M),u&&C>M&&(C-=2*f),!u&&M>C&&(M-=2*f)}var O=M-C;if(_(O)>v){var j=M,F=l,I=p;M=C+v*(u&&M>C?1:-1),y=t(l=P+o*c.cos(M),p=E+i*c.sin(M),o,i,a,0,u,F,I,[M,j,P,E])}O=M-C;var A=c.cos(C),N=c.sin(C),L=c.cos(M),B=c.sin(M),R=c.tan(O/4),D=4/3*o*R,W=4/3*i*R,H=[n,r],U=[n+D*N,r-W*A],z=[l+D*B,p-W*L],V=[l,p];if(U[0]=2*H[0]-U[0],U[1]=2*H[1]-U[1],d)return[U,z,V].concat(y);for(var G=[],q=0,J=(y=[U,z,V].concat(y).join().split(",")).length;q<J;q++)G[q]=q%2?m(y[q-1],y[q],g).y:m(y[q],y[q+1],g).x;return G}.apply(0,[n.x,n.y].concat(t.slice(1))));break;case"S":"C"==r||"S"==r?(o=2*n.x-n.bx,i=2*n.y-n.by):(o=n.x,i=n.y),t=["C",o,i].concat(t.slice(1));break;case"T":"Q"==r||"T"==r?(n.qx=2*n.x-n.qx,n.qy=2*n.y-n.qy):(n.qx=n.x,n.qy=n.y),t=["C"].concat(H(n.x,n.y,n.qx,n.qy,t[1],t[2]));break;case"Q":n.qx=t[1],n.qy=t[2],t=["C"].concat(H(n.x,n.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(W(n.x,n.y,t[1],t[2]));break;case"H":t=["C"].concat(W(n.x,n.y,t[1],n.y));break;case"V":t=["C"].concat(W(n.x,n.y,n.x,t[1]));break;case"Z":t=["C"].concat(W(n.x,n.y,n.X,n.Y))}return t},p=function(e,t){if(e[t].length>7){e[t].shift();for(var n=e[t];n.length;)g[t]="A",i&&(y[t]="A"),e.splice(t++,0,["C"].concat(n.splice(0,6)));e.splice(t,1),x=d(o.length,i&&i.length||0)}},h=function(e,t,n,r,a){e&&t&&"M"==e[a][0]&&"M"!=t[a][0]&&(t.splice(a,0,["M",r.x,r.y]),n.bx=0,n.by=0,n.x=e[a][1],n.y=e[a][2],x=d(o.length,i&&i.length||0))},g=[],y=[],b="",k="",w=0,x=d(o.length,i&&i.length||0);w<x;w++){o[w]&&(b=o[w][0]),"C"!=b&&(g[w]=b,w&&(k=g[w-1])),o[w]=u(o[w],a,k),"A"!=g[w]&&"C"==b&&(g[w]="C"),p(o,w),i&&(i[w]&&(b=i[w][0]),"C"!=b&&(y[w]=b,w&&(k=y[w-1])),i[w]=u(i[w],s,k),"A"!=y[w]&&"C"==b&&(y[w]="C"),p(i,w)),h(o,i,a,s,w),h(i,o,s,a,w);var S=o[w],T=i&&i[w],P=S.length,E=i&&T.length;a.x=S[P-2],a.y=S[P-1],a.bx=l(S[P-4])||a.x,a.by=l(S[P-3])||a.y,s.bx=i&&(l(T[E-4])||s.x),s.by=i&&(l(T[E-3])||s.y),s.x=i&&T[E-2],s.y=i&&T[E-1]}return i||(r.curve=m(o)),i?[o,i]:o}function V(e,t){for(var n=[],r=0,o=e.length;o-2*!t>r;r+=2){var i=[{x:+e[r-2],y:+e[r-1]},{x:+e[r],y:+e[r+1]},{x:+e[r+2],y:+e[r+3]},{x:+e[r+4],y:+e[r+5]}];t?r?o-4==r?i[3]={x:+e[0],y:+e[1]}:o-2==r&&(i[2]={x:+e[0],y:+e[1]},i[3]={x:+e[2],y:+e[3]}):i[0]={x:+e[o-2],y:+e[o-1]}:o-4==r?i[3]=i[2]:r||(i[0]={x:+e[r],y:+e[r+1]}),n.push(["C",(-i[0].x+6*i[1].x+i[2].x)/6,(-i[0].y+6*i[1].y+i[2].y)/6,(i[1].x+6*i[2].x-i[3].x)/6,(i[1].y+6*i[2].y-i[3].y)/6,i[2].x,i[2].y])}return n}e.path=v,e.path.getTotalLength=w,e.path.getPointAtLength=x,e.path.getSubpath=function(e,t,n){if(this.getTotalLength(e)-n<1e-6)return S(e,t).end;var r=S(e,n,1);return t?S(r,t).end:r},o.getTotalLength=function(){if(this.node.getTotalLength)return this.node.getTotalLength()},o.getPointAtLength=function(e){return x(this.attr("d"),e)},o.getSubpath=function(t,n){return e.path.getSubpath(this.attr("d"),t,n)},e._.box=g,e.path.findDotsAtSegment=T,e.path.bezierBBox=P,e.path.isPointInsideBBox=E,e.closest=function(t,n,r,o){for(var i=100,a=g(t-i/2,n-i/2,i,i),s=[],u=r[0].hasOwnProperty("x")?function(e){return{x:r[e].x,y:r[e].y}}:function(e){return{x:r[e],y:o[e]}},l=0;i<=1e6&&!l;){for(var c=0,f=r.length;c<f;c++){var p=u(c);if(E(a,p.x,p.y)){l++,s.push(p);break}}l||(a=g(t-(i*=2)/2,n-i/2,i,i))}if(1e6!=i){var d,h=1/0;for(c=0,f=s.length;c<f;c++){var _=e.len(t,n,s[c].x,s[c].y);h>_&&(h=_,s[c].len=_,d=s[c])}return d}},e.path.isBBoxIntersect=C,e.path.intersection=function(e,t){return I(e,t)},e.path.intersectionNumber=function(e,t){return I(e,t,1)},e.path.isPointInside=function(e,t,n){var r=A(e);return E(r,t,n)&&I(e,[["M",t,n],["H",r.x2+10]],1)%2==1},e.path.getBBox=A,e.path.get=R,e.path.toRelative=function(t){var n=v(t),r=String.prototype.toLowerCase;if(n.rel)return m(n.rel);e.is(t,"array")&&e.is(t&&t[0],"array")||(t=e.parsePathString(t));var o=[],i=0,a=0,s=0,u=0,l=0;"M"==t[0][0]&&(s=i=t[0][1],u=a=t[0][2],l++,o.push(["M",i,a]));for(var c=l,f=t.length;c<f;c++){var p=o[c]=[],d=t[c];if(d[0]!=r.call(d[0]))switch(p[0]=r.call(d[0]),p[0]){case"a":p[1]=d[1],p[2]=d[2],p[3]=d[3],p[4]=d[4],p[5]=d[5],p[6]=+(d[6]-i).toFixed(3),p[7]=+(d[7]-a).toFixed(3);break;case"v":p[1]=+(d[1]-a).toFixed(3);break;case"m":s=d[1],u=d[2];default:for(var h=1,_=d.length;h<_;h++)p[h]=+(d[h]-(h%2?i:a)).toFixed(3)}else{p=o[c]=[],"m"==d[0]&&(s=d[1]+i,u=d[2]+a);for(var g=0,b=d.length;g<b;g++)o[c][g]=d[g]}var k=o[c].length;switch(o[c][0]){case"z":i=s,a=u;break;case"h":i+=+o[c][k-1];break;case"v":a+=+o[c][k-1];break;default:i+=+o[c][k-2],a+=+o[c][k-1]}}return o.toString=y,n.rel=m(o),o},e.path.toAbsolute=D,e.path.toCubic=z,e.path.map=function(e,t){if(!t)return e;var n,r,o,i,a,s,u;for(o=0,a=(e=z(e)).length;o<a;o++)for(i=1,s=(u=e[o]).length;i<s;i+=2)n=t.x(u[i],u[i+1]),r=t.y(u[i],u[i+1]),u[i]=n,u[i+1]=r;return e},e.path.toString=y,e.path.clone=m}),o.plugin(function(e,t,n,o){var i=Math.max,a=Math.min,s=function(e){if(this.items=[],this.bindings={},this.length=0,this.type="set",e)for(var t=0,n=e.length;t<n;t++)e[t]&&(this[this.items.length]=this.items[this.items.length]=e[t],this.length++)},u=s.prototype;u.push=function(){for(var e,t,n=0,r=arguments.length;n<r;n++)(e=arguments[n])&&(this[t=this.items.length]=this.items[t]=e,this.length++);return this},u.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},u.forEach=function(e,t){for(var n=0,r=this.items.length;n<r;n++)if(!1===e.call(t,this.items[n],n))return this;return this},u.animate=function(t,n,o,i){"function"!=typeof o||o.length||(i=o,o=r.linear),t instanceof e._.Animation&&(i=t.callback,o=t.easing,n=o.dur,t=t.attr);var a=arguments;if(e.is(t,"array")&&e.is(a[a.length-1],"array"))var s=!0;var u,l=function(){u?this.b=u:u=this.b},c=0,f=this,p=i&&function(){++c==f.length&&i.call(this)};return this.forEach(function(e,r){eve.once("snap.animcreated."+e.id,l),s?a[r]&&e.animate.apply(e,a[r]):e.animate(t,n,o,p)})},u.remove=function(){for(;this.length;)this.pop().remove();return this},u.bind=function(e,t,n){var r={};if("function"==typeof t)this.bindings[e]=t;else{var o=n||e;this.bindings[e]=function(e){r[o]=e,t.attr(r)}}return this},u.attr=function(e){var t={};for(var n in e)this.bindings[n]?this.bindings[n](e[n]):t[n]=e[n];for(var r=0,o=this.items.length;r<o;r++)this.items[r].attr(t);return this},u.clear=function(){for(;this.length;)this.pop()},u.splice=function(e,t,n){e=e<0?i(this.length+e,0):e,t=i(0,a(this.length-e,t));var r,o=[],u=[],l=[];for(r=2;r<arguments.length;r++)l.push(arguments[r]);for(r=0;r<t;r++)u.push(this[e+r]);for(;r<this.length-e;r++)o.push(this[e+r]);var c=l.length;for(r=0;r<c+o.length;r++)this.items[e+r]=this[e+r]=r<c?l[r]:o[r-c];for(r=this.items.length=this.length-=t-c;this[r];)delete this[r++];return new s(u)},u.exclude=function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]==e)return this.splice(t,1),!0;return!1},u.insertAfter=function(e){for(var t=this.items.length;t--;)this.items[t].insertAfter(e);return this},u.getBBox=function(){for(var e=[],t=[],n=[],r=[],o=this.items.length;o--;)if(!this.items[o].removed){var s=this.items[o].getBBox();e.push(s.x),t.push(s.y),n.push(s.x+s.width),r.push(s.y+s.height)}return{x:e=a.apply(0,e),y:t=a.apply(0,t),x2:n=i.apply(0,n),y2:r=i.apply(0,r),width:n-e,height:r-t,cx:e+(n-e)/2,cy:t+(r-t)/2}},u.clone=function(e){e=new s;for(var t=0,n=this.items.length;t<n;t++)e.push(this.items[t].clone());return e},u.toString=function(){return"Snap‘s set"},u.type="set",e.Set=s,e.set=function(){var e=new s;return arguments.length&&e.push.apply(e,Array.prototype.slice.call(arguments,0)),e}}),o.plugin(function(e,t,n,r){var o={},i=/[%a-z]+$/i,a=String;function s(e){var t=e[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":return 4==e.length?[t,0,e[2],e[3]]:[t,0];case"s":return 5==e.length?[t,1,1,e[3],e[4]]:3==e.length?[t,1,1]:[t,1]}}function u(e){return e}function l(e){return e.join(" ")}function c(t){return e.rgb(t[0],t[1],t[2],t[3])}function f(e){var t,n,r,o,i,a,s=0,u=[];for(t=0,n=e.length;t<n;t++){for(i="[",a=['"'+e[t][0]+'"'],r=1,o=e[t].length;r<o;r++)a[r]="val["+s+++"]";i+=a+"]",u[t]=i}return Function("val","return Snap.path.toString.call(["+u+"])")}function p(e){for(var t=[],n=0,r=e.length;n<r;n++)for(var o=1,i=e[n].length;o<i;o++)t.push(e[n][o]);return t}function d(e){return isFinite(e)}o.stroke=o.fill="colour",t.prototype.equal=function(e,t){return eve("snap.util.equal",this,e,t).firstDefined()},eve.on("snap.util.equal",function(t,n){var r,h,_=a(this.attr(t)||""),v=this;if("colour"==o[t])return r=e.color(_),h=e.color(n),{from:[r.r,r.g,r.b,r.opacity],to:[h.r,h.g,h.b,h.opacity],f:c};if("viewBox"==t)return{from:r=this.attr(t).vb.split(" ").map(Number),to:h=n.split(" ").map(Number),f:l};if("transform"==t||"gradientTransform"==t||"patternTransform"==t)return"string"==typeof n&&(n=a(n).replace(/\.{3}|\u2026/g,_)),function(t,n,r){t=t||new e.Matrix,n=n||new e.Matrix,t=e.parseTransformString(t.toTransformString())||[],n=e.parseTransformString(n.toTransformString())||[];for(var o,i,a,u,l=Math.max(t.length,n.length),c=[],d=[],h=0;h<l;h++){if(a=t[h]||s(n[h]),u=n[h]||s(a),a[0]!=u[0]||"r"==a[0].toLowerCase()&&(a[2]!=u[2]||a[3]!=u[3])||"s"==a[0].toLowerCase()&&(a[3]!=u[3]||a[4]!=u[4])){t=e._.transform2matrix(t,r()),n=e._.transform2matrix(n,r()),c=[["m",t.a,t.b,t.c,t.d,t.e,t.f]],d=[["m",n.a,n.b,n.c,n.d,n.e,n.f]];break}for(c[h]=[],d[h]=[],o=0,i=Math.max(a.length,u.length);o<i;o++)o in a&&(c[h][o]=a[o]),o in u&&(d[h][o]=u[o])}return{from:p(c),to:p(d),f:f(c)}}(_=this.matrix,n=e._.rgTransform.test(n)?e._.transform2matrix(n,this.getBBox()):e._.transform2matrix(e._.svgTransform2string(n),this.getBBox()),function(){return v.getBBox(1)});if("d"==t||"path"==t)return{from:p((r=e.path.toCubic(_,n))[0]),to:p(r[1]),f:f(r[0])};if("points"==t)return{from:r=a(_).split(e._.separator),to:h=a(n).split(e._.separator),f:function(e){return e}};if(d(_)&&d(n))return{from:parseFloat(_),to:parseFloat(n),f:u};var g,y,m,b=_.match(i),k=a(n).match(i);return b&&(y=b,m=k,e.is(y,"array")&&e.is(m,"array")&&y.toString()==m.toString())?{from:parseFloat(_),to:parseFloat(n),f:(g=b,function(e){return+e.toFixed(3)+g})}:{from:this.asPX(t),to:this.asPX(t,n),f:u}})}),o.plugin(function(e,t,n,r){for(var o=t.prototype,i=("createTouch"in r.doc),a=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],s={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},u=function(e,t){var n="y"==e?"scrollTop":"scrollLeft",o=t&&t.node?t.node.ownerDocument:r.doc;return o[n in o.documentElement?"documentElement":"body"][n]},l=function(){return this.originalEvent.preventDefault()},c=function(){return this.originalEvent.stopPropagation()},f=function(e,t,n,r){var o=i&&s[t]?s[t]:t,a=function(o){var a=u("y",r),f=u("x",r);if(i&&s.hasOwnProperty(t))for(var p=0,d=o.targetTouches&&o.targetTouches.length;p<d;p++)if(o.targetTouches[p].target==e||e.contains(o.targetTouches[p].target)){var h=o;(o=o.targetTouches[p]).originalEvent=h,o.preventDefault=l,o.stopPropagation=c;break}var _=o.clientX+f,v=o.clientY+a;return n.call(r,o,_,v)};return t!==o&&e.addEventListener(t,a,!1),e.addEventListener(o,a,!1),function(){return t!==o&&e.removeEventListener(t,a,!1),e.removeEventListener(o,a,!1),!0}},p=[],d=function(e){for(var t,n=e.clientX,r=e.clientY,o=u("y"),a=u("x"),s=p.length;s--;){if(t=p[s],i){for(var l,c=e.touches&&e.touches.length;c--;)if((l=e.touches[c]).identifier==t.el._drag.id||t.el.node.contains(l.target)){n=l.clientX,r=l.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}else e.preventDefault();var f=t.el.node;f.nextSibling,f.parentNode,f.style.display;n+=a,r+=o,eve("snap.drag.move."+t.el.id,t.move_scope||t.el,n-t.el._drag.x,r-t.el._drag.y,n,r,e)}},h=function(t){e.unmousemove(d).unmouseup(h);for(var n,r=p.length;r--;)(n=p[r]).el._drag={},eve("snap.drag.end."+n.el.id,n.end_scope||n.start_scope||n.move_scope||n.el,t),eve.off("snap.drag.*."+n.el.id);p=[]},_=a.length;_--;)!function(t){e[t]=o[t]=function(n,r){if(e.is(n,"function"))this.events=this.events||[],this.events.push({name:t,f:n,unbind:f(this.node||document,t,n,r||this)});else for(var o=0,i=this.events.length;o<i;o++)if(this.events[o].name==t)try{this.events[o].f.call(this)}catch(e){}return this},e["un"+t]=o["un"+t]=function(e){for(var n=this.events||[],r=n.length;r--;)if(n[r].name==t&&(n[r].f==e||!e))return n[r].unbind(),n.splice(r,1),!n.length&&delete this.events,this;return this}}(a[_]);o.hover=function(e,t,n,r){return this.mouseover(e,n).mouseout(t,r||n)},o.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)};var v=[];o.drag=function(t,n,r,o,i,a){var s,u=this;if(!arguments.length)return u.drag(function(e,t){this.attr({transform:s+(s?"T":"t")+[e,t]})},function(){s=this.transform().local});function l(s,l,c){(s.originalEvent||s).preventDefault(),u._drag.x=l,u._drag.y=c,u._drag.id=s.identifier,!p.length&&e.mousemove(d).mouseup(h),p.push({el:u,move_scope:o,start_scope:i,end_scope:a}),n&&eve.on("snap.drag.start."+u.id,n),t&&eve.on("snap.drag.move."+u.id,t),r&&eve.on("snap.drag.end."+u.id,r),eve("snap.drag.start."+u.id,i||o||u,l,c,s)}function c(e,t,n){eve("snap.draginit."+u.id,u,e,t,n)}return eve.on("snap.draginit."+u.id,l),u._drag={},v.push({el:u,start:l,init:c}),u.mousedown(c),u},o.undrag=function(){for(var t=v.length;t--;)v[t].el==this&&(this.unmousedown(v[t].init),v.splice(t,1),eve.unbind("snap.drag.*."+this.id),eve.unbind("snap.draginit."+this.id));return!v.length&&e.unmousemove(d).unmouseup(h),this}}),o.plugin(function(e,t,n,r){t.prototype;var o=n.prototype,i=/^\s*url\((.+)\)/,a=String,s=e._.$;e.filter={},o.filter=function(n){var r=this;"svg"!=r.type&&(r=r.paper);var o=e.parse(a(n)),i=e._.id(),u=(r.node.offsetWidth,r.node.offsetHeight,s("filter"));return s(u,{id:i,filterUnits:"userSpaceOnUse"}),u.appendChild(o.node),r.defs.appendChild(u),new t(u)},eve.on("snap.util.getattr.filter",function(){eve.stop();var t=s(this.node,"filter");if(t){var n=a(t).match(i);return n&&e.select(n[1])}}),eve.on("snap.util.attr.filter",function(n){if(n instanceof t&&"filter"==n.type){eve.stop();var r=n.node.id;r||(s(n.node,{id:n.id}),r=n.id),s(this.node,{filter:e.url(r)})}n&&"none"!=n||(eve.stop(),this.node.removeAttribute("filter"))}),e.filter.blur=function(t,n){null==t&&(t=2);var r=null==n?t:[t,n];return e.format('<feGaussianBlur stdDeviation="{def}"/>',{def:r})},e.filter.blur.toString=function(){return this()},e.filter.shadow=function(t,n,r,o,i){return null==i&&(null==o?(i=r,r=4,o="#000"):(i=o,o=r,r=4)),null==r&&(r=4),null==i&&(i=1),null==t&&(t=0,n=2),null==n&&(n=t),o=e.color(o),e.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>',{color:o,dx:t,dy:n,blur:r,opacity:i})},e.filter.shadow.toString=function(){return this()},e.filter.grayscale=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:.2126+.7874*(1-t),b:.7152-.7152*(1-t),c:.0722-.0722*(1-t),d:.2126-.2126*(1-t),e:.7152+.2848*(1-t),f:.0722-.0722*(1-t),g:.2126-.2126*(1-t),h:.0722+.9278*(1-t)})},e.filter.grayscale.toString=function(){return this()},e.filter.sepia=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:.393+.607*(1-t),b:.769-.769*(1-t),c:.189-.189*(1-t),d:.349-.349*(1-t),e:.686+.314*(1-t),f:.168-.168*(1-t),g:.272-.272*(1-t),h:.534-.534*(1-t),i:.131+.869*(1-t)})},e.filter.sepia.toString=function(){return this()},e.filter.saturate=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-t})},e.filter.saturate.toString=function(){return this()},e.filter.hueRotate=function(t){return t=t||0,e.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:t})},e.filter.hueRotate.toString=function(){return this()},e.filter.invert=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:t,amount2:1-t})},e.filter.invert.toString=function(){return this()},e.filter.brightness=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:t})},e.filter.brightness.toString=function(){return this()},e.filter.contrast=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>',{amount:t,amount2:.5-t/2})},e.filter.contrast.toString=function(){return this()}}),o.plugin(function(e,t,n,r,o){var i=e._.box,a=e.is,s=/^[^a-z]*([tbmlrc])/i,u=function(){return"T"+this.dx+","+this.dy};t.prototype.getAlign=function(e,t){null==t&&a(e,"string")&&(t=e,e=null);var n=(e=e||this.paper).getBBox?e.getBBox():i(e),r=this.getBBox(),o={};switch(t=(t=t&&t.match(s))?t[1].toLowerCase():"c"){case"t":o.dx=0,o.dy=n.y-r.y;break;case"b":o.dx=0,o.dy=n.y2-r.y2;break;case"m":o.dx=0,o.dy=n.cy-r.cy;break;case"l":o.dx=n.x-r.x,o.dy=0;break;case"r":o.dx=n.x2-r.x2,o.dy=0;break;default:o.dx=n.cx-r.cx,o.dy=0}return o.toString=u,o},t.prototype.align=function(e,t){return this.transform("..."+this.getAlign(e,t))}}),o.plugin(function(e,t,n,o,i){var a=t.prototype,s=e.is,u=String,l="hasOwnProperty";function c(e,t,n){return function(r){var o=r.slice(e,t);return 1==o.length&&(o=o[0]),n?n(o):o}}var f=function(e,t,n,o){"function"!=typeof n||n.length||(o=n,n=r.linear),this.attr=e,this.dur=t,n&&(this.easing=n),o&&(this.callback=o)};e._.Animation=f,e.animation=function(e,t,n,r){return new f(e,t,n,r)},a.inAnim=function(){var e=[];for(var t in this.anims)this.anims[l](t)&&function(t){e.push({anim:new f(t._attrs,t.dur,t.easing,t._callback),mina:t,curStatus:t.status(),status:function(e){return t.status(e)},stop:function(){t.stop()}})}(this.anims[t]);return e},e.animate=function(e,t,n,o,i,a){"function"!=typeof i||i.length||(a=i,i=r.linear);var s=r.time(),u=r(e,t,s,s+o,r.time,n,i);return a&&eve.once("mina.finish."+u.id,a),u},a.stop=function(){for(var e=this.inAnim(),t=0,n=e.length;t<n;t++)e[t].stop();return this},a.animate=function(e,t,n,o){"function"!=typeof n||n.length||(o=n,n=r.linear),e instanceof f&&(o=e.callback,n=e.easing,t=e.dur,e=e.attr);var i,a,p,d,h=[],_=[],v={},g=this;for(var y in e)if(e[l](y)){g.equal?(i=(d=g.equal(y,u(e[y]))).from,a=d.to,p=d.f):(i=+g.attr(y),a=+e[y]);var m=s(i,"array")?i.length:1;v[y]=c(h.length,h.length+m,p),h=h.concat(i),_=_.concat(a)}var b=r.time(),k=r(h,_,b,b+t,r.time,function(e){var t={};for(var n in v)v[l](n)&&(t[n]=v[n](e));g.attr(t)},n);return g.anims[k.id]=k,k._attrs=e,k._callback=o,eve("snap.animcreated."+g.id,k),eve.once("mina.finish."+k.id,function(){eve.off("mina.*."+k.id),delete g.anims[k.id],o&&o.call(g)}),eve.once("mina.stop."+k.id,function(){eve.off("mina.*."+k.id),delete g.anims[k.id]}),g}}),o.plugin(function(e,t,n,r){function o(e){e=e.split(/(?=#)/);var t=new String(e[5]);return t[50]=e[0],t[100]=e[1],t[200]=e[2],t[300]=e[3],t[400]=e[4],t[500]=e[5],t[600]=e[6],t[700]=e[7],t[800]=e[8],t[900]=e[9],e[10]&&(t.A100=e[10],t.A200=e[11],t.A400=e[12],t.A700=e[13]),t}e.mui={},e.flat={},e.mui.red=o("#ffebee#ffcdd2#ef9a9a#e57373#ef5350#f44336#e53935#d32f2f#c62828#b71c1c#ff8a80#ff5252#ff1744#d50000"),e.mui.pink=o("#FCE4EC#F8BBD0#F48FB1#F06292#EC407A#E91E63#D81B60#C2185B#AD1457#880E4F#FF80AB#FF4081#F50057#C51162"),e.mui.purple=o("#F3E5F5#E1BEE7#CE93D8#BA68C8#AB47BC#9C27B0#8E24AA#7B1FA2#6A1B9A#4A148C#EA80FC#E040FB#D500F9#AA00FF"),e.mui.deeppurple=o("#EDE7F6#D1C4E9#B39DDB#9575CD#7E57C2#673AB7#5E35B1#512DA8#4527A0#311B92#B388FF#7C4DFF#651FFF#6200EA"),e.mui.indigo=o("#E8EAF6#C5CAE9#9FA8DA#7986CB#5C6BC0#3F51B5#3949AB#303F9F#283593#1A237E#8C9EFF#536DFE#3D5AFE#304FFE"),e.mui.blue=o("#E3F2FD#BBDEFB#90CAF9#64B5F6#64B5F6#2196F3#1E88E5#1976D2#1565C0#0D47A1#82B1FF#448AFF#2979FF#2962FF"),e.mui.lightblue=o("#E1F5FE#B3E5FC#81D4FA#4FC3F7#29B6F6#03A9F4#039BE5#0288D1#0277BD#01579B#80D8FF#40C4FF#00B0FF#0091EA"),e.mui.cyan=o("#E0F7FA#B2EBF2#80DEEA#4DD0E1#26C6DA#00BCD4#00ACC1#0097A7#00838F#006064#84FFFF#18FFFF#00E5FF#00B8D4"),e.mui.teal=o("#E0F2F1#B2DFDB#80CBC4#4DB6AC#26A69A#009688#00897B#00796B#00695C#004D40#A7FFEB#64FFDA#1DE9B6#00BFA5"),e.mui.green=o("#E8F5E9#C8E6C9#A5D6A7#81C784#66BB6A#4CAF50#43A047#388E3C#2E7D32#1B5E20#B9F6CA#69F0AE#00E676#00C853"),e.mui.lightgreen=o("#F1F8E9#DCEDC8#C5E1A5#AED581#9CCC65#8BC34A#7CB342#689F38#558B2F#33691E#CCFF90#B2FF59#76FF03#64DD17"),e.mui.lime=o("#F9FBE7#F0F4C3#E6EE9C#DCE775#D4E157#CDDC39#C0CA33#AFB42B#9E9D24#827717#F4FF81#EEFF41#C6FF00#AEEA00"),e.mui.yellow=o("#FFFDE7#FFF9C4#FFF59D#FFF176#FFEE58#FFEB3B#FDD835#FBC02D#F9A825#F57F17#FFFF8D#FFFF00#FFEA00#FFD600"),e.mui.amber=o("#FFF8E1#FFECB3#FFE082#FFD54F#FFCA28#FFC107#FFB300#FFA000#FF8F00#FF6F00#FFE57F#FFD740#FFC400#FFAB00"),e.mui.orange=o("#FFF3E0#FFE0B2#FFCC80#FFB74D#FFA726#FF9800#FB8C00#F57C00#EF6C00#E65100#FFD180#FFAB40#FF9100#FF6D00"),e.mui.deeporange=o("#FBE9E7#FFCCBC#FFAB91#FF8A65#FF7043#FF5722#F4511E#E64A19#D84315#BF360C#FF9E80#FF6E40#FF3D00#DD2C00"),e.mui.brown=o("#EFEBE9#D7CCC8#BCAAA4#A1887F#8D6E63#795548#6D4C41#5D4037#4E342E#3E2723"),e.mui.grey=o("#FAFAFA#F5F5F5#EEEEEE#E0E0E0#BDBDBD#9E9E9E#757575#616161#424242#212121"),e.mui.bluegrey=o("#ECEFF1#CFD8DC#B0BEC5#90A4AE#78909C#607D8B#546E7A#455A64#37474F#263238"),e.flat.turquoise="#1abc9c",e.flat.greensea="#16a085",e.flat.sunflower="#f1c40f",e.flat.orange="#f39c12",e.flat.emerland="#2ecc71",e.flat.nephritis="#27ae60",e.flat.carrot="#e67e22",e.flat.pumpkin="#d35400",e.flat.peterriver="#3498db",e.flat.belizehole="#2980b9",e.flat.alizarin="#e74c3c",e.flat.pomegranate="#c0392b",e.flat.amethyst="#9b59b6",e.flat.wisteria="#8e44ad",e.flat.clouds="#ecf0f1",e.flat.silver="#bdc3c7",e.flat.wetasphalt="#34495e",e.flat.midnightblue="#2c3e50",e.flat.concrete="#95a5a6",e.flat.asbestos="#7f8c8d",e.importMUIColors=function(){for(var t in e.mui)e.mui.hasOwnProperty(t)&&(window[t]=e.mui[t])}}),e.exports=o},function(e,t,n){var r;!function(n){var o,i,a="hasOwnProperty",s=/[\.\/]/,u=/\s*,\s*/,l=function(e,t){return e-t},c={n:{}},f=function(){for(var e=0,t=this.length;e<t;e++)if(void 0!==this[e])return this[e]},p=function(){for(var e=this.length;--e;)if(void 0!==this[e])return this[e]},d=Object.prototype.toString,h=String,_=Array.isArray||function(e){return e instanceof Array||"[object Array]"==d.call(e)},v=function(e,t){var n,r=i,a=Array.prototype.slice.call(arguments,2),s=v.listeners(e),u=0,c=[],d={},h=[],_=o;h.firstDefined=f,h.lastDefined=p,o=e,i=0;for(var g=0,y=s.length;g<y;g++)"zIndex"in s[g]&&(c.push(s[g].zIndex),s[g].zIndex<0&&(d[s[g].zIndex]=s[g]));for(c.sort(l);c[u]<0;)if(n=d[c[u++]],h.push(n.apply(t,a)),i)return i=r,h;for(g=0;g<y;g++)if("zIndex"in(n=s[g]))if(n.zIndex==c[u]){if(h.push(n.apply(t,a)),i)break;do{if((n=d[c[++u]])&&h.push(n.apply(t,a)),i)break}while(n)}else d[n.zIndex]=n;else if(h.push(n.apply(t,a)),i)break;return i=r,o=_,h};v._events=c,v.listeners=function(e){var t,n,r,o,i,a,u,l,f=_(e)?e:e.split(s),p=c,d=[p],h=[];for(o=0,i=f.length;o<i;o++){for(l=[],a=0,u=d.length;a<u;a++)for(n=[(p=d[a].n)[f[o]],p["*"]],r=2;r--;)(t=n[r])&&(l.push(t),h=h.concat(t.f||[]));d=l}return h},v.separator=function(e){e?(e="["+(e=h(e).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",s=new RegExp(e)):s=/[\.\/]/},v.on=function(e,t){if("function"!=typeof t)return function(){};for(var n=_(e)?_(e[0])?e:[e]:h(e).split(u),r=0,o=n.length;r<o;r++)!function(e){for(var n,r=_(e)?e:h(e).split(s),o=c,i=0,a=r.length;i<a;i++)o=(o=o.n).hasOwnProperty(r[i])&&o[r[i]]||(o[r[i]]={n:{}});for(o.f=o.f||[],i=0,a=o.f.length;i<a;i++)if(o.f[i]==t){n=!0;break}!n&&o.f.push(t)}(n[r]);return function(e){+e==+e&&(t.zIndex=+e)}},v.f=function(e){var t=[].slice.call(arguments,1);return function(){v.apply(null,[e,null].concat(t).concat([].slice.call(arguments,0)))}},v.stop=function(){i=1},v.nt=function(e){var t=_(o)?o.join("."):o;return e?new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(t):t},v.nts=function(){return _(o)?o:o.split(s)},v.off=v.unbind=function(e,t){if(e){var n=_(e)?_(e[0])?e:[e]:h(e).split(u);if(n.length>1)for(var r=0,o=n.length;r<o;r++)v.off(n[r],t);else{n=_(e)?e:h(e).split(s);var i,l,f,p,d,g=[c],y=[];for(r=0,o=n.length;r<o;r++)for(p=0;p<g.length;p+=f.length-2){if(f=[p,1],i=g[p].n,"*"!=n[r])i[n[r]]&&(f.push(i[n[r]]),y.unshift({n:i,name:n[r]}));else for(l in i)i[a](l)&&(f.push(i[l]),y.unshift({n:i,name:l}));g.splice.apply(g,f)}for(r=0,o=g.length;r<o;r++)for(i=g[r];i.n;){if(t){if(i.f){for(p=0,d=i.f.length;p<d;p++)if(i.f[p]==t){i.f.splice(p,1);break}!i.f.length&&delete i.f}for(l in i.n)if(i.n[a](l)&&i.n[l].f){var m=i.n[l].f;for(p=0,d=m.length;p<d;p++)if(m[p]==t){m.splice(p,1);break}!m.length&&delete i.n[l].f}}else for(l in delete i.f,i.n)i.n[a](l)&&i.n[l].f&&delete i.n[l].f;i=i.n}e:for(r=0,o=y.length;r<o;r++){for(l in(i=y[r]).n[i.name].f)continue e;for(l in i.n[i.name].n)continue e;delete i.n[i.name]}}}else v._events=c={n:{}}},v.once=function(e,t){var n=function(){return v.off(e,n),t.apply(this,arguments)};return v.on(e,n)},v.version="0.5.4",v.toString=function(){return"You are running Eve 0.5.4"},n.eve=v,e.exports?e.exports=v:void 0===(r=function(){return v}.apply(t,[]))||(e.exports=r)}("undefined"!=typeof window?window:this)},function(e,t,n){(function(t){
/**
 * @author Takahiro INOUE <takahiro.inoue@aist.go.jp>
 * @license Copyright (c) 2017-2019 AIST Songle Project
 */
!function(t){"use strict";var r=n(4).default;t.XMLHttpRequest||(t.XMLHttpRequest=n(5).XMLHttpRequest),"process"in t&&(e.exports=r),t.Songle=r}((this||0).self||t)}).call(this,n(3))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/packs/",n(n.s=379)}({0:function(e,t,n){"use strict";n.r(t),function(e){var r=n(12),o={};!function(e){Object.defineProperties(o,{currentTimeToMilliseconds:{configurable:!0,get:function(){return 1*Date.now()}},currentTimeToMicroseconds:{configurable:!0,get:function(){return 1e3*Date.now()}},defaultAppServerProtocol:{configurable:!0,get:function(){return o.__defaultAppServerProtocol__||"https:"},set:function(e){o.__defaultAppServerProtocol__=e}},defaultAppServerHost:{configurable:!0,get:function(){return o.__defaultAppServerHost__||"api.songle.jp"},set:function(e){o.__defaultAppServerHost__=e}},defaultAppServerEndpoint:{configurable:!0,get:function(){return o.defaultAppServerProtocol+"//"+o.defaultAppServerHost}},defaultLogServerProtocol:{configurable:!0,get:function(){return o.__defaultLogServerProtocol__||"https:"},set:function(e){o.__defaultLogServerProtocol__=e}},defaultLogServerHost:{configurable:!0,get:function(){return o.__defaultLogServerHost__||"log.songle.jp"},set:function(e){o.__defaultLogServerHost__=e}},defaultLogServerEndpoint:{configurable:!0,get:function(){return o.defaultLogServerProtocol+"//"+o.defaultLogServerHost}},defaultWebsocketServerProtocol:{configurable:!0,get:function(){var t="";return e.location&&(t="file:"==e.location.protocol?"wss:":""),o.__defaultWebsocketServerProtocol__||t},set:function(e){o.__defaultWebsocketServerProtocol__=e}},defaultWebsocketServerHost:{configurable:!0,get:function(){return o.__defaultWebsocketServerHost__||"api.songle.jp"},set:function(e){o.__defaultWebsocketServerHost__=e}},defaultWebsocketServerEndpoint:{configurable:!0,get:function(){return o.defaultWebsocketServerProtocol+"//"+o.defaultWebsocketServerHost}},global:{configurable:!0,get:function(){return e}},isStandalone:{configurable:!0,get:function(){return!e.document}},isWebBrowser:{configurable:!0,get:function(){return!!e.document}},language:{configurable:!0,get:function(){var e=window.navigator.languages&&window.navigator.languages[0]||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage;switch(!0){case/en/.test(e.toLowerCase()):return"en";case/ja/.test(e.toLowerCase()):return"ja";default:return"en"}}},referer:{configurable:!0,get:function(){return o.isStandalone?"-":e.document.referrer}},userAgent:{configurable:!0,get:function(){return o.isStandalone?"-":e.navigator.appCodeName+"/"+navigator.appVersion}},searchQueries:{configurable:!0,get:function(){var e={};return location.search.slice(location.search.indexOf("?")+1).split("&").forEach(function(t){var n=t.match(/(.+?)=(.+)/);if(n){var r=n[1],o=n[2];e[r]=o?decodeURIComponent(o):o}}),e}},showDebugLog:{configurable:!0,get:function(){return!!o.__showDebugLog__},set:function(e){o.__showDebugLog__=!!e}},showErrorLog:{configurable:!0,get:function(){return!!o.__showErrorLog__},set:function(e){o.__showErrorLog__=!!e}},showLicense:{configurable:!0,get:function(){return!!o.__showLicense__},set:function(e){o.__showLicense__=!!e,e?(r.default.removeLicense(),r.default.createLicense(e)):(r.default.removeLicense(),console.log("# ライセンス表記に関するガイドライン\n\n国立研究開発法人産業技術総合研究所\n情報技術研究部門\nメディアインタラクション研究グループ\n\nSongle APIは非商用利用に限り、どなたでも無料・無保証で利用することができます。\nただし、原則としてSongle APIを利用している旨を https://api.songle.jp/ にハイパーリンクした上で、利用しているシステムもしくは外部サイト等に表示する必要があります。\n\n# お問い合わせ\n\nsongle-api-ml@aist.go.jp"))}}}),o.stringIsBlank=function(e){return""==e||null==e},e.__sw__=o}((0).self||e),t.default=o}.call(this,n(21))},11:function(e,t,n){"use strict";n.r(t);var r=n(6),o=n(3),i=n(0),a={getSong:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,a){var s=null!=t.endpointProtocol?t.endpointProtocol:"",u=null!=t.endpointHost?t.endpointHost:"",l=null!=t.endpointPath?t.endpointPath:"",c="string"==typeof e?e:e&&e.media?e.media.sourceUrl:"",f=[];if(f.push("syntax=camelcase"),f.push("endpoint_protocol=".concat(s)),f.push("endpoint_host=".concat(u)),f.push("endpoint_path=".concat(l)),f.push("url=".concat(encodeURIComponent(c))),i.default.stringIsBlank(c))return a(o.default.createMediaSourceError(e));r.default.getJSON("".concat(i.default.defaultAppServerEndpoint,"/api/v2/song.json?").concat(f.join("&"))).then(function(t){return 200!=t.meta.status?a(o.default.createError(e,t)):"songle_song"!=t.data.type?a(o.default.createError(e,t)):void n(t.data)},function(e){a(e)})})},getSongBeat:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,a){var s=null!=t.endpointProtocol?t.endpointProtocol:"",u=null!=t.endpointHost?t.endpointHost:"",l=null!=t.endpointPath?t.endpointPath:"",c="string"==typeof e?e:e&&e.media?e.media.sourceUrl:"",f=null!=t.revisionId?t.revisionId:0,p=[];if(p.push("syntax=camelcase"),p.push("endpoint_protocol=".concat(s)),p.push("endpoint_host=".concat(u)),p.push("endpoint_path=".concat(l)),p.push("url=".concat(encodeURIComponent(c))),p.push("revision_id=".concat(f)),i.default.stringIsBlank(c))return a(o.default.createMediaSourceError(e));r.default.getJSON("".concat(i.default.defaultAppServerEndpoint,"/api/v2/song/beat.json?").concat(p.join("&"))).then(function(t){if(200!=t.meta.status)return a(o.default.createError(e,t));n(t.data)},function(e){a(e)})})},getSongChord:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,a){var s=null!=t.endpointProtocol?t.endpointProtocol:"",u=null!=t.endpointHost?t.endpointHost:"",l=null!=t.endpointPath?t.endpointPath:"",c="string"==typeof e?e:e&&e.media?e.media.sourceUrl:"",f=null!=t.revisionId?t.revisionId:0,p=[];if(p.push("syntax=camelcase"),p.push("endpoint_protocol=".concat(s)),p.push("endpoint_host=".concat(u)),p.push("endpoint_path=".concat(l)),p.push("url=".concat(encodeURIComponent(c))),p.push("revision_id=".concat(f)),i.default.stringIsBlank(c))return a(o.default.createMediaSourceError(e));r.default.getJSON("".concat(i.default.defaultAppServerEndpoint,"/api/v2/song/chord.json?").concat(p.join("&"))).then(function(t){if(200!=t.meta.status)return a(o.default.createError(e,t));n(t.data)},function(e){a(e)})})},getSongMelody:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,a){var s=null!=t.endpointProtocol?t.endpointProtocol:"",u=null!=t.endpointHost?t.endpointHost:"",l=null!=t.endpointPath?t.endpointPath:"",c="string"==typeof e?e:e&&e.media?e.media.sourceUrl:"",f=null!=t.revisionId?t.revisionId:0,p=[];if(p.push("syntax=camelcase"),p.push("endpoint_protocol=".concat(s)),p.push("endpoint_host=".concat(u)),p.push("endpoint_path=".concat(l)),p.push("url=".concat(encodeURIComponent(c))),p.push("revision_id=".concat(f)),i.default.stringIsBlank(c))return a(o.default.createMediaSourceError(e));r.default.getJSON("".concat(i.default.defaultAppServerEndpoint,"/api/v2/song/melody.json?").concat(p.join("&"))).then(function(t){if(200!=t.meta.status)return a(o.default.createError(e,t));n(t.data)},function(e){a(e)})})},getSongChorus:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,a){var s=null!=t.endpointProtocol?t.endpointProtocol:"",u=null!=t.endpointHost?t.endpointHost:"",l=null!=t.endpointPath?t.endpointPath:"",c="string"==typeof e?e:e&&e.media?e.media.sourceUrl:"",f=null!=t.revisionId?t.revisionId:0,p=[];if(p.push("syntax=camelcase"),p.push("endpoint_protocol=".concat(s)),p.push("endpoint_host=".concat(u)),p.push("endpoint_path=".concat(l)),p.push("url=".concat(encodeURIComponent(c))),p.push("revision_id=".concat(f)),i.default.stringIsBlank(c))return a(o.default.createMediaSourceError(e));r.default.getJSON("".concat(i.default.defaultAppServerEndpoint,"/api/v2/song/chorus.json?").concat(p.join("&"))).then(function(t){if(200!=t.meta.status)return a(o.default.createError(e,t));n(t.data)},function(e){a(e)})})},getSongVariation:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,a){var s=null!=t.endpointProtocol?t.endpointProtocol:"",u=null!=t.endpointHost?t.endpointHost:"",l=null!=t.endpointPath?t.endpointPath:"",c="string"==typeof e?e:e&&e.media?e.media.sourceUrl:"",f=null!=t.revisionId?t.revisionId:0,p=null!=t.groupCount?t.groupCount:2,d=[];if(d.push("syntax=camelcase"),d.push("endpoint_protocol=".concat(s)),d.push("endpoint_host=".concat(u)),d.push("endpoint_path=".concat(l)),d.push("url=".concat(encodeURIComponent(c))),d.push("revision_id=".concat(f)),d.push("group_count=".concat(p)),i.default.stringIsBlank(c))return a(o.default.createMediaSourceError(e));r.default.getJSON("".concat(i.default.defaultAppServerEndpoint,"/api/v2/song/variation.json?").concat(d.join("&"))).then(function(t){if(200!=t.meta.status)return a(o.default.createError(e,t));n(t.data)},function(e){a(e)})})}};t.default=a},119:function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},12:function(e,t,n){"use strict";n.r(t);var r=n(0),o="songle-api-license";function i(){return document.querySelector(".".concat(o))}var a={createLicense:function(e){if(!r.default.isStandalone){var t=i();if(!t){switch((t=document.createElement("img")).className=o,t.style.cursor="pointer",t.style.borderRadius="4px",t.style.position="fixed",t.style.zIndex="9999",e){case"left-top":t.style.left="4px",t.style.top="4px",t.style.width="24px",t.style.height="24px";break;case"left-bottom":t.style.left="4px",t.style.bottom="4px",t.style.width="24px",t.style.height="24px";break;case"right-top":t.style.right="4px",t.style.top="4px",t.style.width="24px",t.style.height="24px";break;default:case"right-bottom":t.style.right="4px",t.style.bottom="4px",t.style.width="24px",t.style.height="24px"}t.alt="Powered by Songle API",t.src="https://api.songle.jp/license-icons/songle.png",t.width=24,t.height=24,t.addEventListener("click",function(e){return open("https://api.songle.jp")},!1),t.addEventListener("touch",function(e){return open("https://api.songle.jp")},!1),document.body&&document.body.appendChild(t)}}},removeLicense:function(){if(!r.default.isStandalone){var e=i();e&&e.remove()}}};t.default=a},120:function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,o=n;return[o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]]].join("")}},13:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r);function i(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function s(e){i(a,r,o,s,u,"next",e)}function u(e){i(a,r,o,s,u,"throw",e)}s(void 0)})}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(14);var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.traps=[]}var t,n,r;return t=e,n=[{key:"initialize",value:function(){var e=a(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.__player__=t;case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){var e=a(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.traps=[];case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"mapTraps",value:function(e){var t=this,n=this.player.dispatchers.map(function(n){return n.traps.map(function(n){if(-1!=t.__convertToStringArray__(e).indexOf(n.name))return n}).filter(function(e){return null!=e})});return Array.prototype.concat.apply([],n)}},{key:"mapTrapsHasAnyData",value:function(e){return this.mapTraps(e).filter(function(e){return null!=e.data})}},{key:"mapTrapsHasNotData",value:function(e){return this.mapTraps(e).filter(function(e){return null==e.data})}},{key:"on",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r.offset=null!=r.offset?r.offset:0,(e=this.__convertToStringArray__(e)).forEach(function(e){e=n.__validateTrapName__(e),n.traps.push({name:e,trap:t,data:null,options:r})})}},{key:"off",value:function(e,t){var n=this;arguments.length>2&&void 0!==arguments[2]&&arguments[2],(e=this.__convertToStringArray__(e)).forEach(function(e){e=n.__validateTrapName__(e),n.traps.forEach(function(r,o){r.name===e&&r.trap===t&&n.traps.splice(o,1)})})}},{key:"invokeSelfTrap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=this.__validateTrapName__(e),this.traps.forEach(function(n){n.name==e&&(t.type=e,n.trap(t))})}},{key:"__convertToStringArray__",value:function(e){return"string"==typeof e?[e]:e}},{key:"__validateTrapName__",value:function(e){switch(e){case"beatPlay":e="beatEnter";break;case"chordChange":case"chordPlay":e="chordEnter";break;case"melodyPlay":e="melodyEnter";break;case"variationChange":case"variationPlay":e="variationEnter";break;case"chorusEnter":e="chorusSectionEnter";break;case"chorusLeave":e="chorusSectionLeave";break;case"repeatEnter":case"repeatSectionEnter":e="repeatedSectionEnter";break;case"repeatLeave":case"repeatSectionLeave":e="repeatedSectionLeave"}return e}},{key:"dispatcherName",get:function(){return"dispatcher"}},{key:"dispatcherType",get:function(){return"dispatcher"}},{key:"player",get:function(){return this.__player__}}],r=[{key:"Name",get:function(){return"dispatcher"}},{key:"Type",get:function(){return"dispatcher"}}],n&&s(t.prototype,n),r&&s(t,r),e}();t.default=u},14:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=(n(9),n(13)),a=n(4),s=n(18),u=n(7),l=n(28),c=(n(0),n(8));function f(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function p(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){f(i,r,o,a,s,"next",e)}function s(e){f(i,r,o,a,s,"throw",e)}a(void 0)})}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),e}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function t(){var e,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=!(n=d(t).call(this))||"object"!=typeof n&&"function"!=typeof n?h(this):n).__readyUseMedia__=!1,e.__musicMap__={},e.__endpointProtocol__=r.endpointProtocol,e.__endpointHost__=r.endpointHost,e.__endpointPath__=r.endpointPath,e.__accessToken__=r.accessToken,e.__secretToken__=r.secretToken,e.__mediaElement__=r.mediaElement,e.dispatchers=[h(e)],e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,i.default),v(t,null,[{key:"Name",get:function(){return"player"}},{key:"Type",get:function(){return"player"}},{key:"MinVolume",get:function(){return 0}},{key:"MaxVolume",get:function(){return 100}}]),v(t,[{key:"dispose",value:function(){var e=p(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"activate",value:function(){this.media.play()}},{key:"useMedia",value:function(){var e=p(o.a.mark(function e(t){var n,r=this,i=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:{},!this.__readyUseMedia__){e.next=3;break}return e.abrupt("return");case 3:return this.__readyUseMedia__=!0,e.next=6,Promise.all(this.dispatchers.map(function(e){return e.dispose()}));case 6:if(!this.__media__){e.next=9;break}return e.next=9,this.__media__.dispose();case 9:e.t0=typeof t,e.next="string"===e.t0?12:16;break;case 12:return e.next=14,l.default.createMedia(this,t,Object.assign(n,{rootElement:this.mediaElement||n.rootElement,onMediaFactoryError:function(e){r.invokeTrap("mediaFactroyError",{target:r})},onMediaFactoryReady:function(e){r.invokeTrap("mediaFactroyReady",{target:r})}}));case 14:return this.__media__=e.sent,e.abrupt("break",18);case 16:return this.__media__=t,e.abrupt("break",18);case 18:return e.next=20,this.__media__.initialize(this,n);case 20:return e.next=22,Promise.all(this.dispatchers.map(function(e){return e.initialize(r)}));case 22:this.invokeTrap("mediaReady",{target:this}),this.__readyUseMedia__=!1;case 24:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"addPlugin",value:function(e){e.dispatcherType!=s.default.Type||this.dispatchers.find(function(t){return t.dispatcherName==e.dispatcherName})?u.default.warn("'"+e.dispatcherName+"' is NOT plugin or already installed."):(e.__player__=this,this.dispatchers.push(e))}},{key:"invokeTrap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__media__&&this.__media__.invokeSelfTrap(e,t),this.dispatchers.forEach(function(n){n.invokeSelfTrap(e,t)})}},{key:"play",value:function(){this.__media__?this.media.play():u.default.warn("'SW.Player.media' was NOT set. Please set media using 'SW.Player.useMedia' function")}},{key:"pause",value:function(){this.__media__?this.media.pause():u.default.warn("'SW.Player.media' was NOT set. Please set media using 'SW.Player.useMedia' function")}},{key:"stop",value:function(){this.__media__?(this.media.seekTo(0),this.media.pause()):u.default.warn("'SW.Player.media' was NOT set. Please set media using 'SW.Player.useMedia' function")}},{key:"seekTo",value:function(e){this.__media__?this.invokeTrap("seek",{target:this,data:{position:e}}):u.default.warn("'SW.Player.media' was NOT set. Please set media using 'SW.Player.useMedia' function")}},{key:"dispatcherName",get:function(){return t.Name}},{key:"dispatcherType",get:function(){return t.Type}},{key:"endpointProtocol",get:function(){return this.__endpointProtocol__||""}},{key:"endpointHost",get:function(){return this.__endpointHost__||""}},{key:"endpointPath",get:function(){return this.__endpointPath__||""}},{key:"accessToken",get:function(){return this.__accessToken__||""},set:function(e){this.__accessToken__=e}},{key:"secretToken",get:function(){return this.__secretToken__||""},set:function(e){this.__secretToken__=e}},{key:"mediaElement",get:function(){return c.default.querySelector(this.__mediaElement__)},set:function(e){this.__mediaElement__=e}},{key:"media",get:function(){return this.__media__}},{key:"musicMap",get:function(){return this.__musicMap__}},{key:"isReady",get:function(){return this.media?this.media.isReady:a.default.DefaultIsReady}},{key:"isPlaying",get:function(){return this.media?this.media.isPlaying:a.default.DefaultIsPlaying}},{key:"isPaused",get:function(){return this.media?this.media.isPaused:a.default.DefaultIsPaused}},{key:"isSeeking",get:function(){return this.media?this.media.isSeeking:a.default.DefaultIsSeeking}},{key:"position",get:function(){return this.media?this.media.position:0}},{key:"duration",get:function(){return this.media?this.media.duration:0}},{key:"volume",get:function(){return this.media.volume},set:function(e){e<0&&(e=0),e>100&&(e=100),this.media.volume=e}}]),t}();t.default=y},155:function(e,t,n){"use strict";n.r(t);var r=n(14),o=n(77);function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,i(t).call(this,n))).addPlugin(new o.default),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,r.default),t}();t.default=s},156:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=n(45),a=n(9),s=n(46),u=n(94);function l(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,p(t).apply(this,arguments))}var n,r,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,s.default),n=t,h=[{key:"Name",get:function(){return"sw-plugin-beat"}},{key:"BarEnterTrapName",get:function(){return"barEnter"}},{key:"BarLeaveTrapName",get:function(){return"barLeave"}},{key:"BeatEnterTrapName",get:function(){return"beatEnter"}},{key:"BeatLeaveTrapName",get:function(){return"beatLeave"}}],(r=[{key:"initialize",value:function(){var e,n=(e=o.a.mark(function e(n){var r=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f(p(t.prototype),"initialize",this).call(this,n),n.seekToPrevBar=function(){var e=i.default.findPrevBar(n);e&&n.seekTo(e.start)},n.seekToNextBar=function(){var e=i.default.findNextBar(n);e&&n.seekTo(e.start)},e.t0=this,e.next=6,a.default.MusicMap.getSongBeat(n,{endpointProtocol:this.endpointProtocol,endpointHost:this.endpointHost,endpointPath:this.endpointPath,revisionId:this.revisionId});case 6:e.t1=e.sent,e.t0.__updateMusicMap__.call(e.t0,e.t1),this.on(["play","pause","mediaSeek","seek"],function(e){r.__resetBarLeaveTrap__(),r.__resetBeatLeaveTrap__(),r.__resetBarEnterTrap__(),r.__resetBeatEnterTrap__()}),function e(){r.mapTrapsHasNotData(["barEnter","barLeave","beatEnter","beatLeave"]).forEach(function(e){return e.data=new u.default(r.player)}),setTimeout(function(){r.player.isPlaying&&(r.__invokeBarLeaveTrap__(),r.__invokeBeatLeaveTrap__(),r.__invokeBarEnterTrap__(),r.__invokeBeatEnterTrap__()),e()},r.pollingInterval)}();case 11:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){l(i,r,o,a,s,"next",e)}function s(e){l(i,r,o,a,s,"throw",e)}a(void 0)})});return function(e){return n.apply(this,arguments)}}()},{key:"__resetBarEnterTrap__",value:function(){this.mapTrapsHasAnyData("barEnter").forEach(function(e){return e.data.reset()})}},{key:"__resetBarLeaveTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("barLeave").forEach(function(t){return t.data.reset({leave:function(n){return e.__invokeTrap__(t,n)}})})}},{key:"__resetBeatEnterTrap__",value:function(){this.mapTrapsHasAnyData("beatEnter").forEach(function(e){return e.data.reset()})}},{key:"__resetBeatLeaveTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("beatLeave").forEach(function(t){return t.data.reset({leave:function(n){return e.__invokeTrap__(t,n)}})})}},{key:"__invokeBarEnterTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("barEnter").forEach(function(t){return t.data.find({enter:function(n){1==n.beat.position&&e.__invokeTrap__(t,n)}},{offset:t.options.offset+e.offset})})}},{key:"__invokeBarLeaveTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("barLeave").forEach(function(t){return t.data.find({leave:function(n){1==n.beat.position&&e.__invokeTrap__(t,n)}},{offset:t.options.offset+e.offset})})}},{key:"__invokeBeatEnterTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("beatEnter").forEach(function(t){return t.data.find({enter:function(n){return e.__invokeTrap__(t,n)}},{offset:t.options.offset+e.offset})})}},{key:"__invokeBeatLeaveTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("beatLeave").forEach(function(t){return t.data.find({leave:function(n){return e.__invokeTrap__(t,n)}},{offset:t.options.offset+e.offset})})}},{key:"__updateMusicMap__",value:function(e){var t=this;this.player.musicMap.beats=e.attributes.sequence,this.player.musicMap.beats.forEach(function(e){[{source:"startTimeMs",target:"start"},{source:"numberOfBeatsPerBar",target:"count"},{source:"number",target:"position"}].forEach(function(t){e.__defineGetter__(t.target,function(){return e[t.source]})}),e.prev=t.player.musicMap.beats[e.index-1]||null,e.next=t.player.musicMap.beats[e.index+1]||null})}},{key:"dispatcherName",get:function(){return t.Name}}])&&c(n.prototype,r),h&&c(n,h),t}();t.default=h},157:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=(n(45),n(9)),a=n(46),s=n(95);function u(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,f(t).apply(this,arguments))}var n,r,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,a.default),n=t,d=[{key:"Name",get:function(){return"sw-plugin-chord"}},{key:"ChordEnterTrapName",get:function(){return"chordEnter"}},{key:"ChordLeaveTrapName",get:function(){return"chordLeave"}}],(r=[{key:"initialize",value:function(){var e,n=(e=o.a.mark(function e(n){var r=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c(f(t.prototype),"initialize",this).call(this,n),e.t0=this,e.next=4,i.default.MusicMap.getSongChord(n,{endpointProtocol:this.endpointProtocol,endpointHost:this.endpointHost,endpointPath:this.endpointPath,revisionId:this.revisionId});case 4:e.t1=e.sent,e.t0.__updateMusicMap__.call(e.t0,e.t1),this.on(["play","pause","mediaSeek","seek"],function(e){r.__resetChordLeaveTrap__(),r.__resetChordEnterTrap__()}),function e(){r.mapTrapsHasNotData(["chordEnter","chordLeave"]).forEach(function(e){return e.data=new s.default(r.player)}),setTimeout(function(){r.player.isPlaying&&(r.__runChordLeaveTrap__(),r.__runChordEnterTrap__()),e()},r.pollingInterval)}();case 9:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){u(i,r,o,a,s,"next",e)}function s(e){u(i,r,o,a,s,"throw",e)}a(void 0)})});return function(e){return n.apply(this,arguments)}}()},{key:"__resetChordEnterTrap__",value:function(){this.mapTrapsHasAnyData("chordEnter").forEach(function(e){return e.data.reset()})}},{key:"__resetChordLeaveTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("chordLeave").forEach(function(t){return t.data.reset({leave:function(n){return e.__invokeTrap__(t,n)}})})}},{key:"__runChordEnterTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("chordEnter").forEach(function(t){return t.data.find({enter:function(n){return e.__invokeTrap__(t,n)}},{offset:t.options.offset+e.offset})})}},{key:"__runChordLeaveTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("chordLeave").forEach(function(t){return t.data.find({leave:function(n){return e.__invokeTrap__(t,n)}},{offset:t.options.offset+e.offset})})}},{key:"__updateMusicMap__",value:function(e){var t=this;this.player.musicMap.chords=e.attributes.sequence,this.player.musicMap.chords.forEach(function(e){[{source:"startTimeMs",target:"start"},{source:"durationTimeMs",target:"duration"}].forEach(function(t){e.__defineGetter__(t.target,function(){return e[t.source]})}),e.prev=t.player.musicMap.chords[e.index-1]||null,e.next=t.player.musicMap.chords[e.index+1]||null})}},{key:"dispatcherName",get:function(){return t.Name}}])&&l(n.prototype,r),d&&l(n,d),t}();t.default=d},158:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=(n(45),n(9)),a=n(46),s=n(96);function u(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,f(t).apply(this,arguments))}var n,r,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,a.default),n=t,d=[{key:"Name",get:function(){return"sw-plugin-melody"}},{key:"MelodyEnterTrapName",get:function(){return"melodyEnter"}},{key:"MelodyLeaveTrapName",get:function(){return"melodyLeave"}}],(r=[{key:"initialize",value:function(){var e,n=(e=o.a.mark(function e(n){var r=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c(f(t.prototype),"initialize",this).call(this,n),e.t0=this,e.next=4,i.default.MusicMap.getSongMelody(n,{endpointProtocol:this.endpointProtocol,endpointHost:this.endpointHost,endpointPath:this.endpointPath,revisionId:this.revisionId});case 4:e.t1=e.sent,e.t0.__updateMusicMap__.call(e.t0,e.t1),this.on(["play","pause","mediaSeek","seek"],function(e){r.__resetMelodyLeaveTrap__(),r.__resetMelodyEnterTrap__()}),function e(){r.mapTrapsHasNotData(["melodyEnter","melodyLeave"]).forEach(function(e){return e.data=new s.default(r.player)}),setTimeout(function(){r.player.isPlaying&&(r.__runMelodyLeaveTrap__(),r.__runMelodyEnterTrap__()),e()},r.pollingInterval)}();case 9:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){u(i,r,o,a,s,"next",e)}function s(e){u(i,r,o,a,s,"throw",e)}a(void 0)})});return function(e){return n.apply(this,arguments)}}()},{key:"__resetMelodyEnterTrap__",value:function(){this.mapTrapsHasAnyData("melodyEnter").forEach(function(e){return e.data.reset()})}},{key:"__resetMelodyLeaveTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("melodyLeave").forEach(function(t){return t.data.reset({leave:function(n){return e.__invokeTrap__(t,n)}})})}},{key:"__runMelodyEnterTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("melodyEnter").forEach(function(t){return t.data.find({enter:function(n){return e.__invokeTrap__(t,n)}},{offset:t.options.offset+e.offset})})}},{key:"__runMelodyLeaveTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("melodyLeave").forEach(function(t){return t.data.find({leave:function(n){return e.__invokeTrap__(t,n)}},{offset:t.options.offset+e.offset})})}},{key:"__updateMusicMap__",value:function(e){var t=this;this.player.musicMap.melodies=e.attributes.sequence,this.player.musicMap.melodies.forEach(function(e){[{source:"startTimeMs",target:"start"},{source:"durationTimeMs",target:"duration"}].forEach(function(t){e.__defineGetter__(t.target,function(){return e[t.source]})}),e.prev=t.player.musicMap.melodies[e.index-1]||null,e.next=t.player.musicMap.melodies[e.index+1]||null})}},{key:"dispatcherName",get:function(){return t.Name}}])&&l(n.prototype,r),d&&l(n,d),t}();t.default=d},159:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=n(45),a=n(9),s=n(46),u=n(97);function l(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,p(t).apply(this,arguments))}var n,r,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,s.default),n=t,h=[{key:"Name",get:function(){return"sw-plugin-chorus"}},{key:"ChorusSectionEnterTrapName",get:function(){return"chorusSectionEnter"}},{key:"ChorusSectionLeaveTrapName",get:function(){return"chorusSectionLeave"}},{key:"RepeatedSectionEnterTrapName",get:function(){return"repeatedSectionEnter"}},{key:"RepeatedSectionLeaveTrapName",get:function(){return"repeatedSectionLeave"}}],(r=[{key:"initialize",value:function(){var e,n=(e=o.a.mark(function e(n){var r=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f(p(t.prototype),"initialize",this).call(this,n),n.seekToPrevChorusSection=function(){var e=i.default.findPrevRepeatedSectionItem(n,{chorusOnly:!0});e&&n.seekTo(e.start)},n.seekToPrevChorusSectionItem=n.seekToPrevChorusSection,n.seekToNextChorusSection=function(){var e=i.default.findNextRepeatedSectionItem(n,{chorusOnly:!0});e&&n.seekTo(e.start)},n.seekToNextChorusSectionItem=n.seekToNextChorusSection,n.seekToPrevRepeatedSection=function(){var e=i.default.findPrevRepeatedSectionItem(n);e&&n.seekTo(e.start)},n.seekToPrevRepeatedSectionItem=n.seekToPrevRepeatedSection,n.seekToNextRepeatedSection=function(){var e=i.default.findNextRepeatedSectionItem(n);e&&n.seekTo(e.start)},n.seekToNextRepeatedSectionItem=n.seekToNextRepeatedSection,e.t0=this,e.next=12,a.default.MusicMap.getSongChorus(n,{endpointProtocol:this.endpointProtocol,endpointHost:this.endpointHost,endpointPath:this.endpointPath,revisionId:this.revisionId});case 12:e.t1=e.sent,e.t0.__updateMusicMap__.call(e.t0,e.t1),this.on(["play","pause","mediaSeek","seek"],function(e){r.__resetChorusSectionLeaveTrap__(),r.__resetChorusSectionEnterTrap__(),r.__resetRepeatedSectionLeaveTrap__(),r.__resetRepeatedSectionEnterTrap__()}),function e(){r.mapTrapsHasNotData(["chorusSectionEnter","chorusSectionLeave","repeatedSectionEnter","repeatedSectionLeave"]).forEach(function(e){return e.data=new u.default(r.player)}),setTimeout(function(){r.player.isPlaying&&(r.__runChorusSectionLeaveTrap__(),r.__runChorusSectionEnterTrap__(),r.__runRepeatedSectionLeaveTrap__(),r.__runRepeatedSectionEnterTrap__()),e()},r.pollingInterval)}();case 17:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){l(i,r,o,a,s,"next",e)}function s(e){l(i,r,o,a,s,"throw",e)}a(void 0)})});return function(e){return n.apply(this,arguments)}}()},{key:"__resetChorusSectionEnterTrap__",value:function(){this.mapTrapsHasAnyData("chorusSectionEnter").forEach(function(e){return e.data.reset()})}},{key:"__resetChorusSectionLeaveTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("chorusSectionLeave").forEach(function(t){return t.data.reset({leave:function(n){n.section.isChorus&&e.__invokeTrap__(t,n)}})})}},{key:"__resetRepeatedSectionEnterTrap__",value:function(){this.mapTrapsHasAnyData("repeatedSectionEnter").forEach(function(e){return e.data.reset()})}},{key:"__resetRepeatedSectionLeaveTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("repeatedSectionLeave").forEach(function(t){return t.data.reset({leave:function(n){return e.__invokeTrap__(t,n)}})})}},{key:"__runChorusSectionEnterTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("chorusSectionEnter").forEach(function(t){return t.data.find({enter:function(n){n.section.isChorus&&e.__invokeTrap__(t,n)}},{offset:t.options.offset+e.offset})})}},{key:"__runChorusSectionLeaveTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("chorusSectionLeave").forEach(function(t){return t.data.find({leave:function(n){n.section.isChorus&&e.__invokeTrap__(t,n)}},{offset:t.options.offset+e.offset})})}},{key:"__runRepeatedSectionEnterTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("repeatedSectionEnter").forEach(function(t){return t.data.find({enter:function(n){return e.__invokeTrap__(t,n)}},{offset:t.options.offset+e.offset})})}},{key:"__runRepeatedSectionLeaveTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("repeatedSectionLeave").forEach(function(t){return t.data.find({leave:function(n){return e.__invokeTrap__(t,n)}},{offset:t.options.offset+e.offset})})}},{key:"__updateMusicMap__",value:function(e){this.player.musicMap.chorus=e.attributes.sequence,this.player.musicMap.chorusSections=e.attributes.sequence.filter(function(e){return e.isChorus}),this.player.musicMap.repeatSections=e.attributes.sequence,this.player.musicMap.chorusSections.forEach(function(e){[{source:"items",target:"repeats"},{source:"durationTimeMs",target:"duration"}].forEach(function(t){e.__defineGetter__(t.target,function(){return e[t.source]})}),e.items.forEach(function(t){[{source:"startTimeMs",target:"start"},{source:"durationTimeMs",target:"duration"},{source:"endTimeMs",target:"end"}].forEach(function(e){t.__defineGetter__(e.target,function(){return t[e.source]})}),t.prev=e.items[t.index-1]||null,t.next=e.items[t.index+1]||null})}),this.player.musicMap.repeatSections.forEach(function(e){[{source:"items",target:"repeats"},{source:"durationTimeMs",target:"duration"}].forEach(function(t){e.__defineGetter__(t.target,function(){return e[t.source]})}),e.items.forEach(function(t){[{source:"startTimeMs",target:"start"},{source:"durationTimeMs",target:"duration"},{source:"endTimeMs",target:"end"}].forEach(function(e){t.__defineGetter__(e.target,function(){return t[e.source]})}),t.prev=e.items[t.index-1]||null,t.next=e.items[t.index+1]||null})})}},{key:"dispatcherName",get:function(){return t.Name}}])&&c(n.prototype,r),h&&c(n,h),t}();t.default=h},160:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=(n(45),n(9)),a=n(46),s=n(98);function u(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=2,_=10,v=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,c(t).call(this,n))).__groupCount__=null!=n.groupCount?n.groupCount:2,e.__groupCount__<h&&(e.__groupCount__=h),e.__groupCount__>_&&(e.__groupCount__=_),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,a.default),p(t,null,[{key:"Name",get:function(){return"sw-plugin-variation"}},{key:"MinGroupCount",get:function(){return h}},{key:"MaxGroupCount",get:function(){return _}},{key:"VariationEnterTrapName",get:function(){return"variationEnter"}},{key:"VariationLeaveTrapName",get:function(){return"variationLeave"}}]),p(t,[{key:"initialize",value:function(){var e,n=(e=o.a.mark(function e(n){var r=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l(c(t.prototype),"initialize",this).call(this,n),e.t0=this,e.next=4,i.default.MusicMap.getSongVariation(n,{endpointProtocol:this.endpointProtocol,endpointHost:this.endpointHost,endpointPath:this.endpointPath,groupCount:this.__groupCount__});case 4:e.t1=e.sent,e.t0.__updateMusicMap__.call(e.t0,e.t1),this.on(["play","pause","mediaSeek","seek"],function(e){r.__resetVariationLeaveTrap__(),r.__resetVariationEnterTrap__()}),function e(){r.mapTrapsHasNotData(["variationEnter","variationLeave"]).forEach(function(e){return e.data=new s.default(r.player)}),setTimeout(function(){r.player.isPlaying&&(r.__runVariationLeaveTrap__(),r.__runVariationEnterTrap__()),e()},r.pollingInterval)}();case 9:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){u(i,r,o,a,s,"next",e)}function s(e){u(i,r,o,a,s,"throw",e)}a(void 0)})});return function(e){return n.apply(this,arguments)}}()},{key:"__resetVariationEnterTrap__",value:function(){this.mapTrapsHasAnyData("variationEnter").forEach(function(e){return e.data.reset()})}},{key:"__resetVariationLeaveTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("variationLeave").forEach(function(t){return t.data.reset({leave:function(n){return e.__invokeTrap__(t,n)}})})}},{key:"__runVariationEnterTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("variationEnter").forEach(function(t){return t.data.find({enter:function(n){return e.__invokeTrap__(t,n)}},{offset:t.options.offset+e.offset})})}},{key:"__runVariationLeaveTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("variationLeave").forEach(function(t){return t.data.find({leave:function(n){return e.__invokeTrap__(t,n)}},{offset:t.options.offset+e.offset})})}},{key:"__updateMusicMap__",value:function(e){var t=this;this.player.musicMap.variations=e.attributes.sequence,this.player.musicMap.variations.forEach(function(e){[{source:"startTimeMs",target:"start"},{source:"durationTimeMs",target:"duration"}].forEach(function(t){e.__defineGetter__(t.target,function(){return e[t.source]})}),e.prev=t.player.musicMap.variations[e.index-1]||null,e.next=t.player.musicMap.variations[e.index+1]||null})}},{key:"dispatcherName",get:function(){return t.Name}}]),t}();t.default=v},171:function(e,t,n){"use strict";n.r(t);var r=n(14),o=n(78);function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,i(t).call(this,n))).addPlugin(new o.default),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,r.default),t}();t.default=s},18:function(e,t,n){"use strict";n.r(t);var r=n(13);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,i(t).apply(this,arguments))}var n,s,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,r.default),n=t,u=[{key:"Name",get:function(){return"plugin"}},{key:"Type",get:function(){return"plugin"}}],(s=[{key:"dispatcherName",get:function(){return"plugin"}},{key:"dispatcherType",get:function(){return"plugin"}}])&&o(n.prototype,s),u&&o(n,u),t}();t.default=s},2:function(e,t,n){e.exports=n(36)},21:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},22:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=(n(14),n(4));function a(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d="play",h="pause",_="seeking",v="ended",g="timeupdate",y=function(e){function t(e){var n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=l(t).call(this),(n=!r||"object"!=typeof r&&"function"!=typeof r?s(this):r).__originalPlayer__=e,n.__originalPlayer__.addEventListener(d,function(e){n.__invokeMediaStateChangeTrap__(s(n),i.default.StatePlaying)}),n.__originalPlayer__.addEventListener(h,function(e){n.__invokeMediaStateChangeTrap__(s(n),i.default.StatePaused)}),n.__originalPlayer__.addEventListener(_,function(e){n.__invokeMediaStateChangeTrap__(s(n),i.default.StateSeeking)}),n.__originalPlayer__.addEventListener(v,function(e){n.__invokeMediaStateChangeTrap__(s(n),i.default.StateFinished)}),n.__originalPlayer__.addEventListener(g,function(e){n.__invokeMediaStateChangeTrap__(s(n),i.default.StateTimeUpdate)}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,i.default),f(t,null,[{key:"Name",get:function(){return"sw-media-html-media-element"}}]),f(t,[{key:"dispose",value:function(){var e,n=(e=o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:u(l(t.prototype),"dispose",this).call(this),this.__originalPlayer__.remove();case 2:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function s(e){a(i,r,o,s,u,"next",e)}function u(e){a(i,r,o,s,u,"throw",e)}s(void 0)})});return function(){return n.apply(this,arguments)}}()},{key:"play",value:function(){this.isPlaying||this.__originalPlayer__.play()}},{key:"pause",value:function(){this.isPaused||this.__originalPlayer__.pause()}},{key:"seekTo",value:function(e){u(l(t.prototype),"seekTo",this).call(this,e),this.__originalPlayer__.currentTime=e/1e3}},{key:"dispatcherName",get:function(){return t.Name}},{key:"originalPosition",get:function(){return 1e3*this.__originalPlayer__.currentTime}},{key:"volume",get:function(){return 100*this.__originalPlayer__.volume},set:function(e){var t=e/100;t<0&&(t=0),t>1&&(t=1),this.__originalPlayer__.volume=t}}]),t}();t.default=y},23:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=(n(14),n(4));function a(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=32,h=48,_=50,v=64,g=function(e){function t(e){var n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=l(t).call(this),(n=!r||"object"!=typeof r&&"function"!=typeof r?s(this):r).__originalPlayer__=e,n.__originalPlayer__.addEventListener("statusChange",function(e){switch(n.__invokeMediaStateChangeTrap__(s(n),i.default.StateTimeUpdate),e.playerStatus<<4|e.seekStatus<<0){case d:n.__invokeMediaStateChangeTrap__(s(n),i.default.StatePlaying);break;case h:if(n.isSeeking)return;n.__invokeMediaStateChangeTrap__(s(n),i.default.StatePaused);break;case _:n.__invokeMediaStateChangeTrap__(s(n),i.default.StateSeeking);break;case v:n.__invokeMediaStateChangeTrap__(s(n),i.default.StateFinished)}}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,i.default),f(t,null,[{key:"Name",get:function(){return"sw-media-nn-video"}}]),f(t,[{key:"dispose",value:function(){var e,n=(e=o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:u(l(t.prototype),"dispose",this).call(this),this.__originalPlayer__.dispose();case 2:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function s(e){a(i,r,o,s,u,"next",e)}function u(e){a(i,r,o,s,u,"throw",e)}s(void 0)})});return function(){return n.apply(this,arguments)}}()},{key:"play",value:function(){this.isPlaying||this.__originalPlayer__.play()}},{key:"pause",value:function(){this.isPaused||this.__originalPlayer__.pause()}},{key:"seekTo",value:function(e){u(l(t.prototype),"seekTo",this).call(this,e),this.__originalPlayer__.currentTime(e)}},{key:"dispatcherName",get:function(){return t.Name}},{key:"originalPosition",get:function(){return this.__originalPlayer__.currentTime()}},{key:"volume",get:function(){return 100*this.__originalPlayer__.volume()},set:function(e){var t=e/100;t<0&&(t=0),t>1&&(t=1),this.__originalPlayer__.volume(t)}}]),t}();t.default=g},24:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=(n(14),n(4));function a(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=1,h=2,_=3,v=0,g=function(e){function t(e){var n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=l(t).call(this),(n=!r||"object"!=typeof r&&"function"!=typeof r?s(this):r).__originalPlayer__=e.target,n.__originalPlayer__.addEventListener("onStateChange",function(e){switch(n.__invokeMediaStateChangeTrap__(s(n),i.default.StateTimeUpdate),e.data){case d:n.__invokeMediaStateChangeTrap__(s(n),i.default.StatePlaying);break;case h:n.__invokeMediaStateChangeTrap__(s(n),i.default.StatePaused);break;case _:n.__invokeMediaStateChangeTrap__(s(n),i.default.StateSeeking);break;case v:n.__invokeMediaStateChangeTrap__(s(n),i.default.StateFinished)}}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,i.default),f(t,null,[{key:"Name",get:function(){return"sw-media-yt-video"}}]),f(t,[{key:"dispose",value:function(){var e,n=(e=o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:u(l(t.prototype),"dispose",this).call(this),this.__originalPlayer__.destroy();case 2:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function s(e){a(i,r,o,s,u,"next",e)}function u(e){a(i,r,o,s,u,"throw",e)}s(void 0)})});return function(){return n.apply(this,arguments)}}()},{key:"play",value:function(){this.isPlaying||this.__originalPlayer__.playVideo()}},{key:"pause",value:function(){this.isPaused||this.__originalPlayer__.pauseVideo()}},{key:"seekTo",value:function(e){u(l(t.prototype),"seekTo",this).call(this,e),this.__originalPlayer__.seekTo(e/1e3)}},{key:"dispatcherName",get:function(){return t.Name}},{key:"originalPosition",get:function(){return 1e3*this.__originalPlayer__.getCurrentTime()}},{key:"volume",get:function(){return this.__originalPlayer__.getVolume()},set:function(e){var t=e;t<0&&(t=0),t>100&&(t=100),this.__originalPlayer__.setVolume(t)}}]),t}();t.default=g},25:function(e,t,n){"use strict";n.r(t);var r=n(6),o=n(3),i=n(0),a={getClock:function(e){var t=e.player,n=e.accessToken;return e.secretToken,new Promise(function(e,a){var s=[];if(s.push("syntax=camelcase"),i.default.stringIsBlank(n))return a(o.default.createAccessTokenError(t));r.default.getJSON("".concat(i.default.defaultAppServerEndpoint,"/api/v2/stages/").concat(n,"/clock.json?").concat(s.join("&"))).then(function(n){if(200!=n.meta.status)return a(o.default.createError(t,n));e(n.data.attributes.time)},function(e){a(e)})})},getMessage:function(e){var t=e.player,n=e.accessToken;return e.secretToken,new Promise(function(e,a){var s=[];if(s.push("syntax=camelcase"),i.default.stringIsBlank(n))return a(o.default.createAccessTokenError(t));r.default.getJSON("".concat(i.default.defaultAppServerEndpoint,"/api/v2/stages/").concat(n,"/message.json?").concat(s.join("&"))).then(function(n){if(200!=n.meta.status)return a(o.default.createError(t,n));e(n.data)},function(e){a(e)})})},getStage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.player,a=e.accessToken;return e.secretToken,new Promise(function(e,s){var u=null!=t.nodeTimeoutThresholdMs?t.nodeTimeoutThresholdMs:60,l=[];if(l.push("syntax=camelcase"),l.push("node_timeout_threshold_ms=".concat(u)),i.default.stringIsBlank(a))return s(o.default.createAccessTokenError(n));r.default.getJSON("".concat(i.default.defaultAppServerEndpoint,"/api/v2/stages/").concat(a,".json?").concat(l.join("&"))).then(function(t){if(200!=t.meta.status)return s(o.default.createError(n,t));e(t.data)},function(e){s(e)})})},getStageReservation:function(e){return new Promise(function(e,t){})},getStageLog:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.player,a=e.accessToken;return e.secretToken,new Promise(function(e,s){var u=null!=t.nodeTimeoutThresholdMs?t.nodeTimeoutThresholdMs:60,l=null!=t.perSecond?t.perSecond:60,c=null!=t.timeGte?t.timeGte:"",f=null!=t.timeLte?t.timeLte:"",p=[];if(p.push("syntax=camelcase"),p.push("node_timeout_threshold_ms=".concat(u)),p.push("per_sec=".concat(l)),p.push("gte_datetime=".concat(encodeURIComponent(c))),p.push("lte_datetime=".concat(encodeURIComponent(f))),i.default.stringIsBlank(a))return s(o.default.createAccessTokenError(n));r.default.getJSON("".concat(i.default.defaultAppServerEndpoint,"/api/v2/stages/").concat(a,"/histories.json?").concat(p.join("&"))).then(function(t){if(200!=t.meta.status)return s(o.default.createError(n,t));e(t.data)},function(e){s(e)})})},postMessage:function(e,t){var n=e.player,a=e.accessToken,s=e.secretToken;return new Promise(function(e,u){var l={};return i.default.stringIsBlank(a)?u(o.default.createAccessTokenError(n)):i.default.stringIsBlank(s)?u(o.default.createSecretTokenError(n)):(l.syntax="camelcase",l.access_token=a,l.secret_token=s,l.data=t,void r.default.putJSON("".concat(i.default.defaultAppServerEndpoint,"/api/v2/stages/").concat(a,"/message.json"),l).then(function(t){if(200!=t.meta.status)return u(o.default.createError(n,t));e(t.data)},function(e){u(e)}))})},postStage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.player,a=e.accessToken,s=e.secretToken;return new Promise(function(e,u){var l=null!=t.nodeTimeoutThresholdMs?t.nodeTimeoutThresholdMs:60,c={};return i.default.stringIsBlank(a)?u(o.default.createAccessTokenError(n)):i.default.stringIsBlank(s)?u(o.default.createSecretTokenError(n)):(c.syntax="camelcase",c.access_token=a,c.secret_token=s,c.node_timeout_threshold_ms=l,null!=t.preventGlobalClockTimeUpdate&&(c.prevent_global_clock_time_update=t.preventGlobalClockTimeUpdate),null!=t.absoluteGlobalClockTime&&(c.absolute_global_clock_time=t.absoluteGlobalClockTime),null!=t.relativeGlobalClockTime&&(c.relative_global_clock_time=t.relativeGlobalClockTime),null!=t.mediaSourceUrl&&(c.media_source_url=t.mediaSourceUrl),null!=t.stateId&&(c.state_id=t.stateId),null!=t.duration&&(c.duration=t.duration),null!=t.position&&(c.position=t.position),void r.default.putJSON("".concat(i.default.defaultAppServerEndpoint,"/api/v2/stages/").concat(a,".json"),c).then(function(t){if(200!=t.meta.status)return u(o.default.createError(n,t));e(t.data)},function(e){u(e)}))})},postStageReservation:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.player,a=e.accessToken,s=e.secretToken;return new Promise(function(e,u){var l={};return i.default.stringIsBlank(a)?u(o.default.createAccessTokenError(n)):i.default.stringIsBlank(s)?u(o.default.createSecretTokenError(n)):(l.syntax="camelcase",l.access_token=a,l.secret_token=s,null!=t.globalClockTime&&(l.global_clock_time=t.globalClockTime),null!=t.mediaSourceUrl&&(l.media_source_url=t.mediaSourceUrl),null!=t.stateId&&(l.state_id=t.stateId),null!=t.position&&(l.position=t.position),void r.default.postJSON("".concat(i.default.defaultAppServerEndpoint,"/api/v2/stages/").concat(a,"/reservations.json"),l).then(function(t){if(200!=t.meta.status)return u(o.default.createError(n,t));e(t.data)},function(e){u(e)}))})},postStageLog:function(e){return new Promise(function(t,n){var o={};o.stage_id=e.stageId,o.node_id=e.nodeId,o.access_token=e.accessToken,o.secret_token=e.secretToken,o.is_master=e.isMaster,o.referer=i.default.referer,o.user_agent=i.default.userAgent,r.default.postJSON("".concat(i.default.defaultLogServerEndpoint,"/songle-api.stage-logs"),o).then(function(e){t(e)},function(e){n(e)})})},deleteStageReservation:function(e,t){var n=e.player,a=e.accessToken,s=e.secretToken;return new Promise(function(e,u){var l={};return i.default.stringIsBlank(a)?u(o.default.createAccessTokenError(n)):i.default.stringIsBlank(s)?u(o.default.createSecretTokenError(n)):(l.syntax="camelcase",l.access_token=a,l.secret_token=s,void r.default.deleteJSON("".concat(i.default.defaultAppServerEndpoint,"/api/v2/stages/").concat(a,"/reservations/").concat(t,".json"),l).then(function(t){if(200!=t.meta.status)return u(o.default.createError(n,t));e(t.data)},function(e){u(e)}))})}};t.default=a},26:function(e,t,n){"use strict";n.r(t);var r=n(8),o=n(0),i="https://secure-dcdn.cdn.nimg.jp/extplayerv/embed/js/api.js",a={importClass:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(t,n){if(o.default.NNFactoryClass)t(o.default.NNFactoryClass);else{var a=e.rootElement||o.default.global.document.body;o.default.global.onNicoPlayerFactoryReady=function(e){o.default.NNFactoryClass=e||o.default.global.NN},a.appendChild(r.default.createScriptElement(i,{onAbort:function(e){n()},onError:function(e){n()},onLoad:function(e){var n=setInterval(function(){(o.default.NNFactoryClass||o.default.global.NN)&&(o.default.NNFactoryClass=o.default.NNFactoryClass||o.default.global.NN,"0"!=o.default.NNFactoryClass.create&&(clearInterval(n),t(o.default.NNFactoryClass)))},1)}}))}})}};t.default=a},27:function(e,t,n){"use strict";n.r(t);var r=n(8),o=n(0),i="https://www.youtube.com/iframe_api",a={importClass:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(t,n){if(o.default.YTFactoryClass)t(o.default.YTFactoryClass);else{var a=e.rootElement||o.default.global.document.body;o.default.global.onYouTubeIframeAPIReady=function(e){o.default.YTFactoryClass=e||o.default.global.YT},a.appendChild(r.default.createScriptElement(i,{onAbort:function(e){n()},onError:function(e){n()},onLoad:function(e){var n=setInterval(function(){(o.default.YTFactoryClass||o.default.global.YT)&&(o.default.YTFactoryClass=o.default.YTFactoryClass||o.default.global.YT,"0"!=o.default.YTFactoryClass.loaded&&(clearInterval(n),t(o.default.YTFactoryClass)))},1)}}))}})}};t.default=a},28:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=(n(14),n(4)),a=n(22),s=n(23),u=n(24),l=n(8),c=n(26),f=(n(37),n(27)),p=n(9),d=(n(7),n(0));function h(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function _(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){h(i,r,o,a,s,"next",e)}function s(e){h(i,r,o,a,s,"throw",e)}a(void 0)})}}var v="https",g="songle.jp",y="/songs/",m="^nn:\\/\\/([\\w-]+)$",b="n.+watch\\/(.{2}(.+))",k="^yt:\\/\\/([\\w-]+)$",w="y.+watch\\?(.{2}(.+))";function x(){return(x=_(o.a.mark(function e(t,n){var r,a,s,u,l,c=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(r=c.length>2&&void 0!==c[2]?c[2]:{}).showCtrl=null!=r.showCtrl&&r.showCtrl,r.showInfo=null!=r.showInfo&&r.showInfo,r.videoSizeW=null!=r.videoSizeW?r.videoSizeW:i.default.DefaultVideoPlayerSizeW,r.videoSizeH=null!=r.videoSizeH?r.videoSizeH:i.default.DefaultVideoPlayerSizeH,n=d.default.global.decodeURIComponent(n),a=n.match(m),s=n.match(b),u=n.match(k),l=n.match(w),e.t0=!0,e.next=e.t0===!!a?13:e.t0===!!s?17:e.t0===!!u?21:e.t0===!!l?25:29;break;case 13:return r.videoId=null!=r.videoId?r.videoId:a[1],e.next=16,new S(t,n,r);case 16:return e.abrupt("return",e.sent);case 17:return r.videoId=null!=r.videoId?r.videoId:s[1],e.next=20,new S(t,n,r);case 20:return e.abrupt("return",e.sent);case 21:return r.videoId=null!=r.videoId?r.videoId:u[1],e.next=24,new T(t,n,r);case 24:return e.abrupt("return",e.sent);case 25:return r.videoId=null!=r.videoId?r.videoId:l[2],e.next=28,new T(t,n,r);case 28:return e.abrupt("return",e.sent);case 29:return e.next=31,new P(t,n,r);case 31:return e.abrupt("return",e.sent);case 32:case"end":return e.stop()}},e)}))).apply(this,arguments)}function S(e,t){return function(){return _(o.a.mark(function e(t,n){var r,i,a=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=3,p.default.MusicMap.getSong(n);case 3:return i=e.sent,e.abrupt("return",new Promise(function(e){var t=null!=r.rootElement?r.rootElement:d.default.global.document.body;c.default.importClass().then(function(n){n.create(t,r.videoId,{autoplay:!1,defaultNoComment:!0,noController:!r.showCtrl,noHeader:!r.showInfo,noLinkToNiconico:!0,noRelatedVideo:!0,noShare:!0,noTags:!0,width:r.videoSizeW,height:r.videoSizeH,onError:function(e){r.onMediaFactoryError&&r.onMediaFactoryError(e)},onSuccess:function(t){r.onMediaFactoryReady&&r.onMediaFactoryReady(t);var n=new s.default(t);n.sourceUrl=i.attributes.permalink,e(n)}})})}));case 5:case"end":return e.stop()}},e)})).apply(this,arguments)}.apply(this,arguments)}function T(e,t){return function(){return _(o.a.mark(function e(t,n){var r,i,a,s,l,c=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return null!=(r=c.length>2&&void 0!==c[2]?c[2]:{}).rootElement?r.rootElement:d.default.global.document.body,i=d.default.stringIsBlank(r.endpointProtocol)?v:r.endpointProtocol||v,a=d.default.stringIsBlank(r.endpointHost)?g:r.endpointHost||g,s=d.default.stringIsBlank(r.endpointPath)?y:r.endpointPath||y,e.next=7,p.default.MusicMap.getSong(n,{endpointProtocol:i,endpointHost:a,endpointPath:s}).catch(function(e){r.onMediaFactoryError&&r.onMediaFactoryError(e)});case 7:return l=e.sent,e.abrupt("return",new Promise(function(e,t){var o=null!=r.rootElement?r.rootElement:d.default.global.document.body;f.default.importClass().then(function(i){new i.Player(o,{events:{onError:function(e){r.onMediaFactoryError&&r.onMediaFactoryError(e),t(e)},onReady:function(t){r.onMediaFactoryReady&&r.onMediaFactoryReady(t),t.target.setPlaybackQuality("tiny");var o=new u.default(t);o.sourceUrl=l?l.attributes.permalink:n,e(o)}},playerVars:{autohide:"0",autoplay:"0",cc_load_policy:"0",controls:r.showCtrl?"1":"0",disablekb:"1",enablejsapi:"1",fs:"0",hl:"0",html5:"1",iv_load_policy:"3",loop:"0",modestbranding:"1",playsinline:"1",rel:"0",showinfo:r.showInfo?"1":"0",vq:"tiny",start:.01},videoId:r.videoId,width:r.videoSizeW,height:r.videoSizeH})})}));case 9:case"end":return e.stop()}},e)})).apply(this,arguments)}.apply(this,arguments)}function P(e,t){return function(){return _(o.a.mark(function e(t,n){var r,i,s,u,c,f,h=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>2&&void 0!==h[2]?h[2]:{},i=null!=r.rootElement?r.rootElement:d.default.global.document.body,s=d.default.stringIsBlank(r.endpointProtocol)?v:r.endpointProtocol||v,u=d.default.stringIsBlank(r.endpointHost)?g:r.endpointHost||g,c=d.default.stringIsBlank(r.endpointPath)?y:r.endpointPath||y,e.next=7,p.default.MusicMap.getSong(n,{endpointProtocol:s,endpointHost:u,endpointPath:c}).catch(function(e){r.onMediaFactoryError&&r.onMediaFactoryError(e)});case 7:return f=e.sent,e.abrupt("return",new Promise(function(e,t){var n=r.src?r.src:"".concat(s,"://").concat(u).concat(c).concat(f.attributes.code,"/u"),o=l.default.createHTMLAudioElement(n);i.appendChild(o),o.addEventListener("error",function(e){r.onMediaFactoryError&&r.onMediaFactoryError(e),t(e)}),o.addEventListener("loadstart",function(t){r.onMediaFactoryReady&&r.onMediaFactoryReady(t);var n=new a.default(o);n.sourceUrl=f.attributes.permalink,e(n)})}));case 9:case"end":return e.stop()}},e)})).apply(this,arguments)}.apply(this,arguments)}var E={createMedia:function(e,t){return x.apply(this,arguments)}};t.default=E},3:function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object.assign(t,n);return"string"!=typeof e&&e&&e.invokeTrap("error",{data:r}),r}n.r(t);var o={createError:r,createMediaSourceError:function(e){return r(e,{message:"Maybe 'mediaSource' is invalid. please check 'Songle.Player#useMedia' in your code."})},createAccessTokenError:function(e){return r(e,{message:"Maybe 'accessToken' is invalid. please check 'Songle.Player.accessToken' in your code."})},createSecretTokenError:function(e){return r(e,{message:"Maybe 'secretToken' is invalid. please check 'Songle.Player.secretToken' in your code."})}};t.default=o},30:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=n(7);function a(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(0);var u=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__timeoutDone__=!0,n.intervalTime=null!=n.intervalTime?n.intervalTime:this.defaultIntervalTime,this.minIntervalTime>n.intervalTime&&i.default.warn("You can't set less than 'minIntervalTime'"),this.maxIntervalTime<n.intervalTime&&i.default.warn("You can't set more than 'maxIntervalTime'"),this.__songleSyncPlugin__=t,this.intervalTime=n.intervalTime}var t,n;return t=e,(n=[{key:"start",value:function(){var e=this;this.__timeoutDone__&&(this.__timeoutDone__=!1,this.__timeoutId__=setTimeout(function(){try{e.runTask()}catch(e){i.default.error("Worker is aborted.")}e.intervalTime=e.nextIntervalTime,e.__timeoutDone__=!0,e.start()},this.intervalTime))}},{key:"runTask",value:function(){var e,t=(e=o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function s(e){a(i,r,o,s,u,"next",e)}function u(e){a(i,r,o,s,u,"throw",e)}s(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"dispose",value:function(){clearTimeout(this.__timeoutId__),this.__timeoutDone__=!0}},{key:"wait",value:function(e){return new Promise(function(t,n){setTimeout(t,e)})}},{key:"defaultIntervalTime",get:function(){return 0}},{key:"minIntervalTime",get:function(){return 0}},{key:"maxIntervalTime",get:function(){return 0}},{key:"intervalTime",set:function(e){e<this.minIntervalTime&&(e=this.minIntervalTime),e>this.maxIntervalTime&&(e=this.maxIntervalTime),this.__intervalTime__=e},get:function(){return this.__intervalTime__}},{key:"songleSyncPlugin",get:function(){return this.__songleSyncPlugin__}},{key:"nextIntervalTime",get:function(){return this.intervalTime}}])&&s(t.prototype,n),e}();t.default=u},36:function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(e,t,n,r){var o=t&&t.prototype instanceof _?t:_,i=Object.create(o.prototype),a=new E(r||[]);return i._invoke=function(e,t,n){var r=c;return function(o,i){if(r===p)throw new Error("Generator is already running");if(r===d){if("throw"===o)throw i;return M()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===c)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?d:f,u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=d,n.method="throw",n.arg=u.arg)}}}(e,n,a),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var c="suspendedStart",f="suspendedYield",p="executing",d="completed",h={};function _(){}function v(){}function g(){}var y={};y[i]=function(){return this};var m=Object.getPrototypeOf,b=m&&m(m(C([])));b&&b!==n&&r.call(b,i)&&(y=b);var k=g.prototype=_.prototype=Object.create(y);function w(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function x(e){var t;this._invoke=function(n,o){function i(){return new Promise(function(t,i){!function t(n,o,i,a){var s=l(e[n],e,o);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&r.call(c,"__await")?Promise.resolve(c.__await).then(function(e){t("next",e,i,a)},function(e){t("throw",e,i,a)}):Promise.resolve(c).then(function(e){u.value=e,i(u)},function(e){return t("throw",e,i,a)})}a(s.arg)}(n,o,t,i)})}return t=t?t.then(i,i):i()}}function S(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return h;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var o=l(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,h;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,h):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function C(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:M}}function M(){return{value:t,done:!0}}return v.prototype=k.constructor=g,g.constructor=v,g[s]=v.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},w(x.prototype),x.prototype[a]=function(){return this},e.AsyncIterator=x,e.async=function(t,n,r,o){var i=new x(u(t,n,r,o));return e.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},w(k),k[s]="Generator",k[i]=function(){return this},k.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=C,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:C(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),h}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},37:function(e,t,n){"use strict";n.r(t);var r=n(8),o=(n(7),n(0)),i="https://w.soundcloud.com/player/api.js",a={importClass:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(t,n){o.default.ScFactoryClass?t(o.default.ScFactoryClass):(e.rootElement||o.default.global.document.body).appendChild(r.default.createScriptElement(i,{onAbort:function(e){n()},onError:function(e){n()},onLoad:function(e){o.default.ScFactoryClass=o.default.global.SC}}))})}};t.default=a},379:function(e,t,n){"use strict";n.r(t);var r=n(14),o=n(155),i=(n(171),n(4)),a=n(18),s=n(42),u=n(22),l=n(23),c=n(24),f=n(156),p=n(157),d=n(158),h=n(159),_=n(160),v=n(77),g=n(78),y=(n(7),n(0)),m=(n(9),{Player:r.default,SyncPlayer:o.default,Media:{SuperClass:i.default,Headless:s.default,HTMLMediaElement:u.default,NNVideo:l.default,YTVideo:c.default},Plugin:{SuperClass:a.default,Beat:f.default,Chord:p.default,Melody:d.default,Chorus:h.default,Variation:_.default,SongleSync:v.default,SongleWidget:g.default},System:y.default}),b=20;y.default.global.SW=y.default.global.SW||m,y.default.global.Songle=y.default.global.Songle||m,y.default.showDebugLog=!1,y.default.showErrorLog=!0,y.default.showLicense=!0,function e(){setTimeout(function(){y.default.global.SWAPIReady||b<=0||(b--,y.default.global.onSongleWidgetAPIReady&&(y.default.global.onSongleWidgetAPIReady(m),y.default.global.SWAPIReady=!0),y.default.global.onSongleAPIReady&&(y.default.global.onSongleAPIReady(m),y.default.global.SWAPIReady=!0),e())},500)}(),t.default=m},38:function(e,t,n){"use strict";function r(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg",e);for(var r in t)null!=t[r]&&n.setAttribute(o(r),String(t[r]));return n}function o(e){switch(e){case"strokeWidth":e="stroke-width"}return e}n.r(t);var i={createSVGElement:function(e){return r("svg",e)},createGroupElement:function(e){return r("g",e)},createRectElement:function(e){return r("rect",e)},createCircleElement:function(e){return r("circle",e)},createLineElement:function(e){return r("line",e)},createPolygonElement:function(e){return r("polygon",e)}};t.default=i},4:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=n(13),a=n(7),s=n(9),u=n(0);function l(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=!0,_=!1,v=!0,g=!1,y=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,(e=p(t)).call.apply(e,[this].concat(o)))).__stateIsReady__=h,n.__stateIsPlaying__=_,n.__stateIsPaused__=v,n.__stateIsSeeking__=g,n.__duration__=0,n.__seekTimeHistories__=[],n.sourceUrl="",n.__clockUpdateTime__=0,n.__clockAdjustTime__=0,n}var n,r,y;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,i.default),n=t,y=[{key:"Name",get:function(){return"media"}},{key:"Type",get:function(){return"media"}},{key:"DefaultIsReady",get:function(){return h}},{key:"DefaultIsPlaying",get:function(){return _}},{key:"DefaultIsPaused",get:function(){return v}},{key:"DefaultIsSeeking",get:function(){return g}},{key:"StateReady",get:function(){return 0}},{key:"StatePlaying",get:function(){return 1}},{key:"StatePaused",get:function(){return 2}},{key:"StateSeeking",get:function(){return 3}},{key:"StateFinished",get:function(){return 4}},{key:"StateTimeUpdate",get:function(){return 5}}],(r=[{key:"initialize",value:function(){var e,n=(e=o.a.mark(function e(n){var r,i,l,c,d,h=this,_=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=_.length>1&&void 0!==_[1]?_[1]:{},f(p(t.prototype),"initialize",this).call(this,n),i=0,l=0,c=0,this.on("mediaStateChange",function(e){switch(e.data.mediaStateId){case t.StatePlaying:a.default.debug("Media state change to 'playing'"),l=u.default.currentTimeToMilliseconds,c=0==i?0:l-i,h.__seekTimeHistories__.push(c),h.player.invokeTrap("mediaSeek",{target:e.target,data:{position:h.originalPosition,seekTime:c}}),i=0,l=0,c=0,h.isPaused&&h.player.invokeTrap("mediaPlay",{target:e.target}),h.__setMediaState__(t.StatePlaying);break;case t.StatePaused:a.default.debug("Media state change to 'paused'"),l=u.default.currentTimeToMilliseconds,c=0==i?0:l-i,h.__seekTimeHistories__.push(c),h.player.invokeTrap("mediaSeek",{target:e.target,data:{position:h.originalPosition,seekTime:c}}),i=0,l=0,c=0,h.isPaused||h.player.invokeTrap("mediaPause",{target:e.target}),h.__setMediaState__(t.StatePaused);break;case t.StateSeeking:a.default.debug("Media state change to 'seeking'"),i=u.default.currentTimeToMilliseconds,h.__setMediaState__(t.StateSeeking);break;case t.StateFinished:a.default.debug("Media state change to 'finished'"),h.player.invokeTrap("mediaFinish",{target:e.target}),h.__setMediaState__(t.StatePaused);break;case t.StateTimeUpdate:h.__adjustMediaPosition__();break;default:a.default.debug("Unknown media state (ID: "+e.data.mediaStateId+")")}}),this.on("mediaReady",function(e){a.default.debug("Invoke 'mediaReady'"),h.player.invokeTrap("ready",e)}),this.on("mediaPlay",function(e){a.default.debug("Invoke 'mediaPlay'"),h.player.invokeTrap("play",e)}),this.on("mediaPause",function(e){a.default.debug("Invoke 'mediaPause'"),h.player.invokeTrap("pause",e)}),this.on("mediaSeek",function(e){a.default.debug("Invoke 'mediaSeek' (seek time: "+e.data.seekTime+" [ms])")}),this.on("mediaFinish",function(e){a.default.debug("Invoke 'mediaFinish'"),h.player.invokeTrap("finish",e),h.__clockUpdateTime__=u.default.currentTimeToMilliseconds,h.__clockAdjustTime__=0}),this.on("seek",function(e){h.seekTo(e.data.position)}),e.next=14,s.default.MusicMap.getSong(this.player,{endpointProtocol:r.endpointProtocol,endpointHost:r.endpointHost,endpointPath:r.endpointPath});case 14:d=e.sent,this.sourceUrl=d.attributes.permalink,this.__duration__=d.attributes.durationTimeMs,this.__name__=d.attributes.name,this.__artistName__=d.relationships.artist.data.attributes.name;case 19:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){l(i,r,o,a,s,"next",e)}function s(e){l(i,r,o,a,s,"throw",e)}a(void 0)})});return function(e){return n.apply(this,arguments)}}()},{key:"play",value:function(){}},{key:"pause",value:function(){}},{key:"seekTo",value:function(e){this.__clockUpdateTime__=u.default.currentTimeToMilliseconds,this.__clockAdjustTime__=e}},{key:"__adjustMediaPosition__",value:function(){this.__clockUpdateTime__=u.default.currentTimeToMilliseconds,this.__clockAdjustTime__=this.originalPosition}},{key:"__invokeMediaStateChangeTrap__",value:function(e,t){this.player.invokeTrap("mediaStateChange",{target:e,data:{mediaStateId:t,position:this.originalPosition}})}},{key:"__setMediaState__",value:function(e){switch(e){case t.StatePlaying:this.__stateIsReady__=!1,this.__stateIsPlaying__=!0,this.__stateIsPaused__=!1,this.__stateIsSeeking__=!1;break;case t.StatePaused:this.__stateIsReady__=!1,this.__stateIsPlaying__=!1,this.__stateIsPaused__=!0,this.__stateIsSeeking__=!1;break;case t.StateSeeking:this.__stateIsReady__=!1,this.__stateIsSeeking__=!0}}},{key:"dispatcherName",get:function(){return t.Name}},{key:"dispatcherType",get:function(){return t.Type}},{key:"name",get:function(){return this.__name__}},{key:"artistName",get:function(){return this.__artistName__}},{key:"isReady",get:function(){return this.__stateIsReady__}},{key:"isPlaying",get:function(){return this.__stateIsPlaying__}},{key:"isPaused",get:function(){return this.__stateIsPaused__}},{key:"isSeeking",get:function(){return this.__stateIsSeeking__}},{key:"medianSeekTime",get:function(){var e=this.__seekTimeHistories__.sort(function(e,t){return e-t});return Math.abs(e[Math.floor(e.length/2)]||0)}},{key:"duration",get:function(){return this.__duration__}},{key:"originalDuration",get:function(){return this.duration}},{key:"position",get:function(){var e=u.default.currentTimeToMilliseconds-this.__clockUpdateTime__,t=this.__clockAdjustTime__+(this.isPlaying?e:0);return t<0&&(t=0),t>this.duration&&(t=this.duration),t}},{key:"originalPosition",get:function(){return this.position}},{key:"loadedRatio",get:function(){return 0}},{key:"playedRatio",get:function(){return 0==this.duration?0:this.position/this.duration}},{key:"volume",get:function(){return 0},set:function(e){}}])&&c(n.prototype,r),y&&c(n,y),t}();y.DefaultVideoPlayerSizeW=256,y.DefaultVideoPlayerSizeH=144;var m=y;t.default=m},42:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=n(4);function a(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n(14);var d=function(e){function t(e){var n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=l(t).call(this),(n=!r||"object"!=typeof r&&"function"!=typeof r?s(this):r).sourceUrl=e,n.__intervalId__=setInterval(function(){n.position>=n.duration&&n.__invokeMediaStateChangeTrap__(s(n),i.default.StateFinished)},1e3),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,i.default),f(t,null,[{key:"Name",get:function(){return"sw-media-headless"}}]),f(t,[{key:"dispose",value:function(){var e,n=(e=o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:u(l(t.prototype),"dispose",this).call(this),clearInterval(this.__intervalId__);case 2:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function s(e){a(i,r,o,s,u,"next",e)}function u(e){a(i,r,o,s,u,"throw",e)}s(void 0)})});return function(){return n.apply(this,arguments)}}()},{key:"play",value:function(){this.__invokeMediaStateChangeTrap__(this,i.default.StatePlaying),this.__invokeMediaStateChangeTrap__(this,i.default.StateTimeUpdate)}},{key:"pause",value:function(){this.__invokeMediaStateChangeTrap__(this,i.default.StatePaused),this.__invokeMediaStateChangeTrap__(this,i.default.StateTimeUpdate)}},{key:"seekTo",value:function(e){switch(u(l(t.prototype),"seekTo",this).call(this,e),!0){case this.isPlaying:this.__invokeMediaStateChangeTrap__(this,i.default.StateSeeking),this.__invokeMediaStateChangeTrap__(this,i.default.StatePlaying),this.__invokeMediaStateChangeTrap__(this,i.default.StateTimeUpdate);break;case this.isPaused:this.__invokeMediaStateChangeTrap__(this,i.default.StateSeeking),this.__invokeMediaStateChangeTrap__(this,i.default.StatePaused),this.__invokeMediaStateChangeTrap__(this,i.default.StateTimeUpdate);break;case this.isSeeking:}}},{key:"dispatcherName",get:function(){return t.Name}}]),t}();t.default=d},43:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__player__=t}var t,n;return t=e,(n=[{key:"dispatch",value:function(e,t,n){}},{key:"find",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null!=t.offset?t.offset:0,r=this.__player__.position-250+-1*n,o=this.__player__.position+0+-1*n;this.dispatch(r,o,e)}},{key:"reset",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}}])&&r(t.prototype,n),e}();t.default=o},45:function(e,t,n){"use strict";n.r(t);var r=500;function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return e.musicMap.chorus&&e.musicMap.chorus.forEach(function(e){t.chorusOnly&&!e.isChorus||(n=n.concat(e.items).sort(function(e,t){return e.startTimeMs-t.startTimeMs}))}),n}var i={findPrevBar:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null!=t.startTimeMs?t.startTimeMs:e.position,o=e.musicMap.beats||[];o=o.reverse();for(var i=0;i<o.length;++i)if(1==o[i].position&&n>o[i].startTimeMs+r)return o[i];return o[0]},findNextBar:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null!=t.startTimeMs?t.startTimeMs:e.position,o=e.musicMap.beats||[],i=0;i<o.length;++i)if(1==o[i].position&&n<o[i].startTimeMs-r)return o[i];return o[0]},findPrevRepeatedSectionItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null!=t.startTimeMs?t.startTimeMs:e.position,i=o(e,t);i=i.reverse();for(var a=0;a<i.length;++a)if(n>i[a].startTimeMs+r)return i[a];return i[0]},findNextRepeatedSectionItem:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null!=t.startTimeMs?t.startTimeMs:e.position,i=o(e,t),a=0;a<i.length;++a)if(n<i[a].startTimeMs-r)return i[a];return i[0]}};t.default=i},46:function(e,t,n){"use strict";n.r(t);var r=n(18);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,i(t).call(this))).endpointProtocol=null!=n.endpointProtocol?n.endpointProtocol:"",e.endpointHost=null!=n.endpointHost?n.endpointHost:"",e.endpointPath=null!=n.endpointPath?n.endpointPath:"",e.revisionId=null!=n.revisionId?n.revisionId:0,e.offset=null!=n.offset?n.offset:0,e.pollingInterval=null!=n.pollingInterval?n.pollingInterval:50,e}var n,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,r.default),n=t,(s=[{key:"__invokeTrap__",value:function(e,t){e.trap({target:this,type:e.name,data:t})}}])&&o(n.prototype,s),t}();t.default=s},6:function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(function(r,o){var i=null!=n.method?n.method:"GET",a=null!=n.responseType?n.responseType:"",s=new XMLHttpRequest;switch(s.addEventListener("abort",function(e){o(s)},!1),s.addEventListener("error",function(e){o(s)},!1),s.addEventListener("load",function(e){r(s)},!1),s.open(i,e,!0),s.responseType=a,i){case"GET":s.send();break;default:s.setRequestHeader("Content-Type","application/json"),s.send(JSON.stringify(t))}})}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(function(o,a){r(e,t,{method:n.method,responseType:n.responseType}).then(function(e){var t=i(e);o(t)},function(e){var t=i(e);a(t)})})}function i(e){var t=e.responseText||e.response||"null";return JSON.parse(t)}n.r(t);var a={ajax:r,ajaxJSON:o,getJSON:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.method="GET",o(e,null,t)},postJSON:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.method="POST",o(e,t,n)},putJSON:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.method="PUT",o(e,t,n)},deleteJSON:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.method="DELETE",o(e,t,n)}};t.default=a},64:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=n(30),a=(n(42),n(9)),s=n(0);function u(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function l(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){u(i,r,o,a,s,"next",e)}function s(e){u(i,r,o,a,s,"throw",e)}a(void 0)})}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,(e=f(t)).call.apply(e,[this].concat(o)))).__histories__=[],n}var n,r,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,i.default),n=t,u=[{key:"DefaultIntervalTime",get:function(){return 2500}},{key:"MinIntervalTime",get:function(){return 1e3}},{key:"MaxIntervalTime",get:function(){return 3e5}}],(r=[{key:"runTask",value:function(){var e=l(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.update();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=l(o.a.mark(function e(){var t,n,r,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=0,n=0,r=0,i=0;case 4:if(!(i<3)){e.next=16;break}return e.next=7,this.wait(50);case 7:return n=s.default.currentTimeToMilliseconds,e.next=10,a.default.SongleSync.getClock(this.songleSyncPlugin);case 10:t=e.sent,r=s.default.currentTimeToMilliseconds,this.__histories__.push(t-(n+r)/2);case 13:++i,e.next=4;break;case 16:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"__random__",value:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)}},{key:"defaultIntervalTime",get:function(){return t.DefaultIntervalTime}},{key:"minIntervalTime",get:function(){return t.MinIntervalTime}},{key:"maxIntervalTime",get:function(){return t.MaxIntervalTime}},{key:"nextIntervalTime",get:function(){return Math.min(2*this.intervalTime,this.maxIntervalTime)+this.__random__(0,1e3)}},{key:"globalClockTimeOffset",get:function(){return this.__histories__.sort(function(e,t){return e-t})[Math.floor(this.__histories__.length/2)]}}])&&c(n.prototype,r),u&&c(n,u),t}();t.default=d},65:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=n(30),a=(n(42),n(7));function s(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n(9),n(0);var p=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,(e=c(t)).call.apply(e,[this].concat(o)))).__dones__=[],n}var n,r,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,i.default),n=t,p=[{key:"DefaultIntervalTime",get:function(){return 100}},{key:"MinIntervalTime",get:function(){return 100}},{key:"MaxIntervalTime",get:function(){return 6e4}}],(r=[{key:"runTask",value:function(){var e,t=(e=o.a.mark(function e(){var t=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.songleSyncPlugin.reservations.forEach(function(e){var n=e.globalClockTime-t.songleSyncPlugin.globalClockTime;if(!(-1!=t.__dones__.indexOf(e.id)||n>0||isNaN(n))){switch(t.songleSyncPlugin.stageWorker.__position__=0,t.songleSyncPlugin.stageWorker.__globalClockTime__=e.globalClockTime,t.songleSyncPlugin.stageWorker.__stateId__=e.stateId,e.stateId){case 1:if(t.songleSyncPlugin.isMaster&&t.songleSyncPlugin.__sync__({stateId:1,position:0}),t.songleSyncPlugin.player.isPlaying)return;t.songleSyncPlugin.player.media.play();break;case 2:if(t.songleSyncPlugin.isMaster&&t.songleSyncPlugin.__sync__({stateId:2,position:0}),t.songleSyncPlugin.player.isReady||t.songleSyncPlugin.player.isPaused)return;t.songleSyncPlugin.player.media.pause();break;default:if(t.songleSyncPlugin.isMaster&&t.songleSyncPlugin.__sync__({stateId:2,position:0}),t.songleSyncPlugin.player.isReady||t.songleSyncPlugin.player.isPaused)return;t.songleSyncPlugin.player.media.pause(),a.default.warn("Maybe 'SongleSyncPlugin.stageWorker.stateId' is broken.")}t.__dones__.push(e.id)}});case 1:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){s(i,r,o,a,u,"next",e)}function u(e){s(i,r,o,a,u,"throw",e)}a(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"dispose",value:function(){l(c(t.prototype),"dispose",this).call(this),this.__dones__=[]}},{key:"defaultIntervalTime",get:function(){return t.DefaultIntervalTime}},{key:"minIntervalTime",get:function(){return t.MinIntervalTime}},{key:"maxIntervalTime",get:function(){return t.MaxIntervalTime}}])&&u(n.prototype,r),p&&u(n,p),t}();t.default=p},66:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=n(30),a=(n(42),n(7),n(9));function s(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n(0);var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,l(t).apply(this,arguments))}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,i.default),n=t,f=[{key:"DefaultIntervalTime",get:function(){return 3e4}},{key:"MinIntervalTime",get:function(){return 15e3}},{key:"MaxIntervalTime",get:function(){return 6e4}}],(r=[{key:"runTask",value:function(){var e,t=(e=o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.SongleSync.postStageLog(this.songleSyncPlugin);case 2:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){s(i,r,o,a,u,"next",e)}function u(e){s(i,r,o,a,u,"throw",e)}a(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"defaultIntervalTime",get:function(){return t.DefaultIntervalTime}},{key:"minIntervalTime",get:function(){return t.MinIntervalTime}},{key:"maxIntervalTime",get:function(){return t.MaxIntervalTime}}])&&u(n.prototype,r),f&&u(n,f),t}();t.default=f},67:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=n(30),a=(n(42),n(22),n(23),n(24),n(7));function s(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function u(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){s(i,r,o,a,u,"next",e)}function u(e){s(i,r,o,a,u,"throw",e)}a(void 0)})}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n(9),n(0);var p=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,(e=c(t)).call.apply(e,[this].concat(o)))).__integralOffsetTime__=0,n}var n,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,i.default),n=t,s=[{key:"DefaultIntervalTime",get:function(){return 1e3}},{key:"MinIntervalTime",get:function(){return 1e3}},{key:"MaxIntervalTime",get:function(){return 6e4}}],(r=[{key:"runTask",value:function(){var e=u(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.update();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=u(o.a.mark(function e(){var t,n,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.songleSyncPlugin.player,n=t.position-this.songleSyncPlugin.globalPosition,t.isPlaying&&!isNaN(n)){e.next=4;break}return e.abrupt("return");case 4:a.default.debug("currentOffsetTime: ".concat(n)),(r=Math.abs(n))<1e3&&(this.__integralOffsetTime__+=n),n<-50?(r>1e3&&(this.__integralOffsetTime__=0),a.default.debug("integralOffsetTime: ".concat(this.__integralOffsetTime__)),t.media.seekTo(this.songleSyncPlugin.globalPosition-this.__integralOffsetTime__)):n>50&&(r>1e3?this.__integralOffsetTime__=0:this.songleSyncPlugin.isMaster||(t.media.pause(),setTimeout(function(){return t.media.play()},Math.min(100,r))),a.default.debug("integralOffsetTime: ".concat(this.__integralOffsetTime__)),t.media.seekTo(this.songleSyncPlugin.globalPosition-this.__integralOffsetTime__));case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"defaultIntervalTime",get:function(){return t.DefaultIntervalTime}},{key:"minIntervalTime",get:function(){return t.MinIntervalTime}},{key:"maxIntervalTime",get:function(){return t.MaxIntervalTime}}])&&l(n.prototype,r),s&&l(n,s),t}();t.default=p},68:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=n(30),a=(n(42),n(7)),s=n(9),u=n(0);function l(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){l(i,r,o,a,s,"next",e)}function s(e){l(i,r,o,a,s,"throw",e)}a(void 0)})}}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,(e=p(t)).call.apply(e,[this].concat(o)))).__globalClockTime__=0,n.__reservations__=[],n}var n,r,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,i.default),n=t,l=[{key:"DefaultIntervalTime",get:function(){return 2500}},{key:"MinIntervalTime",get:function(){return 1e3}},{key:"MaxIntervalTime",get:function(){return 6e4}}],(r=[{key:"runTask",value:function(){var e=c(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,s.default.SongleSync.getStage(this.songleSyncPlugin);case 3:e.t1=e.sent,e.t0.update.call(e.t0,e.t1);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=c(o.a.mark(function e(t){var n,r=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.attributes,Promise.resolve().then(function(){n.activeNodeCount>r.__activeNodeCount__&&r.__invokeNodeEnter__(n),n.activeNodeCount<r.__activeNodeCount__&&r.__invokeNodeLeave__(n),n.activeNodeCount!=r.__activeNodeCount__&&r.__invokeNodeChange__(n),n.message!=r.__message__&&r.__invokeMessage__(n),r.__stageId__=t.id,r.__activeNodeCount__=n.activeNodeCount,r.__masterNodeCount__=n.masterNodeCount,r.__globalClockTime__=n.globalClockTime,r.__duration__=n.duration,r.__position__=n.position,r.__message__=n.message,r.__reservations__.forEach(function(e){n.reservations.some(function(t){return t.id==e.id})||r.__invokeReservationRemove__(e)}),n.reservations.forEach(function(e){r.__reservations__.some(function(t){return t.id==e.id})||r.__invokeReservationCreate__(e)}),r.__reservations__=n.reservations}).then(function(){return new Promise(function(e,t){if(r.songleSyncPlugin.player.media&&r.songleSyncPlugin.player.media.sourceUrl==n.mediaSourceUrl)e();else{if(u.default.stringIsBlank(n.mediaSourceUrl))return;r.__invokeMediaChange__(n)}})}).then(function(){switch(n.stateId!=r.__stateId__&&(r.__invokeStateChange__(n),r.__stateId__=n.stateId),n.stateId){case 1:if(r.songleSyncPlugin.player.isPlaying)return;r.songleSyncPlugin.player.media.play();break;case 2:if(r.songleSyncPlugin.player.isReady||r.songleSyncPlugin.player.isPaused)return;r.songleSyncPlugin.player.media.pause();break;default:if(r.songleSyncPlugin.player.isReady||r.songleSyncPlugin.player.isPaused)return;r.songleSyncPlugin.player.media.pause(),a.default.warn("Maybe 'SongleSyncPlugin.stageWorker.stateId' is broken.")}});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"__invokeReservationCreate__",value:function(e){this.songleSyncPlugin.player.invokeTrap("songleSyncReservationCreate",{target:this.songleSyncPlugin,data:{reservation:e}})}},{key:"__invokeReservationUpdate__",value:function(e){this.songleSyncPlugin.player.invokeTrap("songleSyncReservationUpdate",{target:this.songleSyncPlugin,data:{reservation:e}})}},{key:"__invokeReservationRemove__",value:function(e){this.songleSyncPlugin.player.invokeTrap("songleSyncReservationRemove",{target:this.songleSyncPlugin,data:{reservation:e}})}},{key:"__invokeNodeChange__",value:function(e){this.songleSyncPlugin.player.invokeTrap("songleSyncNodeChange",{target:this.songleSyncPlugin,data:{activeNodeCount:e.activeNodeCount,masterNodeCount:e.masterNodeCount}})}},{key:"__invokeNodeEnter__",value:function(e){this.songleSyncPlugin.player.invokeTrap("songleSyncNodeEnter",{target:this.songleSyncPlugin,data:{activeNodeCount:e.activeNodeCount,masterNodeCount:e.masterNodeCount}})}},{key:"__invokeNodeLeave__",value:function(e){this.songleSyncPlugin.player.invokeTrap("songleSyncNodeLeave",{target:this.songleSyncPlugin,data:{activeNodeCount:e.activeNodeCount,masterNodeCount:e.masterNodeCount}})}},{key:"__invokeMessage__",value:function(e){this.songleSyncPlugin.player.invokeTrap("songleSyncMessage",{target:this.songleSyncPlugin,data:{message:e.message}})}},{key:"__invokeMediaChange__",value:function(e){this.songleSyncPlugin.player.invokeTrap("songleSyncMediaChange",{target:this.songleSyncPlugin,data:{mediaSourceUrl:e.mediaSourceUrl}})}},{key:"__invokeStateChange__",value:function(e){this.songleSyncPlugin.player.invokeTrap("songleSyncStateChange",{target:this.songleSyncPlugin,data:{stateId:e.stateId}})}},{key:"defaultIntervalTime",get:function(){return t.DefaultIntervalTime}},{key:"minIntervalTime",get:function(){return t.MinIntervalTime}},{key:"maxIntervalTime",get:function(){return t.MaxIntervalTime}}])&&f(n.prototype,r),l&&f(n,l),t}();t.default=h},69:function(e,t,n){"use strict";n.r(t);var r=n(7),o=n(0);function i(e){try{return o.default.isStandalone?null:o.default.global.localStorage.getItem(e)}catch(e){return r.default.error(e),null}}function a(e,t){try{return o.default.isStandalone?null:o.default.global.localStorage.setItem(e,t)}catch(e){return r.default.error(e),null}}var s={fetch:function(e,t){var n=i(e)||t;return a(e,n),n},get:i,set:a};t.default=s},7:function(e,t,n){"use strict";n.r(t);var r=n(0);function o(e,t){console.log((r.default.isStandalone?"":"%c")+e,r.default.isStandalone?"":t)}var i={debug:function(e){r.default.showDebugLog&&o("[SW debug] "+e,"color:#000000;")},warn:function(e){r.default.showErrorLog&&o("[SW warn] "+e,"color:#ff8822;")},error:function(e){r.default.showErrorLog&&o("[SW error] "+e,"color:#ff2222;")}};t.default=i},70:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=n(30);function a(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n(42),n(7),n(9),n(0);var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,u(t).apply(this,arguments))}var n,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,i.default),n=t,c=[{key:"DefaultIntervalTime",get:function(){return 100}},{key:"MinIntervalTime",get:function(){return 100}},{key:"MaxIntervalTime",get:function(){return 6e4}}],(r=[{key:"runTask",value:function(){var e,t=(e=o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.songleSyncPlugin.stageWorker.__stateId__,e.next=1===e.t0?3:2===e.t0?7:11;break;case 3:if(!this.songleSyncPlugin.player.isPlaying){e.next=5;break}return e.abrupt("return");case 5:return this.songleSyncPlugin.player.media.play(),e.abrupt("break",11);case 7:if(!this.songleSyncPlugin.player.isReady&&!this.songleSyncPlugin.player.isPaused){e.next=9;break}return e.abrupt("return");case 9:return this.songleSyncPlugin.player.media.pause(),e.abrupt("break",11);case 11:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function s(e){a(i,r,o,s,u,"next",e)}function u(e){a(i,r,o,s,u,"throw",e)}s(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"defaultIntervalTime",get:function(){return t.DefaultIntervalTime}},{key:"minIntervalTime",get:function(){return t.MinIntervalTime}},{key:"maxIntervalTime",get:function(){return t.MaxIntervalTime}}])&&s(n.prototype,r),c&&s(n,c),t}();t.default=c},77:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=(n(14),n(18)),a=n(9),s=n(0),u=n(64),l=n(65),c=n(66),f=n(67),p=n(68),d=n(69),h=n(84),_=n.n(h),v=n(7),g=n(42),y=n(70);function m(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function b(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){m(i,r,o,a,s,"next",e)}function s(e){m(i,r,o,a,s,"throw",e)}a(void 0)})}}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t,n){return(w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=x(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t,n){return t&&S(e.prototype,t),n&&S(e,n),e}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var E=60,C=function(e){function t(){var e,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=x(t).call(this),(e=!n||"object"!=typeof n&&"function"!=typeof n?k(this):n).__globalPositionOffset__=0,e.endpointProtocol=null!=r.endpointProtocol?r.endpointProtocol:"",e.endpointHost=null!=r.endpointHost?r.endpointHost:"",e.endpointPath=null!=r.endpointPath?r.endpointPath:"",e.__logWorker__=new c.default(k(e),{intervalTime:r.logWorkerIntervalTime}),e.__clockWorker__=new u.default(k(e),{intervalTime:r.clockWorkerIntervalTime}),e.__stageWorker__=new p.default(k(e),{intervalTime:r.stageWorkerIntervalTime}),e.__mediaWorker__=new f.default(k(e),{intervalTime:r.mediaWorkerIntervalTime}),e.__reservationWorker__=new l.default(k(e),{intervalTime:r.reservationWorkerIntervalTime}),e.__stateWorker__=new y.default(k(e),{intervalTime:r.stateWorkerIntervalTime}),e.nodeTimeoutThreshold=null!=r.nodeTimeoutThreshold?r.nodeTimeoutThreshold:E;var o=!1;return function t(){setTimeout(function(){null==e.player.media&&(o||(e.initialize(e.player),o=!0),e.stageWorker.runTask(),t())},1e3)}(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,i.default),T(t,null,[{key:"Name",get:function(){return"sw-plugin-songle-sync"}},{key:"DefaultNodeTimeoutThreshold",get:function(){return E}},{key:"MinNodeTimeoutThreshold",get:function(){return 15}},{key:"MaxNodeTimeoutThreshold",get:function(){return 3600}},{key:"StatePlaying",get:function(){return 1}},{key:"StateStopped",get:function(){return 2}}]),T(t,[{key:"initialize",value:function(){var e=b(o.a.mark(function e(n){var r=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:w(x(t.prototype),"initialize",this).call(this,n),s.default.global.Object.defineProperties(n,{isMaster:{configurable:!0,get:function(){return r.isMaster}},isSlave:{configurable:!0,get:function(){return r.isSlave}},message:{configurable:!0,get:function(){return r.__message__},set:function(e){r.__message__=e,a.default.SongleSync.postMessage(r,r.__message__)}},reservations:{configurable:!0,get:function(){return r.reservations}}}),n.play=function(){r.__play__()},n.pause=function(){r.__pause__()},n.stop=function(){r.__stop__()},n.seekTo=function(e){r.__seekTo__(e)},n.sync=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.__sync__(e)},this.on("ready",function(e){r.stateWorker.dispose(),r.reservationWorker.dispose(),r.mediaWorker.dispose(),r.stageWorker.dispose(),r.clockWorker.dispose(),r.logWorker.dispose(),Promise.resolve().then(b(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.isMaster&&a.default.SongleSync.postStage(r,{preventGlobalClockTimeUpdate:!0,mediaSourceUrl:r.player.media.sourceUrl});case 1:case"end":return e.stop()}},e)}))).then(function(){return r.logWorker.runTask()}).then(function(){return r.clockWorker.runTask()}).then(function(){return r.stageWorker.runTask()}).then(function(){return r.mediaWorker.runTask()}).then(function(){return r.reservationWorker.runTask()}).then(function(){return r.stateWorker.runTask()}).then(function(){r.logWorker.start(),r.clockWorker.start(),r.stageWorker.start(),r.mediaWorker.start(),r.reservationWorker.start(),r.stateWorker.start()})}),this.on("play",function(e){r.__sync__({preventGlobalClockTimeUpdate:!0,stateId:1})}),this.on("pause",function(e){r.__sync__({preventGlobalClockTimeUpdate:!0,stateId:2})}),this.on("finish",function(e){r.stageWorker.__stageId__=t.StateStopped}),this.on("songleSyncNodeChange",function(e){v.default.debug("Invoked '".concat(e.type,"' (active: ").concat(e.data.activeNodeCount,")"))}),this.on("songleSyncNodeEnter",function(e){v.default.debug("Invoked '".concat(e.type,"' (active: ").concat(e.data.activeNodeCount,")"))}),this.on("songleSyncNodeLeave",function(e){v.default.debug("Invoked '".concat(e.type,"' (active: ").concat(e.data.activeNodeCount,")"))}),this.on("songleSyncReservationCreate",function(e){v.default.debug("Invoked '".concat(e.type,"' (ID: ").concat(e.data.reservation.id,")"))}),this.on("songleSyncReservationUpdate",function(e){v.default.debug("Invoked '".concat(e.type,"' (ID: ").concat(e.data.reservation.id,")"))}),this.on("songleSyncReservationRemove",function(e){v.default.debug("Invoked '".concat(e.type,"' (ID: ").concat(e.data.reservation.id,")"))}),this.on("songleSyncMessage",function(e){v.default.debug("Invoked '".concat(e.type,"'")),r.__message__=e.data.message}),this.on("songleSyncMediaChange",function(e){v.default.debug("Invoked '".concat(e.type,"'")),r.player.useMedia(r.player.mediaElement?e.data.mediaSourceUrl:new g.default(e.data.mediaSourceUrl),{endpointProtocol:r.endpointProtocol,endpointHost:r.endpointHost,endpointPath:r.endpointPath})}),this.on("songleSyncStateChange",function(e){v.default.debug("Invoked '".concat(e.type,"' (state: ").concat(e.data.stateId,")"))});case 20:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){var e=b(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:null!=this.stateWorker&&this.stateWorker.dispose(),null!=this.reservationWorker&&this.reservationWorker.dispose(),null!=this.mediaWorker&&this.mediaWorker.dispose(),null!=this.stageWorker&&this.stageWorker.dispose(),null!=this.clockWorker&&this.clockWorker.dispose(),null!=this.logWorker&&this.logWorker.dispose(),w(x(t.prototype),"dispose",this).call(this);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"__play__",value:function(){var e=b(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.__sync__({stateId:1,position:this.globalPosition});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"__pause__",value:function(){var e=b(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.__sync__({stateId:2,position:this.globalPosition});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"__stop__",value:function(){var e=b(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.__sync__({stateId:2,position:0});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"__seekTo__",value:function(){var e=b(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.__sync__({stateId:this.player.isPlaying?1:2,position:t});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"__sync__",value:function(){var e=b(o.a.mark(function e(){var t,n,r=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:{},!this.isSlave){e.next=3;break}return e.abrupt("return");case 3:return null==t.mediaSourceUrl&&(t.mediaSourceUrl=this.player.media.sourceUrl),null==t.duration&&(t.duration=this.player.duration),e.next=7,a.default.SongleSync.postStage(this,t);case 7:n=e.sent,this.__globalPositionOffset__=0,this.stageWorker.update(n),this.mediaWorker.update();case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"dispatcherName",get:function(){return t.Name}},{key:"logWorker",get:function(){return this.__logWorker__}},{key:"clockWorker",get:function(){return this.__clockWorker__}},{key:"mediaWorker",get:function(){return this.__mediaWorker__}},{key:"stageWorker",get:function(){return this.__stageWorker__}},{key:"reservationWorker",get:function(){return this.__reservationWorker__}},{key:"stateWorker",get:function(){return this.__stateWorker__}},{key:"stageId",get:function(){return this.stageWorker.__stageId__}},{key:"stageActiveNodeCount",get:function(){return this.stageWorker.__activeNodeCount__}},{key:"stageMasterNodeCount",get:function(){return this.stageWorker.__masterNodeCount__}},{key:"nodeId",get:function(){return d.default.fetch("".concat(t.Name,".nodeId"),_()())}},{key:"accessToken",get:function(){return this.player.accessToken}},{key:"secretToken",get:function(){return this.player.secretToken}},{key:"isMaster",get:function(){return!s.default.stringIsBlank(this.secretToken)}},{key:"isSlave",get:function(){return!!s.default.stringIsBlank(this.secretToken)}},{key:"nodeTimeoutThreshold",set:function(e){15>e&&(v.default.warn("You can't set less than 'SW.Plugin.SongleSync.MinNodeTimeoutThreshold'"),e=15),3600<e&&(v.default.warn("You can't set more than 'SW.Plugin.SongleSync.MaxNodeTimeoutThreshold'"),e=3600),this.__nodeTimeoutThreshold__=e},get:function(){return this.__nodeTimeoutThreshold__}},{key:"globalClockTime",get:function(){return s.default.currentTimeToMilliseconds+this.clockWorker.globalClockTimeOffset}},{key:"globalPosition",get:function(){var e=this.globalClockTime-this.stageWorker.__globalClockTime__,t=this.stageWorker.__position__+(this.player.isPlaying?e:0)+this.__globalPositionOffset__;return t<0&&(t=0),t>this.player.duration&&(t=this.player.duration),t}},{key:"globalPositionOffset",set:function(e){this.__globalPositionOffset__=e,this.player.media.seekTo(this.globalPosition)},get:function(){return this.__globalPositionOffset__}},{key:"reservations",get:function(){return this.stageWorker.__reservations__}}]),t}();t.default=C},78:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=n(18),a=n(8),s=n(7),u=n(38),l=n(0);function c(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function f(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){c(i,r,o,a,s,"next",e)}function s(e){c(i,r,o,a,s,"throw",e)}a(void 0)})}}function p(e,t,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=256,y=30,m="#e17",b="#222",k=256,w=40,x="#999",S="#eee",T="#f84",P="#48f",E="#e17",C="songle-api-plugin-songle-widget",M=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,d(t).call(this))).__element__=e.element,n.__responsive__=null!=e.responsive&&e.responsive,n.__showController__=null==e.showController||e.showController,n.__showOriginalSiteLink__=null==e.showOriginalSiteLink||e.showOriginalSiteLink,n.__showMusicMap__=null==e.showMusicMap||e.showMusicMap,n.__showSongleJpSiteLink__=null==e.showSongleJpSiteLink||e.showSongleJpSiteLink,n.__controllerWidth__=null!=e.controllerWidth?e.controllerWidth:g,n.__controllerHeight__=null!=e.controllerHeight?e.controllerHeight:y,n.__controllerMouseEnterColor__=null!=e.controllerMouseEnterColor?e.controllerMouseEnterColor:m,n.__controllerMouseLeaveColor__=null!=e.controllerMouseLeaveColor?e.controllerMouseLeaveColor:b,n.__language__=null!=e.language?e.language:l.default.language,n.__musicMapWidth__=null!=e.musicMapWidth?e.musicMapWidth:k,n.__musicMapHeight__=null!=e.musicMapHeight?e.musicMapHeight:w,n.__musicMapOuterBackgroundColor__=null!=e.musicMapOuterBackgroundColor?e.musicMapOuterBackgroundColor:x,n.__musicMapInnerBackgroundColor__=null!=e.musicMapInnerBackgroundColor?e.musicMapInnerBackgroundColor:S,n.__musicMapChorusSectionColor__=null!=e.musicMapChorusSectionColor?e.musicMapChorusSectionColor:T,n.__musicMapRepeatedSectionColor__=null!=e.musicMapRepeatedSectionColor?e.musicMapRepeatedSectionColor:P,n.__musicMapCursorColor__=null!=e.musicMapCursorColor?e.musicMapCursorColor:E,n.__className__="".concat(C,"-").concat(Math.random().toString(36).slice(-4)),n.__readyTrap__=function(e){return n.render()},n.__playTrap__=function(e){},n.__pauseTrap__=function(e){},n.__seekTrap__=function(e){},n.__resizeTrap__=function(e){n.__responsive__&&null!=n.element&&n.__updateSize__({width:n.element.offsetWidth,height:n.element.offsetHeight})&&n.render()},n.__scrollTrap__=function(e){n.__responsive__&&null!=n.element&&n.__updateSize__({width:n.element.offsetWidth,height:n.element.offsetHeight})&&n.render()},n.__responsive__&&null!=n.element&&(e.width=n.element.offsetWidth,e.height=n.element.offsetHeight),n.__updateSize__(e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,i.default),_(t,null,[{key:"Name",get:function(){return C}}]),_(t,[{key:"initialize",value:function(){var e=f(o.a.mark(function e(n){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:p(d(t.prototype),"initialize",this).call(this,n),this.player.on("ready",this.__readyTrap__),this.player.on("play",this.__playTrap__),this.player.on("pause",this.__pauseTrap__),this.player.on("seek",this.__seekTrap__),window.addEventListener("resize",this.__resizeTrap__,!1),window.addEventListener("scroll",this.__scrollTrap__,!1);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){var e=f(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:clearInterval(this.__musicMapAnimationIntervalId__),window.removeEventListener("resize",this.__resizeTrap__,!1),window.removeEventListener("scroll",this.__scrollTrap__,!1),this.player.off("ready",this.__readyTrap__),this.player.off("play",this.__playTrap__),this.player.off("pause",this.__pauseTrap__),this.player.off("seek",this.__seekTrap__),this.__removeRenderedElement__(),p(d(t.prototype),"dispose",this).call(this);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=document.createElement("div");clearInterval(this.__musicMapAnimationIntervalId__),e.className=this.__className__,e.style.lineHeight="normal",e.style.fontSize="10.5px",this.__showController__&&e.appendChild(this.__createControllerElement__({width:this.__controllerWidth__,height:this.__controllerHeight__,mouseEnterColor:this.__controllerMouseEnterColor__,mouseLeaveColor:this.__controllerMouseLeaveColor__})),this.__showOriginalSiteLink__&&e.appendChild(this.__createOriginalSiteLinkElement__({width:this.__musicMapWidth__,height:15})),this.__showMusicMap__&&e.appendChild(this.__createMusicMapElement__({width:this.__musicMapWidth__,height:this.__musicMapHeight__})),this.__showSongleJpSiteLink__&&e.appendChild(this.__createSongleJpSiteLinkElement__({width:this.__musicMapWidth__,height:15})),this.__removeRenderedElement__(),this.element&&this.element.appendChild(e)}},{key:"__removeRenderedElement__",value:function(){document.querySelectorAll("[class=".concat(this.__className__,"]")).forEach(function(e){e.remove()})}},{key:"__createControllerElement__",value:function(e){var t=document.createElement("div");t.style.display="block",t.style.overflow="hidden",t.style.width=e.width+"px",t.style.height=e.height+"px";var n=document.createElement("div");n.style.display="block",n.style.overflow="hidden",n.style.float="left",n.style.width=e.height+"px",n.style.height=e.height+"px";var r=this.__createPlayButtonElement__({size:e.height,mouseEnterColor:e.mouseEnterColor,mouseLeaveColor:e.mouseLeaveColor}),o=this.__createStopButtonElement__({size:e.height,mouseEnterColor:e.mouseEnterColor,mouseLeaveColor:e.mouseLeaveColor});n.appendChild(r),n.appendChild(o);var i=document.createElement("div");i.style.display="block",i.style.overflow="hidden",i.style.float="left",i.style.width=e.width-e.height+"px",i.style.height=e.height+"px";var a=document.createElement("a");a.href="".concat(l.default.defaultAppServerEndpoint,"/redirect_to/songlejp_song_site?url=").concat(encodeURIComponent(this.player.media.sourceUrl)),a.target="_blank",a.style.display="block",a.style.overflow="hidden",a.style.paddingLeft="8px",a.style.textOverflow="ellipsis",a.style.width=e.width-e.height+"px",a.style.height=e.height/2+"px",a.textContent=this.player.media.name;var s=document.createElement("a");return s.href="".concat(l.default.defaultAppServerEndpoint,"/redirect_to/songlejp_song_site?url=").concat(encodeURIComponent(this.player.media.sourceUrl)),s.target="_blank",s.style.display="block",s.style.overflow="hidden",s.style.paddingLeft="8px",s.style.textOverflow="ellipsis",s.style.width=e.width-e.height+"px",s.style.height=e.height/2+"px",s.textContent=this.player.media.artistName,i.appendChild(a),i.appendChild(s),t.appendChild(n),t.appendChild(i),t}},{key:"__createOriginalSiteLinkElement__",value:function(e){var t=document.createElement("div");t.style.display="block",t.style.overflow="hidden",t.style.width=e.width+"px",t.style.height=e.height+"px";var n=document.createElement("a");switch(n.href="".concat(l.default.defaultAppServerEndpoint,"/redirect_to/original_song_site?url=").concat(encodeURIComponent(this.player.media.sourceUrl)),n.target="_blank",n.style.display="block",n.style.overflow="hidden",n.style.float="left",n.style.margin="".concat(0,"px ").concat(2,"px"),n.style.textOverflow="ellipsis",n.style.textAlign="left",n.style.width=e.width/2-4+"px",n.style.height=e.height-0+"px",this.__language__){case"ja":case"en":default:n.textContent=""}t.appendChild(n);var r=document.createElement("a");switch(r.href="".concat(l.default.defaultAppServerEndpoint,"/redirect_to/original_song_site?url=").concat(encodeURIComponent(this.player.media.sourceUrl)),r.target="_blank",r.style.display="block",r.style.overflow="hidden",r.style.float="left",r.style.margin="".concat(0,"px ").concat(2,"px"),r.style.textOverflow="ellipsis",r.style.textAlign="right",r.style.width=e.width/2-4+"px",r.style.height=e.height-0+"px",this.__language__){case"ja":r.textContent="この配信サイトへ";break;case"en":default:r.textContent="Original site"}return t.appendChild(r),t}},{key:"__createMusicMapElement__",value:function(e){var t=this,n=document.createElement("div");if(null==this.player.musicMap.chorus)return s.default.warn("'Songle.Player' do NOT have a chorus information. Please install the chorus plugin using 'Songle.Plugin.Chorus'"),n;n.style.width=e.width+"px",n.style.height=e.height+"px";var r=u.default.createSVGElement({width:e.width,height:e.height}),o=e.width-4,i=(e.height-4-6+1)/6,a=0;r.appendChild(u.default.createRectElement({x:0,y:0,width:e.width,height:e.height,fill:"none",stroke:this.__musicMapOuterBackgroundColor__})),r.addEventListener("click",function(e){t.player.seekTo(a||e.offsetX/o*t.player.duration),l.default.stringIsBlank(t.player.accessToken)&&l.default.stringIsBlank(t.player.secretToken)&&t.player.play()});for(var c=function(e){var n=(i+1)*e+1+1;r.appendChild(u.default.createRectElement({x:2,y:n,width:o,height:i,fill:t.__musicMapInnerBackgroundColor__,stroke:"none"}));var s=t.player.musicMap.chorus[e];if(!s)return"continue";s.items.forEach(function(e){var l=e.startTimeMs/t.player.duration*o+2,c=n,f=e.durationTimeMs/t.player.duration*o,p=i,d=u.default.createRectElement({x:l,y:c,width:f,height:p,fill:s.isChorus?t.__musicMapChorusSectionColor__:t.__musicMapRepeatedSectionColor__,stroke:"none"});d.style.cursor="pointer",d.addEventListener("mouseenter",function(){a=e.startTimeMs,d.style.opacity=.75}),d.addEventListener("mouseleave",function(){a=0,d.style.opacity=1}),r.appendChild(d)})},f=0;f<6;++f)c(f);var p=u.default.createRectElement({x:0,y:0,width:1,height:e.height,fill:"none",stroke:this.__musicMapCursorColor__});return this.__musicMapAnimationIntervalId__=setInterval(function(){p.setAttribute("x",e.width*(t.player.position/t.player.duration))},1e3),r.appendChild(p),n.appendChild(r),n}},{key:"__createPlayButtonElement__",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=null!=t.size?t.size:30,r=null!=t.mouseEnterColor?t.mouseEnterColor:m,o=null!=t.mouseLeaveColor?t.mouseLeaveColor:b,i=null!=t.strokeWidth?t.strokeWidth:2,a=document.createElement("div");a.style.cursor="pointer",a.style.width=n+"px",a.style.height=n+"px",this.player.isPlaying?a.style.display="none":a.style.display="block";var s=u.default.createSVGElement({width:n,height:n}),l=u.default.createGroupElement({fill:o,stroke:o,strokeWidth:i}),c=1*(n/2-i),f=c+i,p=c+i,d=u.default.createCircleElement({cx:f,cy:p,r:c,fill:"none"}),h=.5*(n/2-i),_=1*h/1.41,v=f+Math.cos(3.14/180*135)*h+(h-_),g=p-Math.sin(3.14/180*135)*h,y=f+Math.cos(0)*_,k=p-Math.sin(0)*_,w=f+Math.cos(3.14/180*225)*h+(h-_),x=p-Math.sin(3.14/180*225)*h,S=u.default.createPolygonElement({points:[v,g,y,k,w,x]});return s.appendChild(l),l.appendChild(d),l.appendChild(S),a.appendChild(s),a.addEventListener("click",function(t){e.player.play()}),a.addEventListener("mouseenter",function(e){l.setAttribute("fill",r),l.setAttribute("stroke",r)}),a.addEventListener("mouseleave",function(e){l.setAttribute("fill",o),l.setAttribute("stroke",o)}),this.player.on("play",function(e){a.style.display="none"}),this.player.on("pause",function(e){a.style.display="block"}),a}},{key:"__createStopButtonElement__",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=null!=t.size?t.size:30,r=null!=t.mouseEnterColor?t.mouseEnterColor:m,o=null!=t.mouseLeaveColor?t.mouseLeaveColor:b,i=null!=t.strokeWidth?t.strokeWidth:2,a=document.createElement("div");a.style.cursor="pointer",a.style.width=n+"px",a.style.height=n+"px",this.player.isPlaying?a.style.display="block":a.style.display="none";var s=u.default.createSVGElement({width:n,height:n}),l=u.default.createGroupElement({fill:o,stroke:o,strokeWidth:i}),c=1*(n/2-i),f=c+i,p=c+i,d=u.default.createCircleElement({cx:f,cy:p,r:c,fill:"none"}),h=.5*(n/2-i),_=f+Math.cos(3.14/180*135)*h,v=p-Math.sin(3.14/180*135)*h,g=_+.5*Math.abs(_-f),y=v,k=f+Math.cos(3.14/180*225)*h,w=p-Math.sin(3.14/180*225)*h,x=k+.5*Math.abs(_-f),S=w,T=u.default.createPolygonElement({points:[_,v,g,y,x,S,k,w]}),P=f+Math.cos(3.14/180*45)*h,E=p-Math.sin(3.14/180*45)*h,C=P-.5*Math.abs(P-f),M=E,O=f+Math.cos(3.14/180*315)*h,j=p-Math.sin(3.14/180*315)*h,F=O-.5*Math.abs(O-f),I=j,A=u.default.createPolygonElement({points:[C,M,P,E,O,j,F,I]});return s.appendChild(l),l.appendChild(d),l.appendChild(T),l.appendChild(A),a.appendChild(s),a.addEventListener("click",function(t){e.player.pause()}),a.addEventListener("mouseenter",function(e){l.setAttribute("stroke",r),l.setAttribute("fill",r)}),a.addEventListener("mouseleave",function(e){l.setAttribute("stroke",o),l.setAttribute("fill",o)}),this.player.on("play",function(e){a.style.display="block"}),this.player.on("pause",function(e){a.style.display="none"}),a}},{key:"__createSongleJpSiteLinkElement__",value:function(e){var t=document.createElement("div");t.style.display="block",t.style.overflow="hidden",t.style.width=e.width+"px",t.style.height=e.height+"px";var n=document.createElement("a");switch(n.href="".concat(l.default.defaultAppServerEndpoint,"/redirect_to/songlejp_song_site?url=").concat(encodeURIComponent(this.player.media.sourceUrl)),n.target="_blank",n.style.display="block",n.style.overflow="hidden",n.style.float="left",n.style.margin="".concat(0,"px ").concat(2,"px"),n.style.textOverflow="ellipsis",n.style.textAlign="left",n.style.width=e.width/2-4+"px",n.style.height=e.height-0+"px",this.__language__){case"ja":n.textContent="Songleでサビ訂正";break;case"en":default:n.textContent="Annotate this song"}t.appendChild(n);var r=document.createElement("a");switch(r.href="".concat(l.default.defaultAppServerEndpoint),r.target="_blank",r.style.display="block",r.style.overflow="hidden",r.style.float="left",r.style.margin="".concat(0,"px ").concat(2,"px"),r.style.textOverflow="ellipsis",r.style.textAlign="right",r.style.width=e.width/2-4+"px",r.style.height=e.height-0+"px",this.__language__){case"ja":case"en":default:r.textContent="Powered by Songle API"}return t.appendChild(r),t}},{key:"__updateSize__",value:function(e){var t=!1;if(null!=e.width){if(e.width<20)return s.default.warn("Songle Widget is too small. Please check 'Songle.Plugin.SongleWidget' options"),!1;this.__controllerWidth__!=e.width&&(this.__controllerWidth__=e.width,t=!0),this.__musicMapWidth__!=e.width&&(this.__musicMapWidth__=e.width,t=!0)}if(null!=e.height){if(this.__showController__&&(e.height-=this.__controllerHeight__),this.__showOriginalSiteLink__&&(e.height-=15),this.__showSongleJpSiteLink__&&(e.height-=15),e.height<20)return s.default.warn("Songle Widget is too small. Please check 'Songle.Plugin.SongleWidget' options"),!1;this.__musicMapHeight__!=e.height&&(this.__musicMapHeight__=e.height,t=!0)}return t}},{key:"dispatcherName",get:function(){return C}},{key:"element",get:function(){return a.default.querySelector(this.__element__)}}]),t}();t.default=M},8:function(e,t,n){"use strict";n.r(t);var r=n(0);function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.allow=n.allow||"autoplay",n.autoplay=n.autoplay||!1,n.controls=n.controls||!1,e.autoplay=n.autoplay,e.controls=n.controls,e.src=t,e.setAttribute("allow",n.allow)}var i={createHTMLAudioElement:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.default.global.document.createElement("audio");return o(n,e,t),n},createHTMLVideoElement:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.default.global.document.createElement("video");return o(n,e,t),n},createScriptElement:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.default.global.document.createElement("script");return t.async=t.async||!1,t.defer=t.defer||!1,t.type=t.type||"text/javascript",n.async=t.async,n.defer=t.defer,n.src=e,n.type=t.type,n.addEventListener("abort",t.onAbort,!1),n.addEventListener("error",t.onError,!1),n.addEventListener("load",t.onLoad,!1),n},querySelector:function(e){return"string"==typeof e?r.default.global.document.querySelector(e):e}};t.default=i},84:function(e,t,n){var r=n(119),o=n(120);e.exports=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[i+s]=a[s];return t||o(a)}},9:function(e,t,n){"use strict";n.r(t);var r=n(6),o=n(11),i=n(25),a={ajax:r.default.ajax,ajaxJSON:r.default.ajaxJSON,getJSON:r.default.getJSON,postJSON:r.default.postJSON,putJSON:r.default.putJSON,MusicMap:{getSong:o.default.getSong,getSongBeat:o.default.getSongBeat,getSongChord:o.default.getSongChord,getSongMelody:o.default.getSongMelody,getSongChorus:o.default.getSongChorus,getSongVariation:o.default.getSongVariation},SongleSync:i.default};t.default=a},94:function(e,t,n){"use strict";n.r(t);var r=n(43);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,i(t).call(this,e))).__enterStates__=[],n.__leaveStates__=[],n}var n,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,r.default),n=t,(s=[{key:"dispatch",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.__player__.musicMap.beats.forEach(function(o){o.prev&&e<o.prev.startTimeMs&&t>=o.prev.startTimeMs&&n.__enterStates__[o.prev.index]&&!n.__leaveStates__[o.prev.index]&&(r.leave&&r.leave({beat:o.prev}),n.__leaveStates__[o.prev.index]=!0),o&&e<o.startTimeMs&&t>=o.startTimeMs&&(n.__enterStates__[o.index]||n.__leaveStates__[o.index]||(r.enter&&r.enter({beat:o}),n.__enterStates__[o.index]=!0))})}},{key:"reset",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],this.__enterStates__=[],this.__leaveStates__=[]}}])&&o(n.prototype,s),t}();t.default=s},95:function(e,t,n){"use strict";n.r(t);var r=n(43);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,i(t).call(this,e))).__enterStates__=[],n.__leaveStates__=[],n}var n,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,r.default),n=t,(s=[{key:"dispatch",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.__player__.musicMap.chords.forEach(function(o){e<o.startTimeMs+o.durationTimeMs&&t>=o.startTimeMs&&(o.prev&&(n.__leaveStates__[o.prev.index]||(n.__leaveStates__[o.prev.index]=!0,r.leave&&r.leave({chord:o.prev}))),o&&(n.__enterStates__[o.index]||(n.__enterStates__[o.index]=!0,r.enter&&r.enter({chord:o}))))})}},{key:"reset",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.__player__.musicMap.chords.forEach(function(n){e.__enterStates__[n.index]&&!e.__leaveStates__[n.index]&&t.leave&&t.leave({chord:n})}),this.__enterStates__=[],this.__leaveStates__=[]}}])&&o(n.prototype,s),t}();t.default=s},96:function(e,t,n){"use strict";n.r(t);var r=n(43);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,i(t).call(this,e))).__enterStates__=[],n.__leaveStates__=[],n}var n,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,r.default),n=t,(s=[{key:"dispatch",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.__player__.musicMap.melodies.forEach(function(o){e<o.startTimeMs+o.durationTimeMs&&t>=o.startTimeMs&&(o.prev&&(n.__leaveStates__[o.prev.index]||(n.__leaveStates__[o.prev.index]=!0,r.leave&&r.leave({melody:o.prev}))),o&&(n.__enterStates__[o.index]||(n.__enterStates__[o.index]=!0,r.enter&&r.enter({melody:o}))))})}},{key:"reset",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.__player__.musicMap.melodies.forEach(function(n){e.__enterStates__[n.index]&&!e.__leaveStates__[n.index]&&t.leave&&t.leave({melody:n})}),this.__enterStates__=[],this.__leaveStates__=[]}}])&&o(n.prototype,s),t}();t.default=s},97:function(e,t,n){"use strict";n.r(t);var r=n(43);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,i(t).call(this,e))).__enterStates__=[],n.__leaveStates__=[],n}var n,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,r.default),n=t,(s=[{key:"dispatch",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.__player__.musicMap.chorus.forEach(function(o){o.items.forEach(function(i){e<i.startTimeMs+i.durationTimeMs&&t>=i.startTimeMs?n.__invokeEnterTrap__(o,i,r):n.__invokeLeaveTrap__(o,i,r)})})}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.__invokeAllLeaveTrap__(e),this.__enterStates__=[],this.__leaveStates__=[]}},{key:"__getStateIndex__",value:function(e,t){return 16*e.index+t.index}},{key:"__invokeAllEnterTrap__",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.__player__.musicMap.chorus.forEach(function(n){n.items.forEach(function(r){e.__invokeEnterTrap__(n,r,t)})})}},{key:"__invokeAllLeaveTrap__",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.__player__.musicMap.chorus.forEach(function(n){n.items.forEach(function(r){e.__invokeLeaveTrap__(n,r,t)})})}},{key:"__invokeEnterTrap__",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this.__getStateIndex__(e,t);this.__enterStates__[o]||this.__leaveStates__[o]||(e.items.forEach(function(t){n.__invokeLeaveTrap__(e,t,r)}),r.enter&&r.enter({section:e,sectionItem:t}),this.__enterStates__[o]=!0)}},{key:"__invokeLeaveTrap__",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.__getStateIndex__(e,t);this.__enterStates__[r]&&!this.__leaveStates__[r]&&(n.leave&&n.leave({section:e,sectionItem:t}),this.__leaveStates__[r]=!0)}}])&&o(n.prototype,s),t}();t.default=s},98:function(e,t,n){"use strict";n.r(t);var r=n(43);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,i(t).call(this,e))).__enterStates__=[],n.__leaveStates__=[],n}var n,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,r.default),n=t,(s=[{key:"dispatch",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.__player__.musicMap.variations.forEach(function(o){e<o.startTimeMs+o.durationTimeMs&&t>=o.startTimeMs&&(o.prev&&(n.__leaveStates__[o.prev.index]||(n.__leaveStates__[o.prev.index]=!0,r.leave&&r.leave({variation:o.prev}))),o&&(n.__enterStates__[o.index]||(n.__enterStates__[o.index]=!0,r.enter&&r.enter({variation:o}))))})}},{key:"reset",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.__player__.musicMap.variations.forEach(function(n){e.__enterStates__[n.index]&&!e.__leaveStates__[n.index]&&t.leave&&t.leave({variation:n})}),this.__enterStates__=[],this.__leaveStates__=[]}}])&&o(n.prototype,s),t}();t.default=s}})},function(e,t,n){"use strict";e.exports={XMLHttpRequest:window.XMLHttpRequest,XMLHttpRequestUpload:window.XMLHttpRequestUpload,FormData:window.FormData}},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r);var i=class{constructor(e,t=0,n=0,r=3,i=1,a="#f08080",s="#808080"){this.svg=o()(e),this.x=t,this.y=n,this.dy=r,this.scale=i,this.upColor=a,this.downColor=s,this.flower=this.svg.path("M 72.00,167.55 C 67.06, 169.55 53.05, 173.24 48.00, 172.90  48.00, 172.90 40.00, 171.32 40.00, 171.32  40.00, 171.32 34.00, 170.69 34.00, 170.69  29.42, 169.52 28.03, 166.04 23.00, 163.63  17.74, 161.11 11.24, 159.53 7.33, 154.82  3.49, 150.19 7.17, 140.49 7.83, 135.00  9.41, 121.95 18.30, 103.30 30.00, 96.53  37.68, 92.09 52.12, 90.11 61.00, 90.00  71.43, 89.88 70.99, 90.64 80.00, 91.55  81.78, 91.74 84.86, 91.91 85.66, 89.78  86.58, 87.34 82.62, 85.22 81.00, 84.20  72.41, 78.83 70.62, 77.22 64.33, 69.00  62.70, 66.86 59.59, 62.45 58.72, 60.00  54.39, 47.70 64.20, 32.37 69.68, 22.00  72.11, 17.41 75.02, 8.75 80.04, 6.74  84.25, 5.06 94.45, 7.57 99.00, 8.49  106.26, 9.94 117.96, 9.72 123.90, 14.50  128.65, 18.32 131.70, 29.09 133.27, 35.00  133.27, 35.00 138.50, 57.00 138.50, 57.00  139.01, 59.19 140.12, 63.94 142.29, 64.97  145.81, 66.66 152.21, 57.45 154.20, 55.00  161.43, 46.09 175.90, 28.49 188.00, 27.65  188.00, 27.65 229.00, 34.83 229.00, 34.83  232.69, 35.23 240.68, 34.89 242.94, 38.51  244.17, 40.48 243.10, 43.04 242.38, 45.00  242.38, 45.00 237.30, 59.00 237.30, 59.00  235.36, 65.86 234.70, 75.80 231.47, 82.00  225.03, 94.37 206.01, 101.37 193.00, 104.00  193.00, 104.00 193.00, 106.00 193.00, 106.00  200.19, 108.39 201.40, 108.08 208.00, 109.52  211.79, 110.34 230.14, 117.03 233.00, 118.88  235.94, 120.77 239.33, 124.27 241.53, 127.00  250.24, 137.78 248.17, 154.71 248.00, 168.00  247.95, 171.21 247.89, 174.91 245.35, 177.27  245.35, 177.27 232.00, 183.73 232.00, 183.73  222.58, 188.18 213.68, 193.98 203.00, 194.81  186.98, 196.06 169.94, 169.36 157.00, 166.00  157.00, 166.00 158.21, 179.00 158.21, 179.00  158.93, 184.04 159.91, 183.33 160.00, 190.00  160.00, 190.00 160.00, 206.00 160.00, 206.00  159.93, 211.56 158.57, 219.39 155.35, 224.00  148.64, 233.59 133.00, 240.20 122.00, 243.28  118.82, 244.18 114.28, 246.33 111.04, 245.65  106.76, 244.75 102.22, 237.30 98.91, 234.18  98.91, 234.18 90.00, 227.62 90.00, 227.62  83.27, 222.23 76.07, 213.62 74.14, 205.00  72.64, 198.31 76.20, 184.85 79.41, 179.00  83.40, 171.74 88.25, 168.20 90.00, 159.00  83.49, 160.86 78.25, 165.01 72.00, 167.55 Z"),this.bbox=this.flower.getBBox(),this.size=this.bbox.width>this.bbox.height?this.bbox.width:this.bbox.height,this.size*=this.scale,this.flowerScale=this.svg.g(this.flower),this.flowerTranslate=this.svg.g(this.flowerScale),this.flowerScale.transform("scale("+this.scale+","+this.scale+")"),this.flowerTranslate.transform("translate("+this.x+","+this.y+")"),this.setDownColor()}setUpColor(){this.flower.attr({fill:this.upColor})}setDownColor(){this.flower.attr({fill:this.downColor})}setTranslate(e,t){this.flowerTranslate.transform("translate("+e+","+t+")")}up(){this.flower.attr({transform:this.flower.matrix.rotate(-2,this.bbox.cx,this.bbox.cy)}),this.flowerTranslate.attr({transform:this.flowerTranslate.matrix.translate(0,-1*this.dy)})}down(){this.flower.attr({transform:this.flower.matrix.rotate(2,this.bbox.cx,this.bbox.cy)}),this.flowerTranslate.attr({transform:this.flowerTranslate.matrix.translate(0,this.dy)})}};n(2);document.addEventListener("DOMContentLoaded",()=>{const e=new Songle.Player({mediaElement:"#songle"});e.useMedia("www.nicovideo.jp%2Fwatch%2Fsm15335938",{videoSizeW:"100%",videoSizeH:"100%"});const t=document.getElementById("songle"),n=document.getElementById("check");n.addEventListener("change",e=>{e.target.checked?t.style.zIndex=1:t.style.zIndex=-1});const r=document.createElementNS("http://www.w3.org/2000/svg","svg");let o=window.innerWidth,l=window.innerHeight,c=[];r.setAttribute("id","svg"),r.setAttribute("preserveAspectRatio","xMinYMin meet"),r.setAttribute("viewBox",`0 0 ${o} ${l}`),r.setAttribute("x","0px"),r.setAttribute("y","0px"),r.setAttribute("width",`${o}px`),r.setAttribute("height",`${l}px`),r.setAttribute("style",[`width: ${o}px;`,`height: ${l}px;`].join(" ")),document.body.appendChild(r),r.addEventListener("click",e=>{o/4<e.clientX&&e.clientX<o/4*3&&l/4<e.clientY&&e.clientY<l/4*3?(t.style.zIndex=1,n.checked=!0):(t.style.zIndex=-1,n.checked=!1)}),window.addEventListener("resize",()=>{o=window.innerWidth,l=window.innerHeight,r.setAttribute("viewBox",`0 0 ${o} ${l}`),r.setAttribute("width",`${o}px`),r.setAttribute("height",`${l}px`),r.setAttribute("style",[`width: ${o}px;`,`height: ${l}px;`].join(" ")),c.forEach(e=>{e.flower.remove()}),c=[],p()});let f="STOP";e.on("play",e=>{console.log("play",e),f="DOWN",c.forEach(e=>{e.setDownColor()})}),e.on("seek",e=>{console.log("seek")}),e.on("pause",e=>{console.log("pause"),f="STOP"}),e.on("finish",e=>{f="STOP"}),e.addPlugin(new Songle.Plugin.Chorus({revisionId:1537048})),e.on("chorusSectionEnter",e=>{-1!==[1,3,4].indexOf(e.data.sectionItem.index)&&(f="STOP")},{offset:-1e3}),e.on("chorusSectionEnter",e=>{-1!==[1,2,3,4,5,6,7].indexOf(e.data.sectionItem.index)&&(f="UP",c.forEach(e=>{e.setUpColor()}))},{offset:500}),e.on("chorusSectionEnter",e=>{0===e.data.sectionItem.index&&(f="DOWN",c.forEach(e=>{e.setDownColor()}))},{offset:0}),e.on("repeatSectionEnter",e=>{2===e.data.section.index&&e.data.sectionItem.index>0&&(f="UP",c.forEach(e=>{e.setUpColor()}))}),e.on("repeatSectionLeave",e=>{2===e.data.section.index&&e.data.sectionItem.index<=2&&(f="DOWN",c.forEach(e=>{e.setDownColor()}))});const p=()=>{let e=Math.floor(100/2304e3*(o*l)),t=Math.floor(150/2304e3*(o*l)),n=Math.floor(5/2304e3*(o*l));for(var r=0;r<e;r++){let e=new i("#svg",a(0,o-30),a(-30,l/3*4),a(3,5),.1,s(),u());c.push(e)}for(r=0;r<t;r++){let e=new i("#svg",a(0,o-90),a(-90,l/3*4),a(2,7),.3,s(),u());c.push(e)}for(r=0;r<n;r++){let e=new i("#svg",a(0,o-240),a(-240,l/3*4),a(4,8),.8,s(),u());c.push(e)}};p(),setInterval(()=>{"UP"==f?c.forEach(e=>{e.up(),e.flowerTranslate.matrix.split().dy<-1*e.size&&e.setTranslate(a(0,o-e.size),a(l,4*l/3))}):"STOP"==f||"DOWN"==f&&c.forEach(e=>{e.down(),e.flowerTranslate.matrix.split().dy>l+e.size&&e.setTranslate(a(0,o-e.size),a(-1*l*1/3,-1*e.size))})},1e3/15)});const a=(e,t)=>(e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e),s=()=>{const e=["#e55faf","#fa6366","#e02f6e","#f8e4ee","#f8d2c8"];return e[Math.floor(Math.random()*e.length)]},u=()=>{const e=["#8a8c8c","#e7e7e7","#b6b6b6"];return e[Math.floor(Math.random()*e.length)]}}]);